  [1m[36mActiveRecord::InternalMetadata Pluck (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.094963"], ["updated_at", "2022-02-18 14:50:10.094963"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2474], ["LIMIT", 1]]
  [1m[36mInvoice Create (1.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2474], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.168722"], ["updated_at", "2022-02-18 14:50:10.168722"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2474], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2474], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.172674"], ["updated_at", "2022-02-18 14:50:10.172674"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2474], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2474], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.175084"], ["updated_at", "2022-02-18 14:50:10.175084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd410c5f800 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.0ms | Allocations: 3664)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.237714"], ["updated_at", "2022-02-18 14:50:10.237714"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2475], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2475], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.239710"], ["updated_at", "2022-02-18 14:50:10.239710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2475], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2475], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.241432"], ["updated_at", "2022-02-18 14:50:10.241432"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2475], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2475], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.243155"], ["updated_at", "2022-02-18 14:50:10.243155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 3ms (ActiveRecord: 0.3ms | Allocations: 1079)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 1.3ms | Allocations: 494)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 4468)
Completed 200 OK in 17ms (Views: 15.6ms | ActiveRecord: 0.0ms | Allocations: 8956)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.275194"], ["updated_at", "2022-02-18 14:50:10.275194"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2476], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2476], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.277334"], ["updated_at", "2022-02-18 14:50:10.277334"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2476], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2476], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.279398"], ["updated_at", "2022-02-18 14:50:10.279398"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2476], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2476], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.281415"], ["updated_at", "2022-02-18 14:50:10.281415"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 677)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.292429"], ["updated_at", "2022-02-18 14:50:10.292429"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2477], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2477], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.295261"], ["updated_at", "2022-02-18 14:50:10.295261"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2477], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2477], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.297851"], ["updated_at", "2022-02-18 14:50:10.297851"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2477], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2477], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.299717"], ["updated_at", "2022-02-18 14:50:10.299717"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 493)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 689)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.310389"], ["updated_at", "2022-02-18 14:50:10.310389"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2478], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2478], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.312536"], ["updated_at", "2022-02-18 14:50:10.312536"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2478], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2478], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.314599"], ["updated_at", "2022-02-18 14:50:10.314599"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2478], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2478], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.316451"], ["updated_at", "2022-02-18 14:50:10.316451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started GET "/invoice/list?id=4237" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4237"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 689)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.328850"], ["updated_at", "2022-02-18 14:50:10.328850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2479], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2479], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.331258"], ["updated_at", "2022-02-18 14:50:10.331258"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2479], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2479], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.333298"], ["updated_at", "2022-02-18 14:50:10.333298"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2479], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2479], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.335049"], ["updated_at", "2022-02-18 14:50:10.335049"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd410c5f800 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 296)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.341174"], ["updated_at", "2022-02-18 14:50:10.341174"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2480], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2480], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.343150"], ["updated_at", "2022-02-18 14:50:10.343150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2480], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2480], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.344898"], ["updated_at", "2022-02-18 14:50:10.344898"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2480], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2480], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.346572"], ["updated_at", "2022-02-18 14:50:10.346572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 493)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 336)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.356844"], ["updated_at", "2022-02-18 14:50:10.356844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2481], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2481], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.358734"], ["updated_at", "2022-02-18 14:50:10.358734"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2481], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2481], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.360340"], ["updated_at", "2022-02-18 14:50:10.360340"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2481], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2481], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.362174"], ["updated_at", "2022-02-18 14:50:10.362174"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 493)
Started GET "/invoice/show?id=4246" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4246"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4246], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 1001)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.373640"], ["updated_at", "2022-02-18 14:50:10.373640"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2482], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2482], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.375573"], ["updated_at", "2022-02-18 14:50:10.375573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2482], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2482], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.377372"], ["updated_at", "2022-02-18 14:50:10.377372"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2482], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2482], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.379050"], ["updated_at", "2022-02-18 14:50:10.379050"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd410c5f800 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 313)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.391684"], ["updated_at", "2022-02-18 14:50:10.391684"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2483], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2483], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.393813"], ["updated_at", "2022-02-18 14:50:10.393813"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2483], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2483], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.395969"], ["updated_at", "2022-02-18 14:50:10.395969"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2483], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2483], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.398268"], ["updated_at", "2022-02-18 14:50:10.398268"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 387)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.408067"], ["updated_at", "2022-02-18 14:50:10.408067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2484], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2484], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.411084"], ["updated_at", "2022-02-18 14:50:10.411084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2484], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2484], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.414081"], ["updated_at", "2022-02-18 14:50:10.414081"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2484], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2484], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.417400"], ["updated_at", "2022-02-18 14:50:10.417400"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2484], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.5ms | Allocations: 1348)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.435938"], ["updated_at", "2022-02-18 14:50:10.435938"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2485], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2485], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.438753"], ["updated_at", "2022-02-18 14:50:10.438753"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2485], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2485], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.441434"], ["updated_at", "2022-02-18 14:50:10.441434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2485], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2485], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.444036"], ["updated_at", "2022-02-18 14:50:10.444036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 493)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2485], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2485], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:50:10.455717"], ["updated_at", "2022-02-18 14:50:10.455717"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 7ms (ActiveRecord: 0.8ms | Allocations: 4061)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.466959"], ["updated_at", "2022-02-18 14:50:10.466959"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2486], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2486], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.469978"], ["updated_at", "2022-02-18 14:50:10.469978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2486], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2486], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.472600"], ["updated_at", "2022-02-18 14:50:10.472600"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2486], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2486], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.475285"], ["updated_at", "2022-02-18 14:50:10.475285"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd410c5f800 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 296)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.483707"], ["updated_at", "2022-02-18 14:50:10.483707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2487], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2487], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.486207"], ["updated_at", "2022-02-18 14:50:10.486207"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2487], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2487], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.488818"], ["updated_at", "2022-02-18 14:50:10.488818"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2487], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2487], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.491420"], ["updated_at", "2022-02-18 14:50:10.491420"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 373)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.505515"], ["updated_at", "2022-02-18 14:50:10.505515"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2488], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2488], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.508572"], ["updated_at", "2022-02-18 14:50:10.508572"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2488], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2488], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.511861"], ["updated_at", "2022-02-18 14:50:10.511861"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2488], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2488], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.515487"], ["updated_at", "2022-02-18 14:50:10.515487"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 493)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4268", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4268], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2488], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.7ms | Allocations: 1611)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.533332"], ["updated_at", "2022-02-18 14:50:10.533332"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2489], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2489], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.536141"], ["updated_at", "2022-02-18 14:50:10.536141"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2489], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2489], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.538871"], ["updated_at", "2022-02-18 14:50:10.538871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2489], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2489], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.542262"], ["updated_at", "2022-02-18 14:50:10.542262"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4271", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4271], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2489], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:50:10.554933"], ["id", 4271]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.1ms | Allocations: 1910)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.561919"], ["updated_at", "2022-02-18 14:50:10.561919"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2490], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2490], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.564822"], ["updated_at", "2022-02-18 14:50:10.564822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2490], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2490], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.567620"], ["updated_at", "2022-02-18 14:50:10.567620"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2490], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2490], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.570351"], ["updated_at", "2022-02-18 14:50:10.570351"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd410c5f800 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 296)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.578770"], ["updated_at", "2022-02-18 14:50:10.578770"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2491], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2491], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.582121"], ["updated_at", "2022-02-18 14:50:10.582121"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2491], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2491], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.584831"], ["updated_at", "2022-02-18 14:50:10.584831"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2491], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2491], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.587612"], ["updated_at", "2022-02-18 14:50:10.587612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 493)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 331)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.602891"], ["updated_at", "2022-02-18 14:50:10.602891"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2492], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2492], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.605913"], ["updated_at", "2022-02-18 14:50:10.605913"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2492], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2492], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.608669"], ["updated_at", "2022-02-18 14:50:10.608669"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2492], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2492], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.611845"], ["updated_at", "2022-02-18 14:50:10.611845"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:50:10.627098"], ["updated_at", "2022-02-18 14:50:10.627098"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2493], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2493], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.629528"], ["updated_at", "2022-02-18 14:50:10.629528"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2493], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2493], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.631456"], ["updated_at", "2022-02-18 14:50:10.631456"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2493], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2493], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:50:10.633776"], ["updated_at", "2022-02-18 14:50:10.633776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 493)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:50:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4283"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4283], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4283]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.8ms | Allocations: 776)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.581130"], ["updated_at", "2022-02-18 14:51:41.581130"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2494], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2494], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.594786"], ["updated_at", "2022-02-18 14:51:41.594786"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2494], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2494], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.596910"], ["updated_at", "2022-02-18 14:51:41.596910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2494], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2494], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.598602"], ["updated_at", "2022-02-18 14:51:41.598602"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe475d27ad8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.0ms | Allocations: 3238)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.659936"], ["updated_at", "2022-02-18 14:51:41.659936"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2495], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2495], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.662094"], ["updated_at", "2022-02-18 14:51:41.662094"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2495], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2495], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.664007"], ["updated_at", "2022-02-18 14:51:41.664007"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2495], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2495], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.665744"], ["updated_at", "2022-02-18 14:51:41.665744"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms | Allocations: 8020)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.688392"], ["updated_at", "2022-02-18 14:51:41.688392"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2496], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2496], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.690306"], ["updated_at", "2022-02-18 14:51:41.690306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2496], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2496], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.691990"], ["updated_at", "2022-02-18 14:51:41.691990"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2496], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2496], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.693524"], ["updated_at", "2022-02-18 14:51:41.693524"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 717)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.703207"], ["updated_at", "2022-02-18 14:51:41.703207"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2497], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2497], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.705212"], ["updated_at", "2022-02-18 14:51:41.705212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2497], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2497], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.706939"], ["updated_at", "2022-02-18 14:51:41.706939"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2497], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2497], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.708650"], ["updated_at", "2022-02-18 14:51:41.708650"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.719558"], ["updated_at", "2022-02-18 14:51:41.719558"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2498], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2498], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.721932"], ["updated_at", "2022-02-18 14:51:41.721932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2498], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2498], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.724408"], ["updated_at", "2022-02-18 14:51:41.724408"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2498], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2498], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.726436"], ["updated_at", "2022-02-18 14:51:41.726436"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4298" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4298"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 708)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.737314"], ["updated_at", "2022-02-18 14:51:41.737314"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2499], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2499], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.739339"], ["updated_at", "2022-02-18 14:51:41.739339"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2499], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2499], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.741124"], ["updated_at", "2022-02-18 14:51:41.741124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2499], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2499], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.742772"], ["updated_at", "2022-02-18 14:51:41.742772"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe475d27ad8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.749124"], ["updated_at", "2022-02-18 14:51:41.749124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2500], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2500], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.751097"], ["updated_at", "2022-02-18 14:51:41.751097"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2500], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2500], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.752885"], ["updated_at", "2022-02-18 14:51:41.752885"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2500], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2500], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.754555"], ["updated_at", "2022-02-18 14:51:41.754555"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 331)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.765220"], ["updated_at", "2022-02-18 14:51:41.765220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2501], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2501], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.767246"], ["updated_at", "2022-02-18 14:51:41.767246"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2501], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2501], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.769065"], ["updated_at", "2022-02-18 14:51:41.769065"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2501], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2501], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.770746"], ["updated_at", "2022-02-18 14:51:41.770746"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4307" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4307"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4307], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 999)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.783419"], ["updated_at", "2022-02-18 14:51:41.783419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2502], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2502], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.785264"], ["updated_at", "2022-02-18 14:51:41.785264"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2502], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2502], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.787179"], ["updated_at", "2022-02-18 14:51:41.787179"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2502], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2502], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.789824"], ["updated_at", "2022-02-18 14:51:41.789824"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe475d27ad8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.817525"], ["updated_at", "2022-02-18 14:51:41.817525"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2503], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2503], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.821466"], ["updated_at", "2022-02-18 14:51:41.821466"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2503], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2503], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.825072"], ["updated_at", "2022-02-18 14:51:41.825072"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2503], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2503], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.828879"], ["updated_at", "2022-02-18 14:51:41.828879"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 5ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 379)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.859537"], ["updated_at", "2022-02-18 14:51:41.859537"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2504], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2504], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.862838"], ["updated_at", "2022-02-18 14:51:41.862838"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2504], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2504], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.867710"], ["updated_at", "2022-02-18 14:51:41.867710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2504], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2504], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.870855"], ["updated_at", "2022-02-18 14:51:41.870855"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 8ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2504], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1340)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.915638"], ["updated_at", "2022-02-18 14:51:41.915638"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2505], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2505], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.917977"], ["updated_at", "2022-02-18 14:51:41.917977"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2505], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2505], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.920233"], ["updated_at", "2022-02-18 14:51:41.920233"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2505], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2505], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.922283"], ["updated_at", "2022-02-18 14:51:41.922283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2505], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2505], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:51:41.932494"], ["updated_at", "2022-02-18 14:51:41.932494"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 8ms (ActiveRecord: 0.7ms | Allocations: 3980)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.942486"], ["updated_at", "2022-02-18 14:51:41.942486"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2506], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2506], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.944366"], ["updated_at", "2022-02-18 14:51:41.944366"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2506], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2506], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.945990"], ["updated_at", "2022-02-18 14:51:41.945990"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2506], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2506], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.947690"], ["updated_at", "2022-02-18 14:51:41.947690"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe475d27ad8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.953700"], ["updated_at", "2022-02-18 14:51:41.953700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2507], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2507], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.957141"], ["updated_at", "2022-02-18 14:51:41.957141"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2507], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2507], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.959063"], ["updated_at", "2022-02-18 14:51:41.959063"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2507], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2507], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.960781"], ["updated_at", "2022-02-18 14:51:41.960781"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 383)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.971037"], ["updated_at", "2022-02-18 14:51:41.971037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2508], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2508], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.973403"], ["updated_at", "2022-02-18 14:51:41.973403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2508], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2508], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.975347"], ["updated_at", "2022-02-18 14:51:41.975347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2508], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2508], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.976976"], ["updated_at", "2022-02-18 14:51:41.976976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4329", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4329], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2508], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1639)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:41.990084"], ["updated_at", "2022-02-18 14:51:41.990084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2509], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2509], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.992216"], ["updated_at", "2022-02-18 14:51:41.992216"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2509], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2509], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.993846"], ["updated_at", "2022-02-18 14:51:41.993846"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2509], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2509], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:41.995612"], ["updated_at", "2022-02-18 14:51:41.995612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4332", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4332], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2509], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:51:42.006135"], ["id", 4332]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.2ms | Allocations: 1908)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:42.011404"], ["updated_at", "2022-02-18 14:51:42.011404"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2510], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2510], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.013287"], ["updated_at", "2022-02-18 14:51:42.013287"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2510], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2510], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.015329"], ["updated_at", "2022-02-18 14:51:42.015329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2510], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2510], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.017060"], ["updated_at", "2022-02-18 14:51:42.017060"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe475d27ad8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:42.023341"], ["updated_at", "2022-02-18 14:51:42.023341"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2511], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2511], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.025346"], ["updated_at", "2022-02-18 14:51:42.025346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2511], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2511], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.027132"], ["updated_at", "2022-02-18 14:51:42.027132"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2511], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2511], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.028903"], ["updated_at", "2022-02-18 14:51:42.028903"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:42.041196"], ["updated_at", "2022-02-18 14:51:42.041196"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2512], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2512], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.043239"], ["updated_at", "2022-02-18 14:51:42.043239"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2512], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2512], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.045021"], ["updated_at", "2022-02-18 14:51:42.045021"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2512], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2512], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.046737"], ["updated_at", "2022-02-18 14:51:42.046737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 504)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:51:42.057807"], ["updated_at", "2022-02-18 14:51:42.057807"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2513], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2513], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.060027"], ["updated_at", "2022-02-18 14:51:42.060027"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2513], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2513], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.062246"], ["updated_at", "2022-02-18 14:51:42.062246"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2513], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2513], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:51:42.064893"], ["updated_at", "2022-02-18 14:51:42.064893"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:51:42 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4344"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4344], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4344]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.9ms | Allocations: 759)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.599844"], ["updated_at", "2022-02-18 14:55:03.599844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2514], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2514], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.614908"], ["updated_at", "2022-02-18 14:55:03.614908"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2514], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2514], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.617813"], ["updated_at", "2022-02-18 14:55:03.617813"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2514], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2514], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.619650"], ["updated_at", "2022-02-18 14:55:03.619650"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3ce9fca468 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.0ms | Allocations: 3239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.659524"], ["updated_at", "2022-02-18 14:55:03.659524"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2515], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2515], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.661456"], ["updated_at", "2022-02-18 14:55:03.661456"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2515], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2515], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.663032"], ["updated_at", "2022-02-18 14:55:03.663032"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2515], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2515], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.664538"], ["updated_at", "2022-02-18 14:55:03.664538"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms | Allocations: 8020)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.684050"], ["updated_at", "2022-02-18 14:55:03.684050"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2516], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2516], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.694703"], ["updated_at", "2022-02-18 14:55:03.694703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2516], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2516], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.699545"], ["updated_at", "2022-02-18 14:55:03.699545"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2516], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2516], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.707702"], ["updated_at", "2022-02-18 14:55:03.707702"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 5ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.742426"], ["updated_at", "2022-02-18 14:55:03.742426"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2517], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2517], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.748555"], ["updated_at", "2022-02-18 14:55:03.748555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2517], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2517], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.754780"], ["updated_at", "2022-02-18 14:55:03.754780"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2517], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2517], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.758489"], ["updated_at", "2022-02-18 14:55:03.758489"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 5ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.803960"], ["updated_at", "2022-02-18 14:55:03.803960"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2518], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2518], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.806365"], ["updated_at", "2022-02-18 14:55:03.806365"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2518], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2518], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.808598"], ["updated_at", "2022-02-18 14:55:03.808598"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2518], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2518], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.810566"], ["updated_at", "2022-02-18 14:55:03.810566"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=4359" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4359"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.823547"], ["updated_at", "2022-02-18 14:55:03.823547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2519], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2519], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.825741"], ["updated_at", "2022-02-18 14:55:03.825741"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2519], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2519], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.827843"], ["updated_at", "2022-02-18 14:55:03.827843"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2519], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2519], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.830101"], ["updated_at", "2022-02-18 14:55:03.830101"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3ce9fca468 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.838020"], ["updated_at", "2022-02-18 14:55:03.838020"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2520], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2520], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.841217"], ["updated_at", "2022-02-18 14:55:03.841217"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2520], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2520], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.843399"], ["updated_at", "2022-02-18 14:55:03.843399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2520], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2520], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.845349"], ["updated_at", "2022-02-18 14:55:03.845349"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 334)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.855632"], ["updated_at", "2022-02-18 14:55:03.855632"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2521], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2521], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.857709"], ["updated_at", "2022-02-18 14:55:03.857709"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2521], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2521], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.859827"], ["updated_at", "2022-02-18 14:55:03.859827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2521], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2521], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.862324"], ["updated_at", "2022-02-18 14:55:03.862324"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4368" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4368"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4368], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 990)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.877309"], ["updated_at", "2022-02-18 14:55:03.877309"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2522], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2522], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.879924"], ["updated_at", "2022-02-18 14:55:03.879924"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2522], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2522], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.881981"], ["updated_at", "2022-02-18 14:55:03.881981"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2522], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2522], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.883779"], ["updated_at", "2022-02-18 14:55:03.883779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3ce9fca468 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.893834"], ["updated_at", "2022-02-18 14:55:03.893834"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2523], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2523], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.896171"], ["updated_at", "2022-02-18 14:55:03.896171"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2523], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2523], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.898093"], ["updated_at", "2022-02-18 14:55:03.898093"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2523], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2523], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.899949"], ["updated_at", "2022-02-18 14:55:03.899949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.912455"], ["updated_at", "2022-02-18 14:55:03.912455"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2524], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2524], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.914620"], ["updated_at", "2022-02-18 14:55:03.914620"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2524], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2524], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.916402"], ["updated_at", "2022-02-18 14:55:03.916402"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2524], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2524], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.918124"], ["updated_at", "2022-02-18 14:55:03.918124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2524], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1355)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.931525"], ["updated_at", "2022-02-18 14:55:03.931525"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2525], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2525], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.933809"], ["updated_at", "2022-02-18 14:55:03.933809"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2525], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2525], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.935785"], ["updated_at", "2022-02-18 14:55:03.935785"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2525], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2525], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.938242"], ["updated_at", "2022-02-18 14:55:03.938242"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2525], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2525], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:55:03.949321"], ["updated_at", "2022-02-18 14:55:03.949321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 6ms (ActiveRecord: 0.7ms | Allocations: 3994)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.957817"], ["updated_at", "2022-02-18 14:55:03.957817"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2526], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2526], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.960006"], ["updated_at", "2022-02-18 14:55:03.960006"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2526], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2526], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.961833"], ["updated_at", "2022-02-18 14:55:03.961833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2526], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2526], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.963493"], ["updated_at", "2022-02-18 14:55:03.963493"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3ce9fca468 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.969710"], ["updated_at", "2022-02-18 14:55:03.969710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2527], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2527], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.971879"], ["updated_at", "2022-02-18 14:55:03.971879"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2527], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2527], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.975122"], ["updated_at", "2022-02-18 14:55:03.975122"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2527], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2527], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.977488"], ["updated_at", "2022-02-18 14:55:03.977488"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 389)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:03.988391"], ["updated_at", "2022-02-18 14:55:03.988391"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2528], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2528], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.991904"], ["updated_at", "2022-02-18 14:55:03.991904"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2528], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2528], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.994218"], ["updated_at", "2022-02-18 14:55:03.994218"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2528], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2528], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:03.996053"], ["updated_at", "2022-02-18 14:55:03.996053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4390", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4390], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2528], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1627)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:04.008848"], ["updated_at", "2022-02-18 14:55:04.008848"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2529], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2529], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.011624"], ["updated_at", "2022-02-18 14:55:04.011624"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2529], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2529], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.014220"], ["updated_at", "2022-02-18 14:55:04.014220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2529], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2529], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.017843"], ["updated_at", "2022-02-18 14:55:04.017843"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4393", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4393], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2529], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:55:04.028954"], ["id", 4393]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1905)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:04.034046"], ["updated_at", "2022-02-18 14:55:04.034046"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2530], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2530], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.036106"], ["updated_at", "2022-02-18 14:55:04.036106"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2530], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2530], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.038215"], ["updated_at", "2022-02-18 14:55:04.038215"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2530], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2530], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.040036"], ["updated_at", "2022-02-18 14:55:04.040036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3ce9fca468 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:04.047037"], ["updated_at", "2022-02-18 14:55:04.047037"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2531], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2531], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.049515"], ["updated_at", "2022-02-18 14:55:04.049515"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2531], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2531], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.051566"], ["updated_at", "2022-02-18 14:55:04.051566"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2531], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2531], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.053278"], ["updated_at", "2022-02-18 14:55:04.053278"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 359)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:04.064889"], ["updated_at", "2022-02-18 14:55:04.064889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2532], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2532], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.066838"], ["updated_at", "2022-02-18 14:55:04.066838"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2532], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2532], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.068685"], ["updated_at", "2022-02-18 14:55:04.068685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2532], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2532], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.070429"], ["updated_at", "2022-02-18 14:55:04.070429"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 504)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:04.082274"], ["updated_at", "2022-02-18 14:55:04.082274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2533], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2533], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.084204"], ["updated_at", "2022-02-18 14:55:04.084204"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2533], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2533], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.086107"], ["updated_at", "2022-02-18 14:55:04.086107"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2533], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2533], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:04.088043"], ["updated_at", "2022-02-18 14:55:04.088043"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:04 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4405"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4405], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4405]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.8ms | Allocations: 777)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.665556"], ["updated_at", "2022-02-18 14:55:40.665556"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2534], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2534], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.683125"], ["updated_at", "2022-02-18 14:55:40.683125"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2534], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2534], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.685675"], ["updated_at", "2022-02-18 14:55:40.685675"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2534], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2534], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.687785"], ["updated_at", "2022-02-18 14:55:40.687785"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fdfbcfa0890 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.0ms | Allocations: 3239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.728269"], ["updated_at", "2022-02-18 14:55:40.728269"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2535], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2535], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.730011"], ["updated_at", "2022-02-18 14:55:40.730011"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2535], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2535], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.731364"], ["updated_at", "2022-02-18 14:55:40.731364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2535], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2535], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.732622"], ["updated_at", "2022-02-18 14:55:40.732622"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms | Allocations: 8020)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.751839"], ["updated_at", "2022-02-18 14:55:40.751839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2536], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2536], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.754058"], ["updated_at", "2022-02-18 14:55:40.754058"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2536], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2536], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.755924"], ["updated_at", "2022-02-18 14:55:40.755924"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2536], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2536], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.758109"], ["updated_at", "2022-02-18 14:55:40.758109"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.769734"], ["updated_at", "2022-02-18 14:55:40.769734"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2537], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2537], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.771704"], ["updated_at", "2022-02-18 14:55:40.771704"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2537], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2537], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.773602"], ["updated_at", "2022-02-18 14:55:40.773602"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2537], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2537], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.775083"], ["updated_at", "2022-02-18 14:55:40.775083"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.785712"], ["updated_at", "2022-02-18 14:55:40.785712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2538], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2538], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.787817"], ["updated_at", "2022-02-18 14:55:40.787817"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2538], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2538], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.789658"], ["updated_at", "2022-02-18 14:55:40.789658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2538], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2538], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.791477"], ["updated_at", "2022-02-18 14:55:40.791477"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=4420" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4420"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.801308"], ["updated_at", "2022-02-18 14:55:40.801308"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2539], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2539], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.803163"], ["updated_at", "2022-02-18 14:55:40.803163"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2539], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2539], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.804731"], ["updated_at", "2022-02-18 14:55:40.804731"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2539], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2539], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.806303"], ["updated_at", "2022-02-18 14:55:40.806303"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fdfbcfa0890 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.813629"], ["updated_at", "2022-02-18 14:55:40.813629"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2540], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2540], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.816851"], ["updated_at", "2022-02-18 14:55:40.816851"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2540], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2540], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.819178"], ["updated_at", "2022-02-18 14:55:40.819178"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2540], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2540], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.820789"], ["updated_at", "2022-02-18 14:55:40.820789"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.830770"], ["updated_at", "2022-02-18 14:55:40.830770"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2541], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2541], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.832699"], ["updated_at", "2022-02-18 14:55:40.832699"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2541], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2541], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.834469"], ["updated_at", "2022-02-18 14:55:40.834469"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2541], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2541], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.836152"], ["updated_at", "2022-02-18 14:55:40.836152"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4429" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4429"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4429], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 996)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.848267"], ["updated_at", "2022-02-18 14:55:40.848267"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2542], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2542], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.850256"], ["updated_at", "2022-02-18 14:55:40.850256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2542], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2542], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.851934"], ["updated_at", "2022-02-18 14:55:40.851934"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2542], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2542], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.853566"], ["updated_at", "2022-02-18 14:55:40.853566"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fdfbcfa0890 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.862306"], ["updated_at", "2022-02-18 14:55:40.862306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2543], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2543], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.864195"], ["updated_at", "2022-02-18 14:55:40.864195"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2543], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2543], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.865882"], ["updated_at", "2022-02-18 14:55:40.865882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2543], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2543], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.867497"], ["updated_at", "2022-02-18 14:55:40.867497"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 412)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.877242"], ["updated_at", "2022-02-18 14:55:40.877242"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2544], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2544], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.879144"], ["updated_at", "2022-02-18 14:55:40.879144"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2544], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2544], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.880847"], ["updated_at", "2022-02-18 14:55:40.880847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2544], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2544], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.882456"], ["updated_at", "2022-02-18 14:55:40.882456"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2544], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.893966"], ["updated_at", "2022-02-18 14:55:40.893966"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2545], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2545], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.895992"], ["updated_at", "2022-02-18 14:55:40.895992"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2545], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2545], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.897793"], ["updated_at", "2022-02-18 14:55:40.897793"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2545], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2545], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.899382"], ["updated_at", "2022-02-18 14:55:40.899382"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2545], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2545], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:55:40.906874"], ["updated_at", "2022-02-18 14:55:40.906874"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 3998)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.914327"], ["updated_at", "2022-02-18 14:55:40.914327"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2546], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2546], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.916345"], ["updated_at", "2022-02-18 14:55:40.916345"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2546], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2546], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.918135"], ["updated_at", "2022-02-18 14:55:40.918135"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2546], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2546], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.919780"], ["updated_at", "2022-02-18 14:55:40.919780"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fdfbcfa0890 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.925980"], ["updated_at", "2022-02-18 14:55:40.925980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2547], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2547], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.927975"], ["updated_at", "2022-02-18 14:55:40.927975"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2547], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2547], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.929738"], ["updated_at", "2022-02-18 14:55:40.929738"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2547], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2547], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.931383"], ["updated_at", "2022-02-18 14:55:40.931383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 383)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.941745"], ["updated_at", "2022-02-18 14:55:40.941745"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2548], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2548], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.943863"], ["updated_at", "2022-02-18 14:55:40.943863"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2548], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2548], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.945617"], ["updated_at", "2022-02-18 14:55:40.945617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2548], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2548], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.947279"], ["updated_at", "2022-02-18 14:55:40.947279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4451", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4451], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2548], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1633)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.959144"], ["updated_at", "2022-02-18 14:55:40.959144"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2549], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2549], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.960953"], ["updated_at", "2022-02-18 14:55:40.960953"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2549], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2549], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.962680"], ["updated_at", "2022-02-18 14:55:40.962680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2549], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2549], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.964292"], ["updated_at", "2022-02-18 14:55:40.964292"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4454", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4454], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2549], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:55:40.972934"], ["id", 4454]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1914)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.977943"], ["updated_at", "2022-02-18 14:55:40.977943"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2550], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2550], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.979999"], ["updated_at", "2022-02-18 14:55:40.979999"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2550], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2550], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.981731"], ["updated_at", "2022-02-18 14:55:40.981731"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2550], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2550], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.983250"], ["updated_at", "2022-02-18 14:55:40.983250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fdfbcfa0890 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:40.988715"], ["updated_at", "2022-02-18 14:55:40.988715"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2551], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2551], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.990743"], ["updated_at", "2022-02-18 14:55:40.990743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2551], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2551], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.992544"], ["updated_at", "2022-02-18 14:55:40.992544"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2551], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2551], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:40.994297"], ["updated_at", "2022-02-18 14:55:40.994297"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:41 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 374)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:41.004803"], ["updated_at", "2022-02-18 14:55:41.004803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2552], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2552], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.006889"], ["updated_at", "2022-02-18 14:55:41.006889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2552], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2552], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.008858"], ["updated_at", "2022-02-18 14:55:41.008858"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2552], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2552], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.010807"], ["updated_at", "2022-02-18 14:55:41.010807"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:41 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:55:41.020770"], ["updated_at", "2022-02-18 14:55:41.020770"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2553], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2553], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.022665"], ["updated_at", "2022-02-18 14:55:41.022665"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2553], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2553], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.024369"], ["updated_at", "2022-02-18 14:55:41.024369"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2553], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2553], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:55:41.026342"], ["updated_at", "2022-02-18 14:55:41.026342"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:55:41 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:55:41 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4466"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4466], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4466]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.8ms | Allocations: 750)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:32.835577"], ["updated_at", "2022-02-18 14:56:32.835577"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2554], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2554], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.849737"], ["updated_at", "2022-02-18 14:56:32.849737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2554], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2554], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.851810"], ["updated_at", "2022-02-18 14:56:32.851810"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2554], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2554], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.853329"], ["updated_at", "2022-02-18 14:56:32.853329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:56:32 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4adaa97320 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3253)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:32.977481"], ["updated_at", "2022-02-18 14:56:32.977481"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2555], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2555], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.979763"], ["updated_at", "2022-02-18 14:56:32.979763"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2555], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2555], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.981812"], ["updated_at", "2022-02-18 14:56:32.981812"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2555], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2555], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:32.983740"], ["updated_at", "2022-02-18 14:56:32.983740"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:56:32 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | Allocations: 4362)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 4)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 169)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 715)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.033571"], ["updated_at", "2022-02-18 14:56:33.033571"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2556], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2556], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.035536"], ["updated_at", "2022-02-18 14:56:33.035536"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2556], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2556], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.037636"], ["updated_at", "2022-02-18 14:56:33.037636"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2556], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2556], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.039258"], ["updated_at", "2022-02-18 14:56:33.039258"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 702)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.049835"], ["updated_at", "2022-02-18 14:56:33.049835"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2557], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2557], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.051861"], ["updated_at", "2022-02-18 14:56:33.051861"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2557], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2557], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.053692"], ["updated_at", "2022-02-18 14:56:33.053692"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2557], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2557], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.055258"], ["updated_at", "2022-02-18 14:56:33.055258"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.066224"], ["updated_at", "2022-02-18 14:56:33.066224"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2558], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2558], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.068384"], ["updated_at", "2022-02-18 14:56:33.068384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2558], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2558], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.070273"], ["updated_at", "2022-02-18 14:56:33.070273"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2558], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2558], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.071799"], ["updated_at", "2022-02-18 14:56:33.071799"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=4481" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4481"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 708)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.082065"], ["updated_at", "2022-02-18 14:56:33.082065"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2559], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2559], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.084066"], ["updated_at", "2022-02-18 14:56:33.084066"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2559], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2559], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.085894"], ["updated_at", "2022-02-18 14:56:33.085894"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2559], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2559], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.087432"], ["updated_at", "2022-02-18 14:56:33.087432"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4adaa97320 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.093162"], ["updated_at", "2022-02-18 14:56:33.093162"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2560], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2560], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.095421"], ["updated_at", "2022-02-18 14:56:33.095421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2560], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2560], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.097241"], ["updated_at", "2022-02-18 14:56:33.097241"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2560], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2560], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.099121"], ["updated_at", "2022-02-18 14:56:33.099121"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 328)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.108725"], ["updated_at", "2022-02-18 14:56:33.108725"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2561], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2561], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.110713"], ["updated_at", "2022-02-18 14:56:33.110713"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2561], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2561], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.112480"], ["updated_at", "2022-02-18 14:56:33.112480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2561], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2561], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.114093"], ["updated_at", "2022-02-18 14:56:33.114093"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=4490" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4490"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4490], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 1003)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.126025"], ["updated_at", "2022-02-18 14:56:33.126025"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2562], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2562], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.127925"], ["updated_at", "2022-02-18 14:56:33.127925"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2562], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2562], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.129553"], ["updated_at", "2022-02-18 14:56:33.129553"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2562], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2562], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.131140"], ["updated_at", "2022-02-18 14:56:33.131140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4adaa97320 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.139186"], ["updated_at", "2022-02-18 14:56:33.139186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2563], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2563], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.140998"], ["updated_at", "2022-02-18 14:56:33.140998"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2563], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2563], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.142635"], ["updated_at", "2022-02-18 14:56:33.142635"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2563], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2563], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.144209"], ["updated_at", "2022-02-18 14:56:33.144209"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.153985"], ["updated_at", "2022-02-18 14:56:33.153985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2564], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2564], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.156397"], ["updated_at", "2022-02-18 14:56:33.156397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2564], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2564], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.158247"], ["updated_at", "2022-02-18 14:56:33.158247"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2564], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2564], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.159754"], ["updated_at", "2022-02-18 14:56:33.159754"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2564], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1361)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.171394"], ["updated_at", "2022-02-18 14:56:33.171394"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2565], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2565], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.173350"], ["updated_at", "2022-02-18 14:56:33.173350"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2565], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2565], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.175042"], ["updated_at", "2022-02-18 14:56:33.175042"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2565], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2565], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.176659"], ["updated_at", "2022-02-18 14:56:33.176659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2565], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2565], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:56:33.184572"], ["updated_at", "2022-02-18 14:56:33.184572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 4008)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.191833"], ["updated_at", "2022-02-18 14:56:33.191833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2566], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2566], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.193668"], ["updated_at", "2022-02-18 14:56:33.193668"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2566], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2566], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.195309"], ["updated_at", "2022-02-18 14:56:33.195309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2566], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2566], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.196886"], ["updated_at", "2022-02-18 14:56:33.196886"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4adaa97320 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.203255"], ["updated_at", "2022-02-18 14:56:33.203255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2567], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2567], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.205087"], ["updated_at", "2022-02-18 14:56:33.205087"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2567], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2567], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.206714"], ["updated_at", "2022-02-18 14:56:33.206714"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2567], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2567], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.208296"], ["updated_at", "2022-02-18 14:56:33.208296"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 398)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.218244"], ["updated_at", "2022-02-18 14:56:33.218244"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2568], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2568], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.220206"], ["updated_at", "2022-02-18 14:56:33.220206"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2568], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2568], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.222209"], ["updated_at", "2022-02-18 14:56:33.222209"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2568], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2568], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.223964"], ["updated_at", "2022-02-18 14:56:33.223964"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4512", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4512], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2568], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.7ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.239807"], ["updated_at", "2022-02-18 14:56:33.239807"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2569], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2569], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.242762"], ["updated_at", "2022-02-18 14:56:33.242762"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2569], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2569], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.245281"], ["updated_at", "2022-02-18 14:56:33.245281"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2569], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2569], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.248110"], ["updated_at", "2022-02-18 14:56:33.248110"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4515", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4515], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2569], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:56:33.259671"], ["id", 4515]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.0ms | Allocations: 1913)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.266360"], ["updated_at", "2022-02-18 14:56:33.266360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2570], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2570], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.268250"], ["updated_at", "2022-02-18 14:56:33.268250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2570], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2570], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.269800"], ["updated_at", "2022-02-18 14:56:33.269800"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2570], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2570], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.271313"], ["updated_at", "2022-02-18 14:56:33.271313"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4adaa97320 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.276395"], ["updated_at", "2022-02-18 14:56:33.276395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2571], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2571], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.278449"], ["updated_at", "2022-02-18 14:56:33.278449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2571], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2571], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.280159"], ["updated_at", "2022-02-18 14:56:33.280159"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2571], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2571], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.282729"], ["updated_at", "2022-02-18 14:56:33.282729"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 332)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.293497"], ["updated_at", "2022-02-18 14:56:33.293497"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2572], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2572], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.295615"], ["updated_at", "2022-02-18 14:56:33.295615"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2572], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2572], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.297745"], ["updated_at", "2022-02-18 14:56:33.297745"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2572], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2572], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.302730"], ["updated_at", "2022-02-18 14:56:33.302730"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:33.316359"], ["updated_at", "2022-02-18 14:56:33.316359"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2573], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2573], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.320035"], ["updated_at", "2022-02-18 14:56:33.320035"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2573], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2573], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.322712"], ["updated_at", "2022-02-18 14:56:33.322712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2573], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2573], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:33.324677"], ["updated_at", "2022-02-18 14:56:33.324677"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:33 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4527"}
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4527], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4527]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 1.0ms | Allocations: 771)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.191031"], ["updated_at", "2022-02-18 14:56:59.191031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2574], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2574], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.204569"], ["updated_at", "2022-02-18 14:56:59.204569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2574], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2574], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.206743"], ["updated_at", "2022-02-18 14:56:59.206743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2574], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2574], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.208257"], ["updated_at", "2022-02-18 14:56:59.208257"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7b071ef4b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3253)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.331915"], ["updated_at", "2022-02-18 14:56:59.331915"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2575], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2575], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.334393"], ["updated_at", "2022-02-18 14:56:59.334393"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2575], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2575], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.336450"], ["updated_at", "2022-02-18 14:56:59.336450"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2575], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2575], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.338285"], ["updated_at", "2022-02-18 14:56:59.338285"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.0ms | Allocations: 7999)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.364380"], ["updated_at", "2022-02-18 14:56:59.364380"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2576], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2576], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.366592"], ["updated_at", "2022-02-18 14:56:59.366592"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2576], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2576], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.368496"], ["updated_at", "2022-02-18 14:56:59.368496"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2576], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2576], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.370445"], ["updated_at", "2022-02-18 14:56:59.370445"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 708)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.382001"], ["updated_at", "2022-02-18 14:56:59.382001"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2577], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2577], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.384400"], ["updated_at", "2022-02-18 14:56:59.384400"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2577], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2577], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.386605"], ["updated_at", "2022-02-18 14:56:59.386605"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2577], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2577], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.389176"], ["updated_at", "2022-02-18 14:56:59.389176"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 675)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.401047"], ["updated_at", "2022-02-18 14:56:59.401047"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2578], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2578], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.403096"], ["updated_at", "2022-02-18 14:56:59.403096"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2578], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2578], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.404854"], ["updated_at", "2022-02-18 14:56:59.404854"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2578], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2578], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.406732"], ["updated_at", "2022-02-18 14:56:59.406732"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=4542" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4542"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.418111"], ["updated_at", "2022-02-18 14:56:59.418111"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2579], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2579], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.420371"], ["updated_at", "2022-02-18 14:56:59.420371"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2579], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2579], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.422090"], ["updated_at", "2022-02-18 14:56:59.422090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2579], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2579], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.423763"], ["updated_at", "2022-02-18 14:56:59.423763"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7b071ef4b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.429912"], ["updated_at", "2022-02-18 14:56:59.429912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2580], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2580], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.431947"], ["updated_at", "2022-02-18 14:56:59.431947"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2580], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2580], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.433655"], ["updated_at", "2022-02-18 14:56:59.433655"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2580], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2580], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.435324"], ["updated_at", "2022-02-18 14:56:59.435324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 364)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.444912"], ["updated_at", "2022-02-18 14:56:59.444912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2581], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2581], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.446736"], ["updated_at", "2022-02-18 14:56:59.446736"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2581], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2581], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.448862"], ["updated_at", "2022-02-18 14:56:59.448862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2581], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2581], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.451008"], ["updated_at", "2022-02-18 14:56:59.451008"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4551" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4551"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4551], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 1002)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.463404"], ["updated_at", "2022-02-18 14:56:59.463404"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2582], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2582], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.465365"], ["updated_at", "2022-02-18 14:56:59.465365"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2582], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2582], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.467010"], ["updated_at", "2022-02-18 14:56:59.467010"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2582], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2582], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.468593"], ["updated_at", "2022-02-18 14:56:59.468593"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7b071ef4b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.477234"], ["updated_at", "2022-02-18 14:56:59.477234"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2583], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2583], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.479493"], ["updated_at", "2022-02-18 14:56:59.479493"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2583], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2583], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.481312"], ["updated_at", "2022-02-18 14:56:59.481312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2583], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2583], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.482928"], ["updated_at", "2022-02-18 14:56:59.482928"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 406)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.491927"], ["updated_at", "2022-02-18 14:56:59.491927"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2584], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2584], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.493926"], ["updated_at", "2022-02-18 14:56:59.493926"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2584], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2584], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.495897"], ["updated_at", "2022-02-18 14:56:59.495897"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2584], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2584], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.497648"], ["updated_at", "2022-02-18 14:56:59.497648"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2584], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1349)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.508684"], ["updated_at", "2022-02-18 14:56:59.508684"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2585], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2585], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.510940"], ["updated_at", "2022-02-18 14:56:59.510940"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2585], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2585], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.512649"], ["updated_at", "2022-02-18 14:56:59.512649"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2585], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2585], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.514228"], ["updated_at", "2022-02-18 14:56:59.514228"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2585], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2585], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 14:56:59.521507"], ["updated_at", "2022-02-18 14:56:59.521507"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4008)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.528910"], ["updated_at", "2022-02-18 14:56:59.528910"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2586], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2586], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.531166"], ["updated_at", "2022-02-18 14:56:59.531166"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2586], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2586], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.532917"], ["updated_at", "2022-02-18 14:56:59.532917"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2586], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2586], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.534520"], ["updated_at", "2022-02-18 14:56:59.534520"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7b071ef4b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.540235"], ["updated_at", "2022-02-18 14:56:59.540235"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2587], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2587], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.542697"], ["updated_at", "2022-02-18 14:56:59.542697"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2587], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2587], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.544853"], ["updated_at", "2022-02-18 14:56:59.544853"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2587], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2587], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.546632"], ["updated_at", "2022-02-18 14:56:59.546632"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 386)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.556361"], ["updated_at", "2022-02-18 14:56:59.556361"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2588], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2588], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.558557"], ["updated_at", "2022-02-18 14:56:59.558557"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2588], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2588], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.560503"], ["updated_at", "2022-02-18 14:56:59.560503"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2588], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2588], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.562130"], ["updated_at", "2022-02-18 14:56:59.562130"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4573", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4573], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2588], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.575860"], ["updated_at", "2022-02-18 14:56:59.575860"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2589], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2589], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.578452"], ["updated_at", "2022-02-18 14:56:59.578452"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2589], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2589], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.580672"], ["updated_at", "2022-02-18 14:56:59.580672"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2589], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2589], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.582555"], ["updated_at", "2022-02-18 14:56:59.582555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4576", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4576], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2589], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 14:56:59.591036"], ["id", 4576]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1932)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.596054"], ["updated_at", "2022-02-18 14:56:59.596054"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2590], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2590], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.598219"], ["updated_at", "2022-02-18 14:56:59.598219"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2590], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2590], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.600031"], ["updated_at", "2022-02-18 14:56:59.600031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2590], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2590], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.601788"], ["updated_at", "2022-02-18 14:56:59.601788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7b071ef4b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.608070"], ["updated_at", "2022-02-18 14:56:59.608070"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2591], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2591], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.610105"], ["updated_at", "2022-02-18 14:56:59.610105"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2591], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2591], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.612204"], ["updated_at", "2022-02-18 14:56:59.612204"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2591], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2591], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.613889"], ["updated_at", "2022-02-18 14:56:59.613889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.623441"], ["updated_at", "2022-02-18 14:56:59.623441"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2592], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2592], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.625443"], ["updated_at", "2022-02-18 14:56:59.625443"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2592], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2592], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.627152"], ["updated_at", "2022-02-18 14:56:59.627152"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2592], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2592], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.628864"], ["updated_at", "2022-02-18 14:56:59.628864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 504)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 14:56:59.639901"], ["updated_at", "2022-02-18 14:56:59.639901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2593], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2593], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.641905"], ["updated_at", "2022-02-18 14:56:59.641905"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2593], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2593], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.644225"], ["updated_at", "2022-02-18 14:56:59.644225"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2593], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2593], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 14:56:59.646157"], ["updated_at", "2022-02-18 14:56:59.646157"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 11:56:59 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4588"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4588], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4588]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 771)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:07.903070"], ["updated_at", "2022-02-18 15:02:07.903070"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2594], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2594], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:07.915880"], ["updated_at", "2022-02-18 15:02:07.915880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2594], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2594], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:07.918155"], ["updated_at", "2022-02-18 15:02:07.918155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2594], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2594], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:07.919712"], ["updated_at", "2022-02-18 15:02:07.919712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:02:07 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f5c54ef8050 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.039385"], ["updated_at", "2022-02-18 15:02:08.039385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2595], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2595], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.041499"], ["updated_at", "2022-02-18 15:02:08.041499"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2595], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2595], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.043430"], ["updated_at", "2022-02-18 15:02:08.043430"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2595], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2595], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.045195"], ["updated_at", "2022-02-18 15:02:08.045195"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.5ms | ActiveRecord: 0.0ms | Allocations: 8014)
Started GET "/invoice/list?headers[ACCEPT]=application%2Fjson" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"headers"=>{"ACCEPT"=>"application/json"}}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 4)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 169)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 712)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.078310"], ["updated_at", "2022-02-18 15:02:08.078310"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2596], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2596], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.080346"], ["updated_at", "2022-02-18 15:02:08.080346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2596], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2596], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.082161"], ["updated_at", "2022-02-18 15:02:08.082161"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2596], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2596], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.083883"], ["updated_at", "2022-02-18 15:02:08.083883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.095327"], ["updated_at", "2022-02-18 15:02:08.095327"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2597], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2597], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.097291"], ["updated_at", "2022-02-18 15:02:08.097291"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2597], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2597], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.099057"], ["updated_at", "2022-02-18 15:02:08.099057"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2597], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2597], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.100603"], ["updated_at", "2022-02-18 15:02:08.100603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.111175"], ["updated_at", "2022-02-18 15:02:08.111175"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2598], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2598], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.113275"], ["updated_at", "2022-02-18 15:02:08.113275"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2598], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2598], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.115186"], ["updated_at", "2022-02-18 15:02:08.115186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2598], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2598], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.116806"], ["updated_at", "2022-02-18 15:02:08.116806"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4603" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4603"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.128075"], ["updated_at", "2022-02-18 15:02:08.128075"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2599], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2599], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.130149"], ["updated_at", "2022-02-18 15:02:08.130149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2599], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2599], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.131967"], ["updated_at", "2022-02-18 15:02:08.131967"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2599], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2599], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.133568"], ["updated_at", "2022-02-18 15:02:08.133568"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f5c54ef8050 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.139707"], ["updated_at", "2022-02-18 15:02:08.139707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2600], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2600], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.141987"], ["updated_at", "2022-02-18 15:02:08.141987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2600], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2600], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.143802"], ["updated_at", "2022-02-18 15:02:08.143802"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2600], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2600], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.145530"], ["updated_at", "2022-02-18 15:02:08.145530"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.154759"], ["updated_at", "2022-02-18 15:02:08.154759"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2601], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2601], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.157406"], ["updated_at", "2022-02-18 15:02:08.157406"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2601], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2601], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.159302"], ["updated_at", "2022-02-18 15:02:08.159302"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2601], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2601], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.160880"], ["updated_at", "2022-02-18 15:02:08.160880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4612" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4612"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4612], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 986)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.172003"], ["updated_at", "2022-02-18 15:02:08.172003"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2602], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2602], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.174189"], ["updated_at", "2022-02-18 15:02:08.174189"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2602], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2602], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.176073"], ["updated_at", "2022-02-18 15:02:08.176073"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2602], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2602], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.177714"], ["updated_at", "2022-02-18 15:02:08.177714"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f5c54ef8050 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.185788"], ["updated_at", "2022-02-18 15:02:08.185788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2603], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2603], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.188119"], ["updated_at", "2022-02-18 15:02:08.188119"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2603], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2603], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.189955"], ["updated_at", "2022-02-18 15:02:08.189955"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2603], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2603], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.191801"], ["updated_at", "2022-02-18 15:02:08.191801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.202452"], ["updated_at", "2022-02-18 15:02:08.202452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2604], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2604], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.204498"], ["updated_at", "2022-02-18 15:02:08.204498"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2604], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2604], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.206426"], ["updated_at", "2022-02-18 15:02:08.206426"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2604], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2604], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.208444"], ["updated_at", "2022-02-18 15:02:08.208444"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2604], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1361)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.220430"], ["updated_at", "2022-02-18 15:02:08.220430"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2605], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2605], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.222565"], ["updated_at", "2022-02-18 15:02:08.222565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2605], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2605], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.224590"], ["updated_at", "2022-02-18 15:02:08.224590"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2605], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2605], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.226476"], ["updated_at", "2022-02-18 15:02:08.226476"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2605], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2605], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:02:08.233680"], ["updated_at", "2022-02-18 15:02:08.233680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.5ms | Allocations: 3988)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.240569"], ["updated_at", "2022-02-18 15:02:08.240569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2606], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2606], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.242768"], ["updated_at", "2022-02-18 15:02:08.242768"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2606], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2606], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.244554"], ["updated_at", "2022-02-18 15:02:08.244554"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2606], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2606], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.246419"], ["updated_at", "2022-02-18 15:02:08.246419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f5c54ef8050 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.252556"], ["updated_at", "2022-02-18 15:02:08.252556"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2607], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2607], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.254579"], ["updated_at", "2022-02-18 15:02:08.254579"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2607], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2607], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.256234"], ["updated_at", "2022-02-18 15:02:08.256234"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2607], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2607], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.257848"], ["updated_at", "2022-02-18 15:02:08.257848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 386)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.267857"], ["updated_at", "2022-02-18 15:02:08.267857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2608], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2608], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.269724"], ["updated_at", "2022-02-18 15:02:08.269724"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2608], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2608], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.271304"], ["updated_at", "2022-02-18 15:02:08.271304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2608], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2608], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.272776"], ["updated_at", "2022-02-18 15:02:08.272776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4634", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4634], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2608], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.285617"], ["updated_at", "2022-02-18 15:02:08.285617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2609], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2609], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.287449"], ["updated_at", "2022-02-18 15:02:08.287449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2609], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2609], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.289112"], ["updated_at", "2022-02-18 15:02:08.289112"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2609], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2609], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.290898"], ["updated_at", "2022-02-18 15:02:08.290898"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4637", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4637], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2609], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:02:08.299822"], ["id", 4637]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1923)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.304568"], ["updated_at", "2022-02-18 15:02:08.304568"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2610], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2610], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.306489"], ["updated_at", "2022-02-18 15:02:08.306489"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2610], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2610], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.309103"], ["updated_at", "2022-02-18 15:02:08.309103"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2610], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2610], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.311273"], ["updated_at", "2022-02-18 15:02:08.311273"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f5c54ef8050 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.317176"], ["updated_at", "2022-02-18 15:02:08.317176"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2611], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2611], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.319131"], ["updated_at", "2022-02-18 15:02:08.319131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2611], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2611], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.320883"], ["updated_at", "2022-02-18 15:02:08.320883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2611], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2611], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.322585"], ["updated_at", "2022-02-18 15:02:08.322585"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 323)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.332729"], ["updated_at", "2022-02-18 15:02:08.332729"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2612], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2612], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.334699"], ["updated_at", "2022-02-18 15:02:08.334699"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2612], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2612], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.336403"], ["updated_at", "2022-02-18 15:02:08.336403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2612], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2612], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.338236"], ["updated_at", "2022-02-18 15:02:08.338236"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 501)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:02:08.349764"], ["updated_at", "2022-02-18 15:02:08.349764"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2613], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2613], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.351807"], ["updated_at", "2022-02-18 15:02:08.351807"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2613], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2613], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.353656"], ["updated_at", "2022-02-18 15:02:08.353656"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2613], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2613], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:02:08.355338"], ["updated_at", "2022-02-18 15:02:08.355338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:02:08 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4649"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4649], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4649]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 1.0ms | Allocations: 759)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.359543"], ["updated_at", "2022-02-18 15:03:03.359543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2614], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2614], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.373326"], ["updated_at", "2022-02-18 15:03:03.373326"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2614], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2614], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.375349"], ["updated_at", "2022-02-18 15:03:03.375349"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2614], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2614], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.377126"], ["updated_at", "2022-02-18 15:03:03.377126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f15de2ff1e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.502655"], ["updated_at", "2022-02-18 15:03:03.502655"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2615], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2615], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.505043"], ["updated_at", "2022-02-18 15:03:03.505043"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2615], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2615], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.507090"], ["updated_at", "2022-02-18 15:03:03.507090"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2615], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2615], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.509137"], ["updated_at", "2022-02-18 15:03:03.509137"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 5.5ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 8008)
Started GET "/invoice/list?headers[ACCEPT]=application%2Fjson" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"headers"=>{"ACCEPT"=>"application/json"}}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 4)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 169)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 721)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.546859"], ["updated_at", "2022-02-18 15:03:03.546859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2616], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2616], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.548861"], ["updated_at", "2022-02-18 15:03:03.548861"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2616], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2616], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.550712"], ["updated_at", "2022-02-18 15:03:03.550712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2616], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2616], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.552573"], ["updated_at", "2022-02-18 15:03:03.552573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.564418"], ["updated_at", "2022-02-18 15:03:03.564418"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2617], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2617], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.566456"], ["updated_at", "2022-02-18 15:03:03.566456"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2617], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2617], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.568286"], ["updated_at", "2022-02-18 15:03:03.568286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2617], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2617], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.570070"], ["updated_at", "2022-02-18 15:03:03.570070"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.580960"], ["updated_at", "2022-02-18 15:03:03.580960"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2618], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2618], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.582962"], ["updated_at", "2022-02-18 15:03:03.582962"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2618], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2618], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.584723"], ["updated_at", "2022-02-18 15:03:03.584723"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2618], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2618], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.586816"], ["updated_at", "2022-02-18 15:03:03.586816"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4664" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4664"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 702)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.600012"], ["updated_at", "2022-02-18 15:03:03.600012"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2619], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2619], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.602199"], ["updated_at", "2022-02-18 15:03:03.602199"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2619], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2619], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.604083"], ["updated_at", "2022-02-18 15:03:03.604083"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2619], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2619], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.605911"], ["updated_at", "2022-02-18 15:03:03.605911"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f15de2ff1e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.612256"], ["updated_at", "2022-02-18 15:03:03.612256"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2620], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2620], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.614406"], ["updated_at", "2022-02-18 15:03:03.614406"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2620], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2620], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.616182"], ["updated_at", "2022-02-18 15:03:03.616182"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2620], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2620], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.618266"], ["updated_at", "2022-02-18 15:03:03.618266"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.629280"], ["updated_at", "2022-02-18 15:03:03.629280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2621], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2621], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.631579"], ["updated_at", "2022-02-18 15:03:03.631579"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2621], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2621], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.633382"], ["updated_at", "2022-02-18 15:03:03.633382"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2621], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2621], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.634999"], ["updated_at", "2022-02-18 15:03:03.634999"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=4673" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4673"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4673], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 1003)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.646428"], ["updated_at", "2022-02-18 15:03:03.646428"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2622], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2622], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.648627"], ["updated_at", "2022-02-18 15:03:03.648627"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2622], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2622], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.650848"], ["updated_at", "2022-02-18 15:03:03.650848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2622], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2622], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.652727"], ["updated_at", "2022-02-18 15:03:03.652727"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f15de2ff1e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.661899"], ["updated_at", "2022-02-18 15:03:03.661899"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2623], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2623], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.664550"], ["updated_at", "2022-02-18 15:03:03.664550"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2623], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2623], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.666476"], ["updated_at", "2022-02-18 15:03:03.666476"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2623], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2623], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.668313"], ["updated_at", "2022-02-18 15:03:03.668313"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 406)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.678212"], ["updated_at", "2022-02-18 15:03:03.678212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2624], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2624], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.680168"], ["updated_at", "2022-02-18 15:03:03.680168"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2624], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2624], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.682421"], ["updated_at", "2022-02-18 15:03:03.682421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2624], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2624], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.684268"], ["updated_at", "2022-02-18 15:03:03.684268"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2624], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1376)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.696968"], ["updated_at", "2022-02-18 15:03:03.696968"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2625], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2625], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.699498"], ["updated_at", "2022-02-18 15:03:03.699498"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2625], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2625], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.701321"], ["updated_at", "2022-02-18 15:03:03.701321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2625], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2625], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.702945"], ["updated_at", "2022-02-18 15:03:03.702945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2625], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2625], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:03:03.710806"], ["updated_at", "2022-02-18 15:03:03.710806"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 4000)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.718309"], ["updated_at", "2022-02-18 15:03:03.718309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2626], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2626], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.720273"], ["updated_at", "2022-02-18 15:03:03.720273"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2626], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2626], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.722079"], ["updated_at", "2022-02-18 15:03:03.722079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2626], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2626], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.723685"], ["updated_at", "2022-02-18 15:03:03.723685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f15de2ff1e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.729951"], ["updated_at", "2022-02-18 15:03:03.729951"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2627], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2627], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.732238"], ["updated_at", "2022-02-18 15:03:03.732238"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2627], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2627], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.733994"], ["updated_at", "2022-02-18 15:03:03.733994"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2627], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2627], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.735641"], ["updated_at", "2022-02-18 15:03:03.735641"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 386)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.746505"], ["updated_at", "2022-02-18 15:03:03.746505"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2628], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2628], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.748660"], ["updated_at", "2022-02-18 15:03:03.748660"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2628], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2628], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.750510"], ["updated_at", "2022-02-18 15:03:03.750510"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2628], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2628], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.752111"], ["updated_at", "2022-02-18 15:03:03.752111"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4695", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4695], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2628], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1639)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.763541"], ["updated_at", "2022-02-18 15:03:03.763541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2629], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2629], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.765335"], ["updated_at", "2022-02-18 15:03:03.765335"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2629], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2629], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.766856"], ["updated_at", "2022-02-18 15:03:03.766856"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2629], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2629], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.768256"], ["updated_at", "2022-02-18 15:03:03.768256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4698", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4698], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2629], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:03:03.776029"], ["id", 4698]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.7ms | Allocations: 1916)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.781805"], ["updated_at", "2022-02-18 15:03:03.781805"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2630], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2630], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.783712"], ["updated_at", "2022-02-18 15:03:03.783712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2630], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2630], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.785442"], ["updated_at", "2022-02-18 15:03:03.785442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2630], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2630], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.787031"], ["updated_at", "2022-02-18 15:03:03.787031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f15de2ff1e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.792570"], ["updated_at", "2022-02-18 15:03:03.792570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2631], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2631], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.794286"], ["updated_at", "2022-02-18 15:03:03.794286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2631], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2631], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.795788"], ["updated_at", "2022-02-18 15:03:03.795788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2631], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2631], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.797224"], ["updated_at", "2022-02-18 15:03:03.797224"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 323)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.806212"], ["updated_at", "2022-02-18 15:03:03.806212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2632], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2632], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.808262"], ["updated_at", "2022-02-18 15:03:03.808262"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2632], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2632], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.810348"], ["updated_at", "2022-02-18 15:03:03.810348"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2632], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2632], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.812956"], ["updated_at", "2022-02-18 15:03:03.812956"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 504)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:03.823037"], ["updated_at", "2022-02-18 15:03:03.823037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2633], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2633], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.825109"], ["updated_at", "2022-02-18 15:03:03.825109"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2633], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2633], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.826827"], ["updated_at", "2022-02-18 15:03:03.826827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2633], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2633], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:03.828499"], ["updated_at", "2022-02-18 15:03:03.828499"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:03 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4710"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4710], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4710]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 762)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.027934"], ["updated_at", "2022-02-18 15:03:25.027934"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2634], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2634], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.041688"], ["updated_at", "2022-02-18 15:03:25.041688"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2634], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2634], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.043788"], ["updated_at", "2022-02-18 15:03:25.043788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2634], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2634], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.045514"], ["updated_at", "2022-02-18 15:03:25.045514"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9c5578b380 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.169803"], ["updated_at", "2022-02-18 15:03:25.169803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2635], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2635], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.172044"], ["updated_at", "2022-02-18 15:03:25.172044"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2635], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2635], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.174424"], ["updated_at", "2022-02-18 15:03:25.174424"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2635], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2635], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.176497"], ["updated_at", "2022-02-18 15:03:25.176497"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.0ms | Allocations: 8026)
Started GET "/invoice/list?headers[ACCEPT]=application%2Fjson" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"headers"=>{"ACCEPT"=>"application/json"}}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 4)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 169)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 706)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.207615"], ["updated_at", "2022-02-18 15:03:25.207615"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2636], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2636], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.210042"], ["updated_at", "2022-02-18 15:03:25.210042"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2636], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2636], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.212604"], ["updated_at", "2022-02-18 15:03:25.212604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2636], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2636], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.214624"], ["updated_at", "2022-02-18 15:03:25.214624"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.226731"], ["updated_at", "2022-02-18 15:03:25.226731"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2637], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2637], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.229067"], ["updated_at", "2022-02-18 15:03:25.229067"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2637], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2637], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.231401"], ["updated_at", "2022-02-18 15:03:25.231401"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2637], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2637], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.233268"], ["updated_at", "2022-02-18 15:03:25.233268"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.244039"], ["updated_at", "2022-02-18 15:03:25.244039"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2638], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2638], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.246228"], ["updated_at", "2022-02-18 15:03:25.246228"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2638], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2638], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.248180"], ["updated_at", "2022-02-18 15:03:25.248180"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2638], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2638], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.249883"], ["updated_at", "2022-02-18 15:03:25.249883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4725" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4725"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 678)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.262268"], ["updated_at", "2022-02-18 15:03:25.262268"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2639], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2639], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.264270"], ["updated_at", "2022-02-18 15:03:25.264270"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2639], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2639], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.266182"], ["updated_at", "2022-02-18 15:03:25.266182"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2639], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2639], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.267827"], ["updated_at", "2022-02-18 15:03:25.267827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9c5578b380 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.273709"], ["updated_at", "2022-02-18 15:03:25.273709"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2640], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2640], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.275730"], ["updated_at", "2022-02-18 15:03:25.275730"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2640], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2640], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.277597"], ["updated_at", "2022-02-18 15:03:25.277597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2640], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2640], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.279226"], ["updated_at", "2022-02-18 15:03:25.279226"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.289700"], ["updated_at", "2022-02-18 15:03:25.289700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2641], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2641], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.291680"], ["updated_at", "2022-02-18 15:03:25.291680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2641], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2641], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.293344"], ["updated_at", "2022-02-18 15:03:25.293344"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2641], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2641], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.295407"], ["updated_at", "2022-02-18 15:03:25.295407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4734" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4734"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4734], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 999)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.306711"], ["updated_at", "2022-02-18 15:03:25.306711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2642], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2642], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.308654"], ["updated_at", "2022-02-18 15:03:25.308654"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2642], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2642], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.310619"], ["updated_at", "2022-02-18 15:03:25.310619"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2642], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2642], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.312330"], ["updated_at", "2022-02-18 15:03:25.312330"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9c5578b380 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.321283"], ["updated_at", "2022-02-18 15:03:25.321283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2643], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2643], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.323095"], ["updated_at", "2022-02-18 15:03:25.323095"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2643], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2643], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.324634"], ["updated_at", "2022-02-18 15:03:25.324634"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2643], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2643], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.326212"], ["updated_at", "2022-02-18 15:03:25.326212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 388)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.335621"], ["updated_at", "2022-02-18 15:03:25.335621"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2644], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2644], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.337589"], ["updated_at", "2022-02-18 15:03:25.337589"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2644], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2644], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.339255"], ["updated_at", "2022-02-18 15:03:25.339255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2644], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2644], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.340901"], ["updated_at", "2022-02-18 15:03:25.340901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2644], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1361)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.353236"], ["updated_at", "2022-02-18 15:03:25.353236"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2645], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2645], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.355139"], ["updated_at", "2022-02-18 15:03:25.355139"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2645], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2645], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.356796"], ["updated_at", "2022-02-18 15:03:25.356796"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2645], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2645], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.358369"], ["updated_at", "2022-02-18 15:03:25.358369"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2645], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2645], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:03:25.366980"], ["updated_at", "2022-02-18 15:03:25.366980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4003)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.374259"], ["updated_at", "2022-02-18 15:03:25.374259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2646], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2646], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.376279"], ["updated_at", "2022-02-18 15:03:25.376279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2646], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2646], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.378038"], ["updated_at", "2022-02-18 15:03:25.378038"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2646], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2646], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.379941"], ["updated_at", "2022-02-18 15:03:25.379941"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9c5578b380 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.386402"], ["updated_at", "2022-02-18 15:03:25.386402"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2647], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2647], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.388545"], ["updated_at", "2022-02-18 15:03:25.388545"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2647], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2647], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.390383"], ["updated_at", "2022-02-18 15:03:25.390383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2647], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2647], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.392001"], ["updated_at", "2022-02-18 15:03:25.392001"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 389)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.403111"], ["updated_at", "2022-02-18 15:03:25.403111"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2648], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2648], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.405407"], ["updated_at", "2022-02-18 15:03:25.405407"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2648], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2648], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.407450"], ["updated_at", "2022-02-18 15:03:25.407450"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2648], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2648], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.409164"], ["updated_at", "2022-02-18 15:03:25.409164"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4756", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4756], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2648], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1642)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.422021"], ["updated_at", "2022-02-18 15:03:25.422021"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2649], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2649], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.423837"], ["updated_at", "2022-02-18 15:03:25.423837"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2649], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2649], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.425461"], ["updated_at", "2022-02-18 15:03:25.425461"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2649], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2649], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.427121"], ["updated_at", "2022-02-18 15:03:25.427121"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4759", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4759], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2649], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:03:25.436613"], ["id", 4759]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1932)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.441707"], ["updated_at", "2022-02-18 15:03:25.441707"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2650], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2650], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.444880"], ["updated_at", "2022-02-18 15:03:25.444880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2650], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2650], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.447153"], ["updated_at", "2022-02-18 15:03:25.447153"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2650], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2650], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.448797"], ["updated_at", "2022-02-18 15:03:25.448797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9c5578b380 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.454393"], ["updated_at", "2022-02-18 15:03:25.454393"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2651], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2651], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.456208"], ["updated_at", "2022-02-18 15:03:25.456208"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2651], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2651], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.458137"], ["updated_at", "2022-02-18 15:03:25.458137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2651], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2651], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.459843"], ["updated_at", "2022-02-18 15:03:25.459843"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 332)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.470118"], ["updated_at", "2022-02-18 15:03:25.470118"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2652], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2652], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.472145"], ["updated_at", "2022-02-18 15:03:25.472145"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2652], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2652], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.474529"], ["updated_at", "2022-02-18 15:03:25.474529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2652], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2652], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.476308"], ["updated_at", "2022-02-18 15:03:25.476308"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 498)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:03:25.486812"], ["updated_at", "2022-02-18 15:03:25.486812"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2653], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2653], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.488711"], ["updated_at", "2022-02-18 15:03:25.488711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2653], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2653], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.490523"], ["updated_at", "2022-02-18 15:03:25.490523"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2653], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2653], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:03:25.492190"], ["updated_at", "2022-02-18 15:03:25.492190"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:03:25 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4771"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4771], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4771]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 750)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.693662"], ["updated_at", "2022-02-18 15:04:56.693662"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2654], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2654], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.707504"], ["updated_at", "2022-02-18 15:04:56.707504"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2654], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2654], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.709563"], ["updated_at", "2022-02-18 15:04:56.709563"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2654], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2654], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.711272"], ["updated_at", "2022-02-18 15:04:56.711272"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f08a40db7a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3252)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.844566"], ["updated_at", "2022-02-18 15:04:56.844566"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2655], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2655], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.846854"], ["updated_at", "2022-02-18 15:04:56.846854"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2655], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2655], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.848785"], ["updated_at", "2022-02-18 15:04:56.848785"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2655], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2655], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.850843"], ["updated_at", "2022-02-18 15:04:56.850843"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms | Allocations: 8022)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.8ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.8ms | Allocations: 1241)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.883365"], ["updated_at", "2022-02-18 15:04:56.883365"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2656], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2656], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.885753"], ["updated_at", "2022-02-18 15:04:56.885753"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2656], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2656], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.887873"], ["updated_at", "2022-02-18 15:04:56.887873"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2656], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2656], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.889831"], ["updated_at", "2022-02-18 15:04:56.889831"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.900784"], ["updated_at", "2022-02-18 15:04:56.900784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2657], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2657], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.902715"], ["updated_at", "2022-02-18 15:04:56.902715"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2657], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2657], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.904576"], ["updated_at", "2022-02-18 15:04:56.904576"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2657], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2657], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.908258"], ["updated_at", "2022-02-18 15:04:56.908258"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.919605"], ["updated_at", "2022-02-18 15:04:56.919605"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2658], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2658], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.921518"], ["updated_at", "2022-02-18 15:04:56.921518"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2658], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2658], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.923226"], ["updated_at", "2022-02-18 15:04:56.923226"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2658], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2658], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.924889"], ["updated_at", "2022-02-18 15:04:56.924889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=4786" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4786"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.937254"], ["updated_at", "2022-02-18 15:04:56.937254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2659], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2659], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.939306"], ["updated_at", "2022-02-18 15:04:56.939306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2659], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2659], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.941246"], ["updated_at", "2022-02-18 15:04:56.941246"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2659], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2659], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.943207"], ["updated_at", "2022-02-18 15:04:56.943207"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f08a40db7a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.952229"], ["updated_at", "2022-02-18 15:04:56.952229"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2660], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2660], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.954779"], ["updated_at", "2022-02-18 15:04:56.954779"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2660], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2660], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.956912"], ["updated_at", "2022-02-18 15:04:56.956912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2660], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2660], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.958801"], ["updated_at", "2022-02-18 15:04:56.958801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.973506"], ["updated_at", "2022-02-18 15:04:56.973506"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2661], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2661], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.975859"], ["updated_at", "2022-02-18 15:04:56.975859"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2661], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2661], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.977933"], ["updated_at", "2022-02-18 15:04:56.977933"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2661], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2661], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:56.981959"], ["updated_at", "2022-02-18 15:04:56.981959"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4795" for 127.0.0.1 at 2022-02-18 12:04:56 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4795"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4795], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 958)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:56.997776"], ["updated_at", "2022-02-18 15:04:56.997776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2662], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2662], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.000720"], ["updated_at", "2022-02-18 15:04:57.000720"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2662], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2662], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.004066"], ["updated_at", "2022-02-18 15:04:57.004066"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2662], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2662], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.006382"], ["updated_at", "2022-02-18 15:04:57.006382"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f08a40db7a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.015871"], ["updated_at", "2022-02-18 15:04:57.015871"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2663], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2663], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.018207"], ["updated_at", "2022-02-18 15:04:57.018207"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2663], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2663], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.020137"], ["updated_at", "2022-02-18 15:04:57.020137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2663], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2663], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.022066"], ["updated_at", "2022-02-18 15:04:57.022066"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 415)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.035311"], ["updated_at", "2022-02-18 15:04:57.035311"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2664], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2664], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.037856"], ["updated_at", "2022-02-18 15:04:57.037856"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2664], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2664], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.039864"], ["updated_at", "2022-02-18 15:04:57.039864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2664], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2664], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.041804"], ["updated_at", "2022-02-18 15:04:57.041804"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2664], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.055409"], ["updated_at", "2022-02-18 15:04:57.055409"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2665], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2665], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.057697"], ["updated_at", "2022-02-18 15:04:57.057697"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2665], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2665], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.059669"], ["updated_at", "2022-02-18 15:04:57.059669"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2665], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2665], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.061338"], ["updated_at", "2022-02-18 15:04:57.061338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2665], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2665], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:04:57.071000"], ["updated_at", "2022-02-18 15:04:57.071000"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 3994)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.078282"], ["updated_at", "2022-02-18 15:04:57.078282"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2666], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2666], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.080383"], ["updated_at", "2022-02-18 15:04:57.080383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2666], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2666], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.082179"], ["updated_at", "2022-02-18 15:04:57.082179"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2666], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2666], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.084108"], ["updated_at", "2022-02-18 15:04:57.084108"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f08a40db7a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.090547"], ["updated_at", "2022-02-18 15:04:57.090547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2667], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2667], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.092513"], ["updated_at", "2022-02-18 15:04:57.092513"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2667], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2667], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.094324"], ["updated_at", "2022-02-18 15:04:57.094324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2667], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2667], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.096225"], ["updated_at", "2022-02-18 15:04:57.096225"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 383)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.108766"], ["updated_at", "2022-02-18 15:04:57.108766"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2668], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2668], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.110839"], ["updated_at", "2022-02-18 15:04:57.110839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2668], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2668], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.112704"], ["updated_at", "2022-02-18 15:04:57.112704"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2668], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2668], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.114708"], ["updated_at", "2022-02-18 15:04:57.114708"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4817", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4817], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2668], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1624)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.127457"], ["updated_at", "2022-02-18 15:04:57.127457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2669], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2669], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.129651"], ["updated_at", "2022-02-18 15:04:57.129651"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2669], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2669], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.132831"], ["updated_at", "2022-02-18 15:04:57.132831"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2669], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2669], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.134871"], ["updated_at", "2022-02-18 15:04:57.134871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4820", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4820], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2669], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:04:57.143552"], ["id", 4820]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1912)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.149487"], ["updated_at", "2022-02-18 15:04:57.149487"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2670], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2670], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.151623"], ["updated_at", "2022-02-18 15:04:57.151623"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2670], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2670], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.153397"], ["updated_at", "2022-02-18 15:04:57.153397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2670], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2670], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.155090"], ["updated_at", "2022-02-18 15:04:57.155090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f08a40db7a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.161254"], ["updated_at", "2022-02-18 15:04:57.161254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2671], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2671], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.163740"], ["updated_at", "2022-02-18 15:04:57.163740"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2671], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2671], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.165769"], ["updated_at", "2022-02-18 15:04:57.165769"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2671], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2671], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.167441"], ["updated_at", "2022-02-18 15:04:57.167441"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 344)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.177378"], ["updated_at", "2022-02-18 15:04:57.177378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2672], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2672], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.179939"], ["updated_at", "2022-02-18 15:04:57.179939"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2672], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2672], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.181945"], ["updated_at", "2022-02-18 15:04:57.181945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2672], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2672], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.183627"], ["updated_at", "2022-02-18 15:04:57.183627"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 501)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:04:57.193746"], ["updated_at", "2022-02-18 15:04:57.193746"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2673], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2673], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.195990"], ["updated_at", "2022-02-18 15:04:57.195990"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2673], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2673], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.197976"], ["updated_at", "2022-02-18 15:04:57.197976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2673], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2673], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:04:57.199701"], ["updated_at", "2022-02-18 15:04:57.199701"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:04:57 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4832"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4832], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4832]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 774)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.008232"], ["updated_at", "2022-02-18 15:05:13.008232"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2674], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2674], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.021847"], ["updated_at", "2022-02-18 15:05:13.021847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2674], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2674], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.024060"], ["updated_at", "2022-02-18 15:05:13.024060"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2674], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2674], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.025677"], ["updated_at", "2022-02-18 15:05:13.025677"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb6b6afdec0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.150632"], ["updated_at", "2022-02-18 15:05:13.150632"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2675], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2675], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.153028"], ["updated_at", "2022-02-18 15:05:13.153028"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2675], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2675], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.155268"], ["updated_at", "2022-02-18 15:05:13.155268"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2675], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2675], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.157439"], ["updated_at", "2022-02-18 15:05:13.157439"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 1.0ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 11.2ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 1225)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.197517"], ["updated_at", "2022-02-18 15:05:13.197517"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2676], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2676], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.199469"], ["updated_at", "2022-02-18 15:05:13.199469"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2676], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2676], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.201470"], ["updated_at", "2022-02-18 15:05:13.201470"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2676], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2676], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.203136"], ["updated_at", "2022-02-18 15:05:13.203136"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.214327"], ["updated_at", "2022-02-18 15:05:13.214327"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2677], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2677], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.216486"], ["updated_at", "2022-02-18 15:05:13.216486"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2677], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2677], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.218461"], ["updated_at", "2022-02-18 15:05:13.218461"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2677], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2677], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.220097"], ["updated_at", "2022-02-18 15:05:13.220097"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 678)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.231183"], ["updated_at", "2022-02-18 15:05:13.231183"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2678], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2678], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.233324"], ["updated_at", "2022-02-18 15:05:13.233324"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2678], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2678], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.235299"], ["updated_at", "2022-02-18 15:05:13.235299"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2678], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2678], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.237422"], ["updated_at", "2022-02-18 15:05:13.237422"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4847" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4847"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.249350"], ["updated_at", "2022-02-18 15:05:13.249350"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2679], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2679], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.251659"], ["updated_at", "2022-02-18 15:05:13.251659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2679], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2679], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.253521"], ["updated_at", "2022-02-18 15:05:13.253521"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2679], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2679], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.255301"], ["updated_at", "2022-02-18 15:05:13.255301"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb6b6afdec0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.261149"], ["updated_at", "2022-02-18 15:05:13.261149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2680], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2680], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.263175"], ["updated_at", "2022-02-18 15:05:13.263175"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2680], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2680], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.265024"], ["updated_at", "2022-02-18 15:05:13.265024"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2680], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2680], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.266721"], ["updated_at", "2022-02-18 15:05:13.266721"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 358)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.276760"], ["updated_at", "2022-02-18 15:05:13.276760"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2681], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2681], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.278739"], ["updated_at", "2022-02-18 15:05:13.278739"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2681], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2681], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.280515"], ["updated_at", "2022-02-18 15:05:13.280515"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2681], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2681], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.282621"], ["updated_at", "2022-02-18 15:05:13.282621"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=4856" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4856"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4856], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 960)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.293654"], ["updated_at", "2022-02-18 15:05:13.293654"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2682], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2682], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.295675"], ["updated_at", "2022-02-18 15:05:13.295675"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2682], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2682], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.297629"], ["updated_at", "2022-02-18 15:05:13.297629"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2682], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2682], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.299822"], ["updated_at", "2022-02-18 15:05:13.299822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb6b6afdec0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.309154"], ["updated_at", "2022-02-18 15:05:13.309154"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2683], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2683], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.311071"], ["updated_at", "2022-02-18 15:05:13.311071"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2683], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2683], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.312840"], ["updated_at", "2022-02-18 15:05:13.312840"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2683], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2683], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.314670"], ["updated_at", "2022-02-18 15:05:13.314670"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 406)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.323995"], ["updated_at", "2022-02-18 15:05:13.323995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2684], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2684], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.325839"], ["updated_at", "2022-02-18 15:05:13.325839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2684], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2684], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.327516"], ["updated_at", "2022-02-18 15:05:13.327516"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2684], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2684], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.329019"], ["updated_at", "2022-02-18 15:05:13.329019"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2684], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.341597"], ["updated_at", "2022-02-18 15:05:13.341597"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2685], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2685], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.343738"], ["updated_at", "2022-02-18 15:05:13.343738"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2685], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2685], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.345690"], ["updated_at", "2022-02-18 15:05:13.345690"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2685], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2685], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.347535"], ["updated_at", "2022-02-18 15:05:13.347535"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2685], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2685], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:05:13.356247"], ["updated_at", "2022-02-18 15:05:13.356247"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 4003)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.364399"], ["updated_at", "2022-02-18 15:05:13.364399"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2686], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2686], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.366762"], ["updated_at", "2022-02-18 15:05:13.366762"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2686], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2686], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.368680"], ["updated_at", "2022-02-18 15:05:13.368680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2686], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2686], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.370396"], ["updated_at", "2022-02-18 15:05:13.370396"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb6b6afdec0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.376240"], ["updated_at", "2022-02-18 15:05:13.376240"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2687], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2687], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.378307"], ["updated_at", "2022-02-18 15:05:13.378307"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2687], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2687], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.380073"], ["updated_at", "2022-02-18 15:05:13.380073"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2687], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2687], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.381743"], ["updated_at", "2022-02-18 15:05:13.381743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 401)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.391403"], ["updated_at", "2022-02-18 15:05:13.391403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2688], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2688], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.393948"], ["updated_at", "2022-02-18 15:05:13.393948"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2688], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2688], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.395995"], ["updated_at", "2022-02-18 15:05:13.395995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2688], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2688], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.397701"], ["updated_at", "2022-02-18 15:05:13.397701"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4878", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4878], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2688], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.409449"], ["updated_at", "2022-02-18 15:05:13.409449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2689], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2689], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.411386"], ["updated_at", "2022-02-18 15:05:13.411386"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2689], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2689], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.412997"], ["updated_at", "2022-02-18 15:05:13.412997"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2689], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2689], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.414573"], ["updated_at", "2022-02-18 15:05:13.414573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4881", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4881], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2689], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:05:13.422251"], ["id", 4881]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1918)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.427414"], ["updated_at", "2022-02-18 15:05:13.427414"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2690], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2690], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.429261"], ["updated_at", "2022-02-18 15:05:13.429261"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2690], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2690], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.430995"], ["updated_at", "2022-02-18 15:05:13.430995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2690], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2690], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.432916"], ["updated_at", "2022-02-18 15:05:13.432916"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb6b6afdec0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.438611"], ["updated_at", "2022-02-18 15:05:13.438611"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2691], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2691], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.440536"], ["updated_at", "2022-02-18 15:05:13.440536"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2691], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2691], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.442298"], ["updated_at", "2022-02-18 15:05:13.442298"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2691], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2691], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.444144"], ["updated_at", "2022-02-18 15:05:13.444144"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.453232"], ["updated_at", "2022-02-18 15:05:13.453232"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2692], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2692], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.455773"], ["updated_at", "2022-02-18 15:05:13.455773"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2692], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2692], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.457693"], ["updated_at", "2022-02-18 15:05:13.457693"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2692], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2692], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.459266"], ["updated_at", "2022-02-18 15:05:13.459266"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 513)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:05:13.469743"], ["updated_at", "2022-02-18 15:05:13.469743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2693], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2693], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.471559"], ["updated_at", "2022-02-18 15:05:13.471559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2693], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2693], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.473291"], ["updated_at", "2022-02-18 15:05:13.473291"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2693], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2693], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:05:13.474872"], ["updated_at", "2022-02-18 15:05:13.474872"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:05:13 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4893"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4893], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4893]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 744)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.110057"], ["updated_at", "2022-02-18 15:06:22.110057"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2694], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2694], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.123784"], ["updated_at", "2022-02-18 15:06:22.123784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2694], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2694], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.126079"], ["updated_at", "2022-02-18 15:06:22.126079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2694], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2694], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.127914"], ["updated_at", "2022-02-18 15:06:22.127914"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f87acddf640 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.258488"], ["updated_at", "2022-02-18 15:06:22.258488"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2695], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2695], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.260491"], ["updated_at", "2022-02-18 15:06:22.260491"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2695], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2695], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.262344"], ["updated_at", "2022-02-18 15:06:22.262344"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2695], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2695], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.264253"], ["updated_at", "2022-02-18 15:06:22.264253"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.0ms | Allocations: 8023)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.6ms | Allocations: 1219)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.304020"], ["updated_at", "2022-02-18 15:06:22.304020"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2696], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2696], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.306084"], ["updated_at", "2022-02-18 15:06:22.306084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2696], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2696], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.308204"], ["updated_at", "2022-02-18 15:06:22.308204"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2696], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2696], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.310234"], ["updated_at", "2022-02-18 15:06:22.310234"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.324587"], ["updated_at", "2022-02-18 15:06:22.324587"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2697], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2697], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.327688"], ["updated_at", "2022-02-18 15:06:22.327688"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2697], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2697], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.330796"], ["updated_at", "2022-02-18 15:06:22.330796"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2697], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2697], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.333379"], ["updated_at", "2022-02-18 15:06:22.333379"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.344216"], ["updated_at", "2022-02-18 15:06:22.344216"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2698], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2698], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.346304"], ["updated_at", "2022-02-18 15:06:22.346304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2698], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2698], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.348295"], ["updated_at", "2022-02-18 15:06:22.348295"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2698], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2698], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.349932"], ["updated_at", "2022-02-18 15:06:22.349932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4908" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4908"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.360758"], ["updated_at", "2022-02-18 15:06:22.360758"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2699], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2699], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.362678"], ["updated_at", "2022-02-18 15:06:22.362678"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2699], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2699], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.364463"], ["updated_at", "2022-02-18 15:06:22.364463"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2699], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2699], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.366220"], ["updated_at", "2022-02-18 15:06:22.366220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f87acddf640 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.372088"], ["updated_at", "2022-02-18 15:06:22.372088"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2700], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2700], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.374020"], ["updated_at", "2022-02-18 15:06:22.374020"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2700], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2700], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.376170"], ["updated_at", "2022-02-18 15:06:22.376170"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2700], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2700], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.378032"], ["updated_at", "2022-02-18 15:06:22.378032"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 349)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.388430"], ["updated_at", "2022-02-18 15:06:22.388430"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2701], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2701], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.390513"], ["updated_at", "2022-02-18 15:06:22.390513"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2701], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2701], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.392335"], ["updated_at", "2022-02-18 15:06:22.392335"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2701], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2701], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.394035"], ["updated_at", "2022-02-18 15:06:22.394035"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4917" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4917"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4917], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.406214"], ["updated_at", "2022-02-18 15:06:22.406214"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2702], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2702], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.408539"], ["updated_at", "2022-02-18 15:06:22.408539"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2702], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2702], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.411028"], ["updated_at", "2022-02-18 15:06:22.411028"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2702], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2702], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.414011"], ["updated_at", "2022-02-18 15:06:22.414011"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f87acddf640 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.423127"], ["updated_at", "2022-02-18 15:06:22.423127"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2703], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2703], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.425091"], ["updated_at", "2022-02-18 15:06:22.425091"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2703], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2703], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.426838"], ["updated_at", "2022-02-18 15:06:22.426838"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2703], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2703], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.428474"], ["updated_at", "2022-02-18 15:06:22.428474"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 409)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.438448"], ["updated_at", "2022-02-18 15:06:22.438448"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2704], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2704], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.440256"], ["updated_at", "2022-02-18 15:06:22.440256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2704], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2704], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.441884"], ["updated_at", "2022-02-18 15:06:22.441884"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2704], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2704], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.443327"], ["updated_at", "2022-02-18 15:06:22.443327"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2704], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1370)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.455372"], ["updated_at", "2022-02-18 15:06:22.455372"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2705], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2705], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.457469"], ["updated_at", "2022-02-18 15:06:22.457469"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2705], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2705], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.459287"], ["updated_at", "2022-02-18 15:06:22.459287"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2705], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2705], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.460829"], ["updated_at", "2022-02-18 15:06:22.460829"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2705], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2705], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:06:22.468618"], ["updated_at", "2022-02-18 15:06:22.468618"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 4000)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.475808"], ["updated_at", "2022-02-18 15:06:22.475808"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2706], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2706], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.477774"], ["updated_at", "2022-02-18 15:06:22.477774"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2706], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2706], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.479412"], ["updated_at", "2022-02-18 15:06:22.479412"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2706], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2706], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.480998"], ["updated_at", "2022-02-18 15:06:22.480998"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f87acddf640 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.486987"], ["updated_at", "2022-02-18 15:06:22.486987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2707], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2707], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.489127"], ["updated_at", "2022-02-18 15:06:22.489127"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2707], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2707], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.490882"], ["updated_at", "2022-02-18 15:06:22.490882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2707], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2707], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.492509"], ["updated_at", "2022-02-18 15:06:22.492509"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 371)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.502671"], ["updated_at", "2022-02-18 15:06:22.502671"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2708], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2708], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.504703"], ["updated_at", "2022-02-18 15:06:22.504703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2708], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2708], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.506480"], ["updated_at", "2022-02-18 15:06:22.506480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2708], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2708], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.508126"], ["updated_at", "2022-02-18 15:06:22.508126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4939", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4939], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2708], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1639)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.519994"], ["updated_at", "2022-02-18 15:06:22.519994"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2709], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2709], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.521897"], ["updated_at", "2022-02-18 15:06:22.521897"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2709], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2709], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.523616"], ["updated_at", "2022-02-18 15:06:22.523616"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2709], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2709], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.525260"], ["updated_at", "2022-02-18 15:06:22.525260"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"4942", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4942], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2709], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:06:22.534076"], ["id", 4942]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.539452"], ["updated_at", "2022-02-18 15:06:22.539452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2710], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2710], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.541350"], ["updated_at", "2022-02-18 15:06:22.541350"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2710], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2710], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.543035"], ["updated_at", "2022-02-18 15:06:22.543035"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2710], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2710], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.544658"], ["updated_at", "2022-02-18 15:06:22.544658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f87acddf640 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.550402"], ["updated_at", "2022-02-18 15:06:22.550402"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2711], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2711], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.552290"], ["updated_at", "2022-02-18 15:06:22.552290"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2711], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2711], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.554158"], ["updated_at", "2022-02-18 15:06:22.554158"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2711], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2711], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.555792"], ["updated_at", "2022-02-18 15:06:22.555792"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.566909"], ["updated_at", "2022-02-18 15:06:22.566909"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2712], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2712], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.569311"], ["updated_at", "2022-02-18 15:06:22.569311"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2712], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2712], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.571385"], ["updated_at", "2022-02-18 15:06:22.571385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2712], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2712], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.573247"], ["updated_at", "2022-02-18 15:06:22.573247"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 510)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:06:22.584001"], ["updated_at", "2022-02-18 15:06:22.584001"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2713], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2713], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.586169"], ["updated_at", "2022-02-18 15:06:22.586169"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2713], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2713], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.587970"], ["updated_at", "2022-02-18 15:06:22.587970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2713], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2713], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:06:22.589630"], ["updated_at", "2022-02-18 15:06:22.589630"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:06:22 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"4954"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4954], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 4954]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 753)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.128639"], ["updated_at", "2022-02-18 15:14:40.128639"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2714], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2714], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.142848"], ["updated_at", "2022-02-18 15:14:40.142848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2714], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2714], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.144646"], ["updated_at", "2022-02-18 15:14:40.144646"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2714], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2714], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.155175"], ["updated_at", "2022-02-18 15:14:40.155175"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007ff6844750b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3238)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.277126"], ["updated_at", "2022-02-18 15:14:40.277126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2715], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2715], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.279183"], ["updated_at", "2022-02-18 15:14:40.279183"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2715], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2715], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.280862"], ["updated_at", "2022-02-18 15:14:40.280862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2715], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2715], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.282467"], ["updated_at", "2022-02-18 15:14:40.282467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 8041)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.5ms | Allocations: 1216)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.307560"], ["updated_at", "2022-02-18 15:14:40.307560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2716], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2716], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.309684"], ["updated_at", "2022-02-18 15:14:40.309684"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2716], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2716], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.311434"], ["updated_at", "2022-02-18 15:14:40.311434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2716], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2716], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.312954"], ["updated_at", "2022-02-18 15:14:40.312954"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.4ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.325179"], ["updated_at", "2022-02-18 15:14:40.325179"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2717], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2717], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.327230"], ["updated_at", "2022-02-18 15:14:40.327230"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2717], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2717], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.329214"], ["updated_at", "2022-02-18 15:14:40.329214"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2717], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2717], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.331081"], ["updated_at", "2022-02-18 15:14:40.331081"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.4ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.344920"], ["updated_at", "2022-02-18 15:14:40.344920"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2718], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2718], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.346833"], ["updated_at", "2022-02-18 15:14:40.346833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2718], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2718], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.348692"], ["updated_at", "2022-02-18 15:14:40.348692"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2718], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2718], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.350453"], ["updated_at", "2022-02-18 15:14:40.350453"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=4969" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"4969"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 702)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.361907"], ["updated_at", "2022-02-18 15:14:40.361907"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2719], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2719], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.365086"], ["updated_at", "2022-02-18 15:14:40.365086"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2719], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2719], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.367525"], ["updated_at", "2022-02-18 15:14:40.367525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2719], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2719], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.369434"], ["updated_at", "2022-02-18 15:14:40.369434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007ff6844750b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.376510"], ["updated_at", "2022-02-18 15:14:40.376510"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2720], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2720], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.378714"], ["updated_at", "2022-02-18 15:14:40.378714"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2720], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2720], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.380500"], ["updated_at", "2022-02-18 15:14:40.380500"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2720], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2720], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.382196"], ["updated_at", "2022-02-18 15:14:40.382196"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.392401"], ["updated_at", "2022-02-18 15:14:40.392401"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2721], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2721], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.394516"], ["updated_at", "2022-02-18 15:14:40.394516"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2721], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2721], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.397039"], ["updated_at", "2022-02-18 15:14:40.397039"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2721], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2721], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.398998"], ["updated_at", "2022-02-18 15:14:40.398998"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=4978" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"4978"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 4978], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 950)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.411952"], ["updated_at", "2022-02-18 15:14:40.411952"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2722], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2722], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.414075"], ["updated_at", "2022-02-18 15:14:40.414075"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2722], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2722], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.416031"], ["updated_at", "2022-02-18 15:14:40.416031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2722], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2722], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.417834"], ["updated_at", "2022-02-18 15:14:40.417834"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007ff6844750b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.427580"], ["updated_at", "2022-02-18 15:14:40.427580"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2723], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2723], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.429793"], ["updated_at", "2022-02-18 15:14:40.429793"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2723], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2723], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.431537"], ["updated_at", "2022-02-18 15:14:40.431537"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2723], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2723], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.433085"], ["updated_at", "2022-02-18 15:14:40.433085"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.444017"], ["updated_at", "2022-02-18 15:14:40.444017"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2724], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2724], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.446245"], ["updated_at", "2022-02-18 15:14:40.446245"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2724], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2724], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.447949"], ["updated_at", "2022-02-18 15:14:40.447949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2724], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2724], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.449571"], ["updated_at", "2022-02-18 15:14:40.449571"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2724], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1361)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.462752"], ["updated_at", "2022-02-18 15:14:40.462752"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2725], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2725], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.464795"], ["updated_at", "2022-02-18 15:14:40.464795"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2725], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2725], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.466564"], ["updated_at", "2022-02-18 15:14:40.466564"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2725], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2725], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.468245"], ["updated_at", "2022-02-18 15:14:40.468245"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2725], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2725], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:14:40.478059"], ["updated_at", "2022-02-18 15:14:40.478059"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 4004)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.485436"], ["updated_at", "2022-02-18 15:14:40.485436"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2726], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2726], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.487457"], ["updated_at", "2022-02-18 15:14:40.487457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2726], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2726], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.489841"], ["updated_at", "2022-02-18 15:14:40.489841"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2726], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2726], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.491726"], ["updated_at", "2022-02-18 15:14:40.491726"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007ff6844750b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.497941"], ["updated_at", "2022-02-18 15:14:40.497941"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2727], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2727], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.499985"], ["updated_at", "2022-02-18 15:14:40.499985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2727], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2727], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.501779"], ["updated_at", "2022-02-18 15:14:40.501779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2727], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2727], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.503598"], ["updated_at", "2022-02-18 15:14:40.503598"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 395)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.514989"], ["updated_at", "2022-02-18 15:14:40.514989"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2728], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2728], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.517326"], ["updated_at", "2022-02-18 15:14:40.517326"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2728], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2728], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.519604"], ["updated_at", "2022-02-18 15:14:40.519604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2728], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2728], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.521871"], ["updated_at", "2022-02-18 15:14:40.521871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5000", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5000], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2728], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1630)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.534288"], ["updated_at", "2022-02-18 15:14:40.534288"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2729], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2729], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.536244"], ["updated_at", "2022-02-18 15:14:40.536244"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2729], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2729], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.538576"], ["updated_at", "2022-02-18 15:14:40.538576"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2729], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2729], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.541337"], ["updated_at", "2022-02-18 15:14:40.541337"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5003", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5003], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2729], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:14:40.549871"], ["id", 5003]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.556320"], ["updated_at", "2022-02-18 15:14:40.556320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2730], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2730], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.558385"], ["updated_at", "2022-02-18 15:14:40.558385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2730], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2730], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.560149"], ["updated_at", "2022-02-18 15:14:40.560149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2730], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2730], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.561820"], ["updated_at", "2022-02-18 15:14:40.561820"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007ff6844750b8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.567774"], ["updated_at", "2022-02-18 15:14:40.567774"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2731], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2731], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.569733"], ["updated_at", "2022-02-18 15:14:40.569733"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2731], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2731], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.571409"], ["updated_at", "2022-02-18 15:14:40.571409"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2731], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2731], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.573073"], ["updated_at", "2022-02-18 15:14:40.573073"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 368)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.583844"], ["updated_at", "2022-02-18 15:14:40.583844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2732], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2732], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.585858"], ["updated_at", "2022-02-18 15:14:40.585858"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2732], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2732], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.587793"], ["updated_at", "2022-02-18 15:14:40.587793"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2732], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2732], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.590698"], ["updated_at", "2022-02-18 15:14:40.590698"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 510)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:14:40.601275"], ["updated_at", "2022-02-18 15:14:40.601275"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2733], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2733], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.603096"], ["updated_at", "2022-02-18 15:14:40.603096"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2733], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2733], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.604870"], ["updated_at", "2022-02-18 15:14:40.604870"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2733], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2733], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:14:40.606579"], ["updated_at", "2022-02-18 15:14:40.606579"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:14:40 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5015"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5015], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5015]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 777)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.125863"], ["updated_at", "2022-02-18 15:15:17.125863"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2734], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2734], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.139653"], ["updated_at", "2022-02-18 15:15:17.139653"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2734], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2734], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.141767"], ["updated_at", "2022-02-18 15:15:17.141767"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2734], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2734], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.143530"], ["updated_at", "2022-02-18 15:15:17.143530"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb95c85ee28 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.268821"], ["updated_at", "2022-02-18 15:15:17.268821"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2735], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2735], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.271281"], ["updated_at", "2022-02-18 15:15:17.271281"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2735], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2735], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.273581"], ["updated_at", "2022-02-18 15:15:17.273581"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2735], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2735], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.275897"], ["updated_at", "2022-02-18 15:15:17.275897"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 2.3ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | Allocations: 4362)
Completed 200 OK in 13ms (Views: 12.3ms | ActiveRecord: 0.0ms | Allocations: 8008)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1210)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.320690"], ["updated_at", "2022-02-18 15:15:17.320690"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2736], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2736], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.323100"], ["updated_at", "2022-02-18 15:15:17.323100"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2736], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2736], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.325431"], ["updated_at", "2022-02-18 15:15:17.325431"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2736], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2736], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.327404"], ["updated_at", "2022-02-18 15:15:17.327404"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.338231"], ["updated_at", "2022-02-18 15:15:17.338231"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2737], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2737], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.340735"], ["updated_at", "2022-02-18 15:15:17.340735"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2737], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2737], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.342618"], ["updated_at", "2022-02-18 15:15:17.342618"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2737], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2737], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.344337"], ["updated_at", "2022-02-18 15:15:17.344337"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 702)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.356220"], ["updated_at", "2022-02-18 15:15:17.356220"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2738], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2738], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.359171"], ["updated_at", "2022-02-18 15:15:17.359171"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2738], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2738], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.361496"], ["updated_at", "2022-02-18 15:15:17.361496"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2738], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2738], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.363346"], ["updated_at", "2022-02-18 15:15:17.363346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=5030" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5030"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.374941"], ["updated_at", "2022-02-18 15:15:17.374941"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2739], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2739], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.377026"], ["updated_at", "2022-02-18 15:15:17.377026"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2739], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2739], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.378968"], ["updated_at", "2022-02-18 15:15:17.378968"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2739], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2739], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.380952"], ["updated_at", "2022-02-18 15:15:17.380952"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb95c85ee28 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.387250"], ["updated_at", "2022-02-18 15:15:17.387250"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2740], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2740], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.389581"], ["updated_at", "2022-02-18 15:15:17.389581"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2740], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2740], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.391365"], ["updated_at", "2022-02-18 15:15:17.391365"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2740], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2740], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.392859"], ["updated_at", "2022-02-18 15:15:17.392859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 340)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.402181"], ["updated_at", "2022-02-18 15:15:17.402181"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2741], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2741], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.404150"], ["updated_at", "2022-02-18 15:15:17.404150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2741], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2741], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.405926"], ["updated_at", "2022-02-18 15:15:17.405926"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2741], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2741], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.407574"], ["updated_at", "2022-02-18 15:15:17.407574"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5039" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5039"}
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5039], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.1ms | Allocations: 921)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.419104"], ["updated_at", "2022-02-18 15:15:17.419104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2742], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2742], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.421449"], ["updated_at", "2022-02-18 15:15:17.421449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2742], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2742], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.423547"], ["updated_at", "2022-02-18 15:15:17.423547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2742], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2742], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.425351"], ["updated_at", "2022-02-18 15:15:17.425351"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb95c85ee28 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.433755"], ["updated_at", "2022-02-18 15:15:17.433755"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2743], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2743], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.435789"], ["updated_at", "2022-02-18 15:15:17.435789"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2743], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2743], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.437680"], ["updated_at", "2022-02-18 15:15:17.437680"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2743], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2743], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.439419"], ["updated_at", "2022-02-18 15:15:17.439419"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 376)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.450163"], ["updated_at", "2022-02-18 15:15:17.450163"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2744], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2744], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.452166"], ["updated_at", "2022-02-18 15:15:17.452166"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2744], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2744], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.453927"], ["updated_at", "2022-02-18 15:15:17.453927"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2744], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2744], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.455609"], ["updated_at", "2022-02-18 15:15:17.455609"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2744], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.467429"], ["updated_at", "2022-02-18 15:15:17.467429"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2745], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2745], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.469472"], ["updated_at", "2022-02-18 15:15:17.469472"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2745], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2745], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.471338"], ["updated_at", "2022-02-18 15:15:17.471338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2745], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2745], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.472992"], ["updated_at", "2022-02-18 15:15:17.472992"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2745], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2745], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:15:17.481397"], ["updated_at", "2022-02-18 15:15:17.481397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 3997)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.488440"], ["updated_at", "2022-02-18 15:15:17.488440"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2746], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2746], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.490562"], ["updated_at", "2022-02-18 15:15:17.490562"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2746], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2746], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.492383"], ["updated_at", "2022-02-18 15:15:17.492383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2746], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2746], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.494066"], ["updated_at", "2022-02-18 15:15:17.494066"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb95c85ee28 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.500082"], ["updated_at", "2022-02-18 15:15:17.500082"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2747], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2747], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.502006"], ["updated_at", "2022-02-18 15:15:17.502006"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2747], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2747], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.503878"], ["updated_at", "2022-02-18 15:15:17.503878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2747], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2747], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.505511"], ["updated_at", "2022-02-18 15:15:17.505511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 380)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.516390"], ["updated_at", "2022-02-18 15:15:17.516390"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2748], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2748], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.518628"], ["updated_at", "2022-02-18 15:15:17.518628"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2748], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2748], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.520512"], ["updated_at", "2022-02-18 15:15:17.520512"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2748], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2748], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.522424"], ["updated_at", "2022-02-18 15:15:17.522424"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5061", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5061], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2748], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1609)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.535030"], ["updated_at", "2022-02-18 15:15:17.535030"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2749], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2749], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.537133"], ["updated_at", "2022-02-18 15:15:17.537133"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2749], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2749], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.538864"], ["updated_at", "2022-02-18 15:15:17.538864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2749], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2749], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.540510"], ["updated_at", "2022-02-18 15:15:17.540510"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5064", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5064], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2749], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:15:17.549370"], ["id", 5064]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.554301"], ["updated_at", "2022-02-18 15:15:17.554301"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2750], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2750], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.556511"], ["updated_at", "2022-02-18 15:15:17.556511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2750], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2750], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.558495"], ["updated_at", "2022-02-18 15:15:17.558495"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2750], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2750], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.560195"], ["updated_at", "2022-02-18 15:15:17.560195"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb95c85ee28 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.565912"], ["updated_at", "2022-02-18 15:15:17.565912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2751], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2751], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.567856"], ["updated_at", "2022-02-18 15:15:17.567856"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2751], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2751], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.569640"], ["updated_at", "2022-02-18 15:15:17.569640"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2751], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2751], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.571274"], ["updated_at", "2022-02-18 15:15:17.571274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.581529"], ["updated_at", "2022-02-18 15:15:17.581529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2752], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2752], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.583557"], ["updated_at", "2022-02-18 15:15:17.583557"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2752], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2752], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.585358"], ["updated_at", "2022-02-18 15:15:17.585358"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2752], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2752], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.587048"], ["updated_at", "2022-02-18 15:15:17.587048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:15:17.597462"], ["updated_at", "2022-02-18 15:15:17.597462"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2753], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2753], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.599506"], ["updated_at", "2022-02-18 15:15:17.599506"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2753], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2753], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.601452"], ["updated_at", "2022-02-18 15:15:17.601452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2753], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2753], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:15:17.603207"], ["updated_at", "2022-02-18 15:15:17.603207"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:15:17 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5076"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5076], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5076]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 765)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:29.850827"], ["updated_at", "2022-02-18 15:17:29.850827"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2754], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2754], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:29.864761"], ["updated_at", "2022-02-18 15:17:29.864761"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2754], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2754], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:29.867005"], ["updated_at", "2022-02-18 15:17:29.867005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2754], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2754], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:29.868717"], ["updated_at", "2022-02-18 15:17:29.868717"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:17:29 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7482b071a8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:29.994035"], ["updated_at", "2022-02-18 15:17:29.994035"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2755], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2755], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:29.996352"], ["updated_at", "2022-02-18 15:17:29.996352"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2755], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2755], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:29.998453"], ["updated_at", "2022-02-18 15:17:29.998453"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2755], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2755], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.000504"], ["updated_at", "2022-02-18 15:17:30.000504"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 11.1ms | ActiveRecord: 0.0ms | Allocations: 8026)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1234)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.030547"], ["updated_at", "2022-02-18 15:17:30.030547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2756], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2756], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.032533"], ["updated_at", "2022-02-18 15:17:30.032533"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2756], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2756], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.034620"], ["updated_at", "2022-02-18 15:17:30.034620"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2756], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2756], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.036467"], ["updated_at", "2022-02-18 15:17:30.036467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.047320"], ["updated_at", "2022-02-18 15:17:30.047320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2757], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2757], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.049559"], ["updated_at", "2022-02-18 15:17:30.049559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2757], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2757], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.051403"], ["updated_at", "2022-02-18 15:17:30.051403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2757], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2757], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.052976"], ["updated_at", "2022-02-18 15:17:30.052976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.063005"], ["updated_at", "2022-02-18 15:17:30.063005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2758], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2758], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.064806"], ["updated_at", "2022-02-18 15:17:30.064806"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2758], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2758], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.066410"], ["updated_at", "2022-02-18 15:17:30.066410"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2758], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2758], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.068009"], ["updated_at", "2022-02-18 15:17:30.068009"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=5091" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5091"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.078378"], ["updated_at", "2022-02-18 15:17:30.078378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2759], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2759], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.080776"], ["updated_at", "2022-02-18 15:17:30.080776"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2759], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2759], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.082696"], ["updated_at", "2022-02-18 15:17:30.082696"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2759], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2759], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.084391"], ["updated_at", "2022-02-18 15:17:30.084391"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7482b071a8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.090340"], ["updated_at", "2022-02-18 15:17:30.090340"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2760], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2760], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.092559"], ["updated_at", "2022-02-18 15:17:30.092559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2760], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2760], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.094953"], ["updated_at", "2022-02-18 15:17:30.094953"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2760], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2760], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.096865"], ["updated_at", "2022-02-18 15:17:30.096865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 355)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.107368"], ["updated_at", "2022-02-18 15:17:30.107368"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2761], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2761], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.109660"], ["updated_at", "2022-02-18 15:17:30.109660"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2761], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2761], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.111996"], ["updated_at", "2022-02-18 15:17:30.111996"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2761], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2761], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.113895"], ["updated_at", "2022-02-18 15:17:30.113895"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5100" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5100"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5100], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 937)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.125403"], ["updated_at", "2022-02-18 15:17:30.125403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2762], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2762], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.127681"], ["updated_at", "2022-02-18 15:17:30.127681"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2762], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2762], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.129634"], ["updated_at", "2022-02-18 15:17:30.129634"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2762], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2762], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.131332"], ["updated_at", "2022-02-18 15:17:30.131332"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7482b071a8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.139340"], ["updated_at", "2022-02-18 15:17:30.139340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2763], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2763], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.141440"], ["updated_at", "2022-02-18 15:17:30.141440"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2763], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2763], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.143595"], ["updated_at", "2022-02-18 15:17:30.143595"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2763], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2763], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.145322"], ["updated_at", "2022-02-18 15:17:30.145322"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.154839"], ["updated_at", "2022-02-18 15:17:30.154839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2764], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2764], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.157036"], ["updated_at", "2022-02-18 15:17:30.157036"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2764], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2764], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.159036"], ["updated_at", "2022-02-18 15:17:30.159036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2764], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2764], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.161091"], ["updated_at", "2022-02-18 15:17:30.161091"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2764], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1349)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.172519"], ["updated_at", "2022-02-18 15:17:30.172519"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2765], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2765], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.174797"], ["updated_at", "2022-02-18 15:17:30.174797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2765], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2765], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.176752"], ["updated_at", "2022-02-18 15:17:30.176752"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2765], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2765], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.178617"], ["updated_at", "2022-02-18 15:17:30.178617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2765], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2765], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:17:30.186079"], ["updated_at", "2022-02-18 15:17:30.186079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 3997)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.193196"], ["updated_at", "2022-02-18 15:17:30.193196"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2766], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2766], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.195287"], ["updated_at", "2022-02-18 15:17:30.195287"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2766], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2766], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.197089"], ["updated_at", "2022-02-18 15:17:30.197089"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2766], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2766], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.198720"], ["updated_at", "2022-02-18 15:17:30.198720"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7482b071a8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.204989"], ["updated_at", "2022-02-18 15:17:30.204989"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2767], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2767], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.207092"], ["updated_at", "2022-02-18 15:17:30.207092"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2767], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2767], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.208871"], ["updated_at", "2022-02-18 15:17:30.208871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2767], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2767], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.210701"], ["updated_at", "2022-02-18 15:17:30.210701"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 389)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.219906"], ["updated_at", "2022-02-18 15:17:30.219906"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2768], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2768], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.221989"], ["updated_at", "2022-02-18 15:17:30.221989"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2768], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2768], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.223900"], ["updated_at", "2022-02-18 15:17:30.223900"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2768], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2768], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.225541"], ["updated_at", "2022-02-18 15:17:30.225541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5122", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5122], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2768], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1603)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.237958"], ["updated_at", "2022-02-18 15:17:30.237958"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2769], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2769], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.239959"], ["updated_at", "2022-02-18 15:17:30.239959"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2769], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2769], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.241910"], ["updated_at", "2022-02-18 15:17:30.241910"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2769], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2769], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.244145"], ["updated_at", "2022-02-18 15:17:30.244145"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5125", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5125], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2769], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:17:30.253157"], ["id", 5125]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 1.0ms | Allocations: 1915)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.258182"], ["updated_at", "2022-02-18 15:17:30.258182"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2770], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2770], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.260236"], ["updated_at", "2022-02-18 15:17:30.260236"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2770], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2770], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.261978"], ["updated_at", "2022-02-18 15:17:30.261978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2770], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2770], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.263607"], ["updated_at", "2022-02-18 15:17:30.263607"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f7482b071a8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.270202"], ["updated_at", "2022-02-18 15:17:30.270202"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2771], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2771], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.272323"], ["updated_at", "2022-02-18 15:17:30.272323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2771], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2771], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.274197"], ["updated_at", "2022-02-18 15:17:30.274197"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2771], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2771], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.276010"], ["updated_at", "2022-02-18 15:17:30.276010"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.285640"], ["updated_at", "2022-02-18 15:17:30.285640"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2772], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2772], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.287596"], ["updated_at", "2022-02-18 15:17:30.287596"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2772], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2772], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.289442"], ["updated_at", "2022-02-18 15:17:30.289442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2772], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2772], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.291167"], ["updated_at", "2022-02-18 15:17:30.291167"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 528)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:17:30.302388"], ["updated_at", "2022-02-18 15:17:30.302388"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2773], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2773], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.304515"], ["updated_at", "2022-02-18 15:17:30.304515"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2773], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2773], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.306265"], ["updated_at", "2022-02-18 15:17:30.306265"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2773], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2773], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:17:30.307801"], ["updated_at", "2022-02-18 15:17:30.307801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:17:30 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5137"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5137], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5137]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 783)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.178816"], ["updated_at", "2022-02-18 15:19:48.178816"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2774], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2774], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.198435"], ["updated_at", "2022-02-18 15:19:48.198435"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2774], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2774], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.202287"], ["updated_at", "2022-02-18 15:19:48.202287"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2774], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2774], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.205187"], ["updated_at", "2022-02-18 15:19:48.205187"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f45dcfdb168 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 8ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.360356"], ["updated_at", "2022-02-18 15:19:48.360356"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2775], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2775], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.363269"], ["updated_at", "2022-02-18 15:19:48.363269"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2775], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2775], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.366218"], ["updated_at", "2022-02-18 15:19:48.366218"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2775], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2775], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.370270"], ["updated_at", "2022-02-18 15:19:48.370270"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | Allocations: 4362)
Completed 200 OK in 13ms (Views: 11.5ms | ActiveRecord: 0.0ms | Allocations: 8023)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.7ms | Allocations: 1222)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.413544"], ["updated_at", "2022-02-18 15:19:48.413544"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2776], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2776], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.417249"], ["updated_at", "2022-02-18 15:19:48.417249"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2776], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2776], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.420093"], ["updated_at", "2022-02-18 15:19:48.420093"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2776], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2776], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.423893"], ["updated_at", "2022-02-18 15:19:48.423893"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.437896"], ["updated_at", "2022-02-18 15:19:48.437896"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2777], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2777], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.440283"], ["updated_at", "2022-02-18 15:19:48.440283"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2777], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2777], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.442437"], ["updated_at", "2022-02-18 15:19:48.442437"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2777], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2777], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.444169"], ["updated_at", "2022-02-18 15:19:48.444169"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 678)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.459613"], ["updated_at", "2022-02-18 15:19:48.459613"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2778], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2778], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.462104"], ["updated_at", "2022-02-18 15:19:48.462104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2778], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2778], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.464839"], ["updated_at", "2022-02-18 15:19:48.464839"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2778], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2778], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.467534"], ["updated_at", "2022-02-18 15:19:48.467534"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5152" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5152"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.480077"], ["updated_at", "2022-02-18 15:19:48.480077"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2779], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2779], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.482701"], ["updated_at", "2022-02-18 15:19:48.482701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2779], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2779], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.485845"], ["updated_at", "2022-02-18 15:19:48.485845"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2779], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2779], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.488560"], ["updated_at", "2022-02-18 15:19:48.488560"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f45dcfdb168 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.496588"], ["updated_at", "2022-02-18 15:19:48.496588"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2780], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2780], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.499547"], ["updated_at", "2022-02-18 15:19:48.499547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2780], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2780], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.501758"], ["updated_at", "2022-02-18 15:19:48.501758"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2780], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2780], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.503734"], ["updated_at", "2022-02-18 15:19:48.503734"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.514812"], ["updated_at", "2022-02-18 15:19:48.514812"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2781], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2781], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.517189"], ["updated_at", "2022-02-18 15:19:48.517189"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2781], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2781], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.519058"], ["updated_at", "2022-02-18 15:19:48.519058"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2781], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2781], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.520667"], ["updated_at", "2022-02-18 15:19:48.520667"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5161" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5161"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5161], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 939)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.533441"], ["updated_at", "2022-02-18 15:19:48.533441"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2782], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2782], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.536567"], ["updated_at", "2022-02-18 15:19:48.536567"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2782], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2782], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.540423"], ["updated_at", "2022-02-18 15:19:48.540423"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2782], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2782], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.543274"], ["updated_at", "2022-02-18 15:19:48.543274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f45dcfdb168 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.553437"], ["updated_at", "2022-02-18 15:19:48.553437"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2783], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2783], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.555686"], ["updated_at", "2022-02-18 15:19:48.555686"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2783], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2783], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.557729"], ["updated_at", "2022-02-18 15:19:48.557729"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2783], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2783], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.559570"], ["updated_at", "2022-02-18 15:19:48.559570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 391)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.573156"], ["updated_at", "2022-02-18 15:19:48.573156"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2784], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2784], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.576820"], ["updated_at", "2022-02-18 15:19:48.576820"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2784], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2784], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.579370"], ["updated_at", "2022-02-18 15:19:48.579370"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2784], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2784], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.581789"], ["updated_at", "2022-02-18 15:19:48.581789"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2784], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1358)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.595983"], ["updated_at", "2022-02-18 15:19:48.595983"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2785], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2785], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.598768"], ["updated_at", "2022-02-18 15:19:48.598768"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2785], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2785], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.601816"], ["updated_at", "2022-02-18 15:19:48.601816"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2785], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2785], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.603871"], ["updated_at", "2022-02-18 15:19:48.603871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2785], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2785], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:19:48.612188"], ["updated_at", "2022-02-18 15:19:48.612188"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 6ms (ActiveRecord: 0.6ms | Allocations: 3991)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.622371"], ["updated_at", "2022-02-18 15:19:48.622371"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2786], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2786], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.626181"], ["updated_at", "2022-02-18 15:19:48.626181"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2786], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2786], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.628309"], ["updated_at", "2022-02-18 15:19:48.628309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2786], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2786], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.630154"], ["updated_at", "2022-02-18 15:19:48.630154"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f45dcfdb168 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.638076"], ["updated_at", "2022-02-18 15:19:48.638076"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2787], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2787], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.640560"], ["updated_at", "2022-02-18 15:19:48.640560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2787], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2787], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.642874"], ["updated_at", "2022-02-18 15:19:48.642874"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2787], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2787], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.645184"], ["updated_at", "2022-02-18 15:19:48.645184"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 365)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.659889"], ["updated_at", "2022-02-18 15:19:48.659889"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2788], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2788], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.662495"], ["updated_at", "2022-02-18 15:19:48.662495"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2788], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2788], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.665041"], ["updated_at", "2022-02-18 15:19:48.665041"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2788], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2788], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.667462"], ["updated_at", "2022-02-18 15:19:48.667462"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5183", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5183], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2788], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.9ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.684557"], ["updated_at", "2022-02-18 15:19:48.684557"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2789], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2789], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.687563"], ["updated_at", "2022-02-18 15:19:48.687563"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2789], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2789], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.692016"], ["updated_at", "2022-02-18 15:19:48.692016"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2789], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2789], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.696265"], ["updated_at", "2022-02-18 15:19:48.696265"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 3ms (ActiveRecord: 0.4ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5186", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5186], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2789], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.5ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:19:48.715634"], ["id", 5186]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 8ms (ActiveRecord: 1.7ms | Allocations: 1915)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.729511"], ["updated_at", "2022-02-18 15:19:48.729511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2790], ["LIMIT", 1]]
  [1m[36mInvoice Create (3.0ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2790], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.734019"], ["updated_at", "2022-02-18 15:19:48.734019"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2790], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2790], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.743518"], ["updated_at", "2022-02-18 15:19:48.743518"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2790], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2790], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.748826"], ["updated_at", "2022-02-18 15:19:48.748826"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f45dcfdb168 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.759699"], ["updated_at", "2022-02-18 15:19:48.759699"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2791], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2791], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.763162"], ["updated_at", "2022-02-18 15:19:48.763162"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2791], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2791], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.765921"], ["updated_at", "2022-02-18 15:19:48.765921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2791], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2791], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.768961"], ["updated_at", "2022-02-18 15:19:48.768961"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 350)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.787372"], ["updated_at", "2022-02-18 15:19:48.787372"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2792], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2792], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.791399"], ["updated_at", "2022-02-18 15:19:48.791399"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2792], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2792], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.794618"], ["updated_at", "2022-02-18 15:19:48.794618"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2792], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2792], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.797877"], ["updated_at", "2022-02-18 15:19:48.797877"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:19:48.812668"], ["updated_at", "2022-02-18 15:19:48.812668"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2793], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2793], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.817773"], ["updated_at", "2022-02-18 15:19:48.817773"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2793], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2793], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.823056"], ["updated_at", "2022-02-18 15:19:48.823056"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2793], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2793], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:19:48.828038"], ["updated_at", "2022-02-18 15:19:48.828038"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:19:48 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5198"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5198], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5198]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 765)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (1.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.063980"], ["updated_at", "2022-02-18 15:20:29.063980"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2794], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2794], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.091500"], ["updated_at", "2022-02-18 15:20:29.091500"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2794], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2794], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.094386"], ["updated_at", "2022-02-18 15:20:29.094386"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2794], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2794], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.097510"], ["updated_at", "2022-02-18 15:20:29.097510"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3d2fbee3d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 8ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.253922"], ["updated_at", "2022-02-18 15:20:29.253922"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2795], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2795], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.256450"], ["updated_at", "2022-02-18 15:20:29.256450"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2795], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2795], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.258699"], ["updated_at", "2022-02-18 15:20:29.258699"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2795], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2795], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.260884"], ["updated_at", "2022-02-18 15:20:29.260884"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 3ms (ActiveRecord: 0.4ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms | Allocations: 8010)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.7ms | Allocations: 1210)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.304851"], ["updated_at", "2022-02-18 15:20:29.304851"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2796], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2796], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.307491"], ["updated_at", "2022-02-18 15:20:29.307491"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2796], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2796], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.310386"], ["updated_at", "2022-02-18 15:20:29.310386"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2796], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2796], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.313330"], ["updated_at", "2022-02-18 15:20:29.313330"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.330010"], ["updated_at", "2022-02-18 15:20:29.330010"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2797], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2797], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.332406"], ["updated_at", "2022-02-18 15:20:29.332406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2797], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2797], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.334695"], ["updated_at", "2022-02-18 15:20:29.334695"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2797], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2797], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.337021"], ["updated_at", "2022-02-18 15:20:29.337021"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.351664"], ["updated_at", "2022-02-18 15:20:29.351664"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2798], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2798], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.354376"], ["updated_at", "2022-02-18 15:20:29.354376"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2798], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2798], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.357912"], ["updated_at", "2022-02-18 15:20:29.357912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2798], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2798], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.359936"], ["updated_at", "2022-02-18 15:20:29.359936"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=5213" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5213"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.372622"], ["updated_at", "2022-02-18 15:20:29.372622"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2799], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2799], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.375170"], ["updated_at", "2022-02-18 15:20:29.375170"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2799], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2799], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.377518"], ["updated_at", "2022-02-18 15:20:29.377518"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2799], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2799], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.380323"], ["updated_at", "2022-02-18 15:20:29.380323"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3d2fbee3d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.387386"], ["updated_at", "2022-02-18 15:20:29.387386"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2800], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2800], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.389612"], ["updated_at", "2022-02-18 15:20:29.389612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2800], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2800], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.391569"], ["updated_at", "2022-02-18 15:20:29.391569"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2800], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2800], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.393492"], ["updated_at", "2022-02-18 15:20:29.393492"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 349)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.409246"], ["updated_at", "2022-02-18 15:20:29.409246"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2801], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2801], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.412054"], ["updated_at", "2022-02-18 15:20:29.412054"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2801], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2801], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.414874"], ["updated_at", "2022-02-18 15:20:29.414874"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2801], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2801], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.416857"], ["updated_at", "2022-02-18 15:20:29.416857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5222" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5222"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5222], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 933)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.431051"], ["updated_at", "2022-02-18 15:20:29.431051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2802], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2802], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.434946"], ["updated_at", "2022-02-18 15:20:29.434946"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2802], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2802], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.437883"], ["updated_at", "2022-02-18 15:20:29.437883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2802], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2802], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.441401"], ["updated_at", "2022-02-18 15:20:29.441401"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3d2fbee3d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.452452"], ["updated_at", "2022-02-18 15:20:29.452452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2803], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2803], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.454894"], ["updated_at", "2022-02-18 15:20:29.454894"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2803], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2803], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.457101"], ["updated_at", "2022-02-18 15:20:29.457101"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2803], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2803], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.459095"], ["updated_at", "2022-02-18 15:20:29.459095"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 409)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.473938"], ["updated_at", "2022-02-18 15:20:29.473938"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2804], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2804], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.476408"], ["updated_at", "2022-02-18 15:20:29.476408"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2804], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2804], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.478951"], ["updated_at", "2022-02-18 15:20:29.478951"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2804], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2804], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.481839"], ["updated_at", "2022-02-18 15:20:29.481839"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2804], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.4ms | Allocations: 1376)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.497085"], ["updated_at", "2022-02-18 15:20:29.497085"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2805], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2805], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.499697"], ["updated_at", "2022-02-18 15:20:29.499697"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2805], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2805], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.501840"], ["updated_at", "2022-02-18 15:20:29.501840"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2805], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2805], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.503848"], ["updated_at", "2022-02-18 15:20:29.503848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2805], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2805], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:20:29.514188"], ["updated_at", "2022-02-18 15:20:29.514188"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 7ms (ActiveRecord: 1.2ms | Allocations: 3982)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.524701"], ["updated_at", "2022-02-18 15:20:29.524701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2806], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2806], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.527309"], ["updated_at", "2022-02-18 15:20:29.527309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2806], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2806], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.530128"], ["updated_at", "2022-02-18 15:20:29.530128"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2806], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2806], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.532254"], ["updated_at", "2022-02-18 15:20:29.532254"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3d2fbee3d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.538824"], ["updated_at", "2022-02-18 15:20:29.538824"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2807], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2807], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.540962"], ["updated_at", "2022-02-18 15:20:29.540962"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2807], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2807], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.543319"], ["updated_at", "2022-02-18 15:20:29.543319"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2807], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2807], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.545369"], ["updated_at", "2022-02-18 15:20:29.545369"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 377)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.559958"], ["updated_at", "2022-02-18 15:20:29.559958"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2808], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2808], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.562278"], ["updated_at", "2022-02-18 15:20:29.562278"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2808], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2808], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.564819"], ["updated_at", "2022-02-18 15:20:29.564819"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2808], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2808], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.566670"], ["updated_at", "2022-02-18 15:20:29.566670"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5244", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5244], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2808], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.8ms | Allocations: 1633)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.581385"], ["updated_at", "2022-02-18 15:20:29.581385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2809], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2809], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.583614"], ["updated_at", "2022-02-18 15:20:29.583614"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2809], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2809], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.585380"], ["updated_at", "2022-02-18 15:20:29.585380"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2809], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2809], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.587154"], ["updated_at", "2022-02-18 15:20:29.587154"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5247", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5247], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2809], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:20:29.597527"], ["id", 5247]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.1ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.603592"], ["updated_at", "2022-02-18 15:20:29.603592"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2810], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2810], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.606987"], ["updated_at", "2022-02-18 15:20:29.606987"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2810], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2810], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.609417"], ["updated_at", "2022-02-18 15:20:29.609417"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2810], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2810], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.612952"], ["updated_at", "2022-02-18 15:20:29.612952"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3d2fbee3d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.623452"], ["updated_at", "2022-02-18 15:20:29.623452"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2811], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2811], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.627803"], ["updated_at", "2022-02-18 15:20:29.627803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2811], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2811], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.630677"], ["updated_at", "2022-02-18 15:20:29.630677"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2811], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2811], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.633722"], ["updated_at", "2022-02-18 15:20:29.633722"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.647486"], ["updated_at", "2022-02-18 15:20:29.647486"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2812], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2812], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.650001"], ["updated_at", "2022-02-18 15:20:29.650001"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2812], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2812], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.652127"], ["updated_at", "2022-02-18 15:20:29.652127"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2812], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2812], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.654080"], ["updated_at", "2022-02-18 15:20:29.654080"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 516)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:20:29.667293"], ["updated_at", "2022-02-18 15:20:29.667293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2813], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2813], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.669919"], ["updated_at", "2022-02-18 15:20:29.669919"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2813], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2813], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.673436"], ["updated_at", "2022-02-18 15:20:29.673436"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2813], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2813], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:20:29.675921"], ["updated_at", "2022-02-18 15:20:29.675921"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:20:29 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5259"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5259], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5259]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.8ms | Allocations: 774)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.391984"], ["updated_at", "2022-02-18 15:22:15.391984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2814], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2814], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.406078"], ["updated_at", "2022-02-18 15:22:15.406078"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2814], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2814], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.408138"], ["updated_at", "2022-02-18 15:22:15.408138"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2814], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2814], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.409886"], ["updated_at", "2022-02-18 15:22:15.409886"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3af06d5880 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.0ms | Allocations: 3253)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.538008"], ["updated_at", "2022-02-18 15:22:15.538008"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2815], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2815], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.540315"], ["updated_at", "2022-02-18 15:22:15.540315"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2815], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2815], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.542736"], ["updated_at", "2022-02-18 15:22:15.542736"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2815], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2815], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.544698"], ["updated_at", "2022-02-18 15:22:15.544698"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 11.2ms | ActiveRecord: 0.0ms | Allocations: 8011)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1219)
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.583584"], ["updated_at", "2022-02-18 15:22:15.583584"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2816], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2816], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.586005"], ["updated_at", "2022-02-18 15:22:15.586005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2816], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2816], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.587910"], ["updated_at", "2022-02-18 15:22:15.587910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2816], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2816], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.589728"], ["updated_at", "2022-02-18 15:22:15.589728"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.601233"], ["updated_at", "2022-02-18 15:22:15.601233"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2817], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2817], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.603917"], ["updated_at", "2022-02-18 15:22:15.603917"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2817], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2817], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.606160"], ["updated_at", "2022-02-18 15:22:15.606160"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2817], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2817], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.608053"], ["updated_at", "2022-02-18 15:22:15.608053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.619702"], ["updated_at", "2022-02-18 15:22:15.619702"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2818], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2818], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.621766"], ["updated_at", "2022-02-18 15:22:15.621766"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2818], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2818], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.624009"], ["updated_at", "2022-02-18 15:22:15.624009"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2818], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2818], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.625835"], ["updated_at", "2022-02-18 15:22:15.625835"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5274" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5274"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.637510"], ["updated_at", "2022-02-18 15:22:15.637510"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2819], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2819], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.639987"], ["updated_at", "2022-02-18 15:22:15.639987"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2819], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2819], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.642061"], ["updated_at", "2022-02-18 15:22:15.642061"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2819], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2819], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.643655"], ["updated_at", "2022-02-18 15:22:15.643655"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3af06d5880 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.649810"], ["updated_at", "2022-02-18 15:22:15.649810"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2820], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2820], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.651913"], ["updated_at", "2022-02-18 15:22:15.651913"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2820], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2820], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.653876"], ["updated_at", "2022-02-18 15:22:15.653876"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2820], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2820], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.656086"], ["updated_at", "2022-02-18 15:22:15.656086"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 370)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.665516"], ["updated_at", "2022-02-18 15:22:15.665516"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2821], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2821], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.667521"], ["updated_at", "2022-02-18 15:22:15.667521"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2821], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2821], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.669718"], ["updated_at", "2022-02-18 15:22:15.669718"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2821], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2821], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.671961"], ["updated_at", "2022-02-18 15:22:15.671961"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5283" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5283"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5283], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 960)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.683395"], ["updated_at", "2022-02-18 15:22:15.683395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2822], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2822], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.685433"], ["updated_at", "2022-02-18 15:22:15.685433"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2822], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2822], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.687658"], ["updated_at", "2022-02-18 15:22:15.687658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2822], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2822], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.689363"], ["updated_at", "2022-02-18 15:22:15.689363"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3af06d5880 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.698104"], ["updated_at", "2022-02-18 15:22:15.698104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2823], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2823], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.700015"], ["updated_at", "2022-02-18 15:22:15.700015"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2823], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2823], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.701787"], ["updated_at", "2022-02-18 15:22:15.701787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2823], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2823], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.703695"], ["updated_at", "2022-02-18 15:22:15.703695"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 397)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.713735"], ["updated_at", "2022-02-18 15:22:15.713735"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2824], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2824], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.715659"], ["updated_at", "2022-02-18 15:22:15.715659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2824], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2824], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.717735"], ["updated_at", "2022-02-18 15:22:15.717735"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2824], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2824], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.720092"], ["updated_at", "2022-02-18 15:22:15.720092"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2824], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1367)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.731631"], ["updated_at", "2022-02-18 15:22:15.731631"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2825], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2825], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.733639"], ["updated_at", "2022-02-18 15:22:15.733639"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2825], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2825], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.735403"], ["updated_at", "2022-02-18 15:22:15.735403"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2825], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2825], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.737110"], ["updated_at", "2022-02-18 15:22:15.737110"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2825], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2825], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:22:15.744804"], ["updated_at", "2022-02-18 15:22:15.744804"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 3993)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.752279"], ["updated_at", "2022-02-18 15:22:15.752279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2826], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2826], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.754611"], ["updated_at", "2022-02-18 15:22:15.754611"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2826], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2826], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.756400"], ["updated_at", "2022-02-18 15:22:15.756400"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2826], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2826], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.758027"], ["updated_at", "2022-02-18 15:22:15.758027"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3af06d5880 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.763563"], ["updated_at", "2022-02-18 15:22:15.763563"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2827], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2827], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.765589"], ["updated_at", "2022-02-18 15:22:15.765589"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2827], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2827], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.767385"], ["updated_at", "2022-02-18 15:22:15.767385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2827], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2827], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.769108"], ["updated_at", "2022-02-18 15:22:15.769108"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 392)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.779026"], ["updated_at", "2022-02-18 15:22:15.779026"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2828], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2828], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.781300"], ["updated_at", "2022-02-18 15:22:15.781300"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2828], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2828], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.783155"], ["updated_at", "2022-02-18 15:22:15.783155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2828], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2828], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.784825"], ["updated_at", "2022-02-18 15:22:15.784825"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5305", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5305], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2828], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.797069"], ["updated_at", "2022-02-18 15:22:15.797069"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2829], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2829], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.799110"], ["updated_at", "2022-02-18 15:22:15.799110"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2829], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2829], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.800935"], ["updated_at", "2022-02-18 15:22:15.800935"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2829], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2829], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.802623"], ["updated_at", "2022-02-18 15:22:15.802623"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5308", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5308], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2829], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:22:15.811395"], ["id", 5308]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 1.1ms | Allocations: 1912)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.816316"], ["updated_at", "2022-02-18 15:22:15.816316"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2830], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2830], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.818464"], ["updated_at", "2022-02-18 15:22:15.818464"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2830], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2830], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.820527"], ["updated_at", "2022-02-18 15:22:15.820527"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2830], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2830], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.822378"], ["updated_at", "2022-02-18 15:22:15.822378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f3af06d5880 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.828107"], ["updated_at", "2022-02-18 15:22:15.828107"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2831], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2831], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.830165"], ["updated_at", "2022-02-18 15:22:15.830165"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2831], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2831], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.832047"], ["updated_at", "2022-02-18 15:22:15.832047"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2831], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2831], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.833745"], ["updated_at", "2022-02-18 15:22:15.833745"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 344)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.844434"], ["updated_at", "2022-02-18 15:22:15.844434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2832], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2832], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.846550"], ["updated_at", "2022-02-18 15:22:15.846550"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2832], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2832], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.848304"], ["updated_at", "2022-02-18 15:22:15.848304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2832], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2832], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.849999"], ["updated_at", "2022-02-18 15:22:15.849999"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 519)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:15.860525"], ["updated_at", "2022-02-18 15:22:15.860525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2833], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2833], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.862526"], ["updated_at", "2022-02-18 15:22:15.862526"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2833], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2833], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.864203"], ["updated_at", "2022-02-18 15:22:15.864203"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2833], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2833], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:15.865901"], ["updated_at", "2022-02-18 15:22:15.865901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:15 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5320"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5320], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.3ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5320]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 1.0ms | Allocations: 771)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.669696"], ["updated_at", "2022-02-18 15:22:43.669696"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2834], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2834], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.683432"], ["updated_at", "2022-02-18 15:22:43.683432"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2834], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2834], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.685716"], ["updated_at", "2022-02-18 15:22:43.685716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2834], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2834], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.687387"], ["updated_at", "2022-02-18 15:22:43.687387"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb052efddc8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 7ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.808785"], ["updated_at", "2022-02-18 15:22:43.808785"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2835], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2835], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.811200"], ["updated_at", "2022-02-18 15:22:43.811200"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2835], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2835], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.813324"], ["updated_at", "2022-02-18 15:22:43.813324"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2835], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2835], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.815290"], ["updated_at", "2022-02-18 15:22:43.815290"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms | Allocations: 8020)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1225)
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.846298"], ["updated_at", "2022-02-18 15:22:43.846298"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2836], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2836], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.848340"], ["updated_at", "2022-02-18 15:22:43.848340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2836], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2836], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.850325"], ["updated_at", "2022-02-18 15:22:43.850325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2836], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2836], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.852103"], ["updated_at", "2022-02-18 15:22:43.852103"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.863283"], ["updated_at", "2022-02-18 15:22:43.863283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2837], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2837], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.865462"], ["updated_at", "2022-02-18 15:22:43.865462"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2837], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2837], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.867279"], ["updated_at", "2022-02-18 15:22:43.867279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2837], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2837], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.868924"], ["updated_at", "2022-02-18 15:22:43.868924"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 672)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.879730"], ["updated_at", "2022-02-18 15:22:43.879730"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2838], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2838], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.881978"], ["updated_at", "2022-02-18 15:22:43.881978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2838], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2838], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.883750"], ["updated_at", "2022-02-18 15:22:43.883750"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2838], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2838], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.885540"], ["updated_at", "2022-02-18 15:22:43.885540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5335" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5335"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.897529"], ["updated_at", "2022-02-18 15:22:43.897529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2839], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2839], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.899559"], ["updated_at", "2022-02-18 15:22:43.899559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2839], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2839], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.901458"], ["updated_at", "2022-02-18 15:22:43.901458"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2839], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2839], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.903074"], ["updated_at", "2022-02-18 15:22:43.903074"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb052efddc8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.909060"], ["updated_at", "2022-02-18 15:22:43.909060"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2840], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2840], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.911155"], ["updated_at", "2022-02-18 15:22:43.911155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2840], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2840], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.912905"], ["updated_at", "2022-02-18 15:22:43.912905"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2840], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2840], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.914545"], ["updated_at", "2022-02-18 15:22:43.914545"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 349)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.924832"], ["updated_at", "2022-02-18 15:22:43.924832"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2841], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2841], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.926977"], ["updated_at", "2022-02-18 15:22:43.926977"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2841], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2841], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.929002"], ["updated_at", "2022-02-18 15:22:43.929002"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2841], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2841], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.931086"], ["updated_at", "2022-02-18 15:22:43.931086"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5344" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5344"}
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5344], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.1ms | Allocations: 959)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.942256"], ["updated_at", "2022-02-18 15:22:43.942256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2842], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2842], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.944315"], ["updated_at", "2022-02-18 15:22:43.944315"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2842], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2842], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.946305"], ["updated_at", "2022-02-18 15:22:43.946305"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2842], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2842], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.947988"], ["updated_at", "2022-02-18 15:22:43.947988"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb052efddc8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.956827"], ["updated_at", "2022-02-18 15:22:43.956827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2843], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2843], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.958767"], ["updated_at", "2022-02-18 15:22:43.958767"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2843], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2843], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.960407"], ["updated_at", "2022-02-18 15:22:43.960407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2843], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2843], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.962034"], ["updated_at", "2022-02-18 15:22:43.962034"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 400)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.971619"], ["updated_at", "2022-02-18 15:22:43.971619"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2844], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2844], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.973531"], ["updated_at", "2022-02-18 15:22:43.973531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2844], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2844], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.975307"], ["updated_at", "2022-02-18 15:22:43.975307"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2844], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2844], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.976853"], ["updated_at", "2022-02-18 15:22:43.976853"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2844], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1358)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:43.987759"], ["updated_at", "2022-02-18 15:22:43.987759"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2845], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2845], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.989475"], ["updated_at", "2022-02-18 15:22:43.989475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2845], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2845], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.990903"], ["updated_at", "2022-02-18 15:22:43.990903"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2845], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2845], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:43.992254"], ["updated_at", "2022-02-18 15:22:43.992254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:43 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2845], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2845], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:22:43.999501"], ["updated_at", "2022-02-18 15:22:43.999501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.5ms | Allocations: 4000)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.005488"], ["updated_at", "2022-02-18 15:22:44.005488"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2846], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2846], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.007117"], ["updated_at", "2022-02-18 15:22:44.007117"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2846], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2846], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.008664"], ["updated_at", "2022-02-18 15:22:44.008664"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2846], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2846], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.011276"], ["updated_at", "2022-02-18 15:22:44.011276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb052efddc8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.019630"], ["updated_at", "2022-02-18 15:22:44.019630"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2847], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2847], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.022221"], ["updated_at", "2022-02-18 15:22:44.022221"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2847], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2847], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.023963"], ["updated_at", "2022-02-18 15:22:44.023963"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2847], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2847], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.025425"], ["updated_at", "2022-02-18 15:22:44.025425"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 371)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.035263"], ["updated_at", "2022-02-18 15:22:44.035263"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2848], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2848], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.037175"], ["updated_at", "2022-02-18 15:22:44.037175"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2848], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2848], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.039040"], ["updated_at", "2022-02-18 15:22:44.039040"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2848], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2848], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.040661"], ["updated_at", "2022-02-18 15:22:44.040661"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5366", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5366], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2848], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1621)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.053118"], ["updated_at", "2022-02-18 15:22:44.053118"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2849], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2849], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.054942"], ["updated_at", "2022-02-18 15:22:44.054942"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2849], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2849], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.056549"], ["updated_at", "2022-02-18 15:22:44.056549"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2849], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2849], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.058110"], ["updated_at", "2022-02-18 15:22:44.058110"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5369", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5369], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2849], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:22:44.066798"], ["id", 5369]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1939)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.071949"], ["updated_at", "2022-02-18 15:22:44.071949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2850], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2850], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.073924"], ["updated_at", "2022-02-18 15:22:44.073924"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2850], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2850], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.075848"], ["updated_at", "2022-02-18 15:22:44.075848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2850], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2850], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.077578"], ["updated_at", "2022-02-18 15:22:44.077578"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fb052efddc8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.084416"], ["updated_at", "2022-02-18 15:22:44.084416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2851], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2851], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.086647"], ["updated_at", "2022-02-18 15:22:44.086647"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2851], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2851], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.088489"], ["updated_at", "2022-02-18 15:22:44.088489"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2851], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2851], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.090179"], ["updated_at", "2022-02-18 15:22:44.090179"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 323)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.100446"], ["updated_at", "2022-02-18 15:22:44.100446"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2852], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2852], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.102334"], ["updated_at", "2022-02-18 15:22:44.102334"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2852], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2852], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.103984"], ["updated_at", "2022-02-18 15:22:44.103984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2852], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2852], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.105578"], ["updated_at", "2022-02-18 15:22:44.105578"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 522)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:44.116411"], ["updated_at", "2022-02-18 15:22:44.116411"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2853], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2853], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.118280"], ["updated_at", "2022-02-18 15:22:44.118280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2853], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2853], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.119969"], ["updated_at", "2022-02-18 15:22:44.119969"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2853], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2853], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:44.121472"], ["updated_at", "2022-02-18 15:22:44.121472"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:44 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5381"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5381], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5381]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 753)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.290094"], ["updated_at", "2022-02-18 15:22:58.290094"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2854], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2854], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.304916"], ["updated_at", "2022-02-18 15:22:58.304916"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2854], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2854], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.307201"], ["updated_at", "2022-02-18 15:22:58.307201"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2854], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2854], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.309005"], ["updated_at", "2022-02-18 15:22:58.309005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f144df176e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3253)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.436191"], ["updated_at", "2022-02-18 15:22:58.436191"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2855], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2855], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.438572"], ["updated_at", "2022-02-18 15:22:58.438572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2855], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2855], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.440513"], ["updated_at", "2022-02-18 15:22:58.440513"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2855], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2855], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.442565"], ["updated_at", "2022-02-18 15:22:58.442565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 4362)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1234)
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.473491"], ["updated_at", "2022-02-18 15:22:58.473491"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2856], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2856], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.475665"], ["updated_at", "2022-02-18 15:22:58.475665"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2856], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2856], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.477703"], ["updated_at", "2022-02-18 15:22:58.477703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2856], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2856], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.479449"], ["updated_at", "2022-02-18 15:22:58.479449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.490926"], ["updated_at", "2022-02-18 15:22:58.490926"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2857], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2857], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.493151"], ["updated_at", "2022-02-18 15:22:58.493151"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2857], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2857], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.494983"], ["updated_at", "2022-02-18 15:22:58.494983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2857], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2857], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.496620"], ["updated_at", "2022-02-18 15:22:58.496620"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.507666"], ["updated_at", "2022-02-18 15:22:58.507666"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2858], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2858], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.509560"], ["updated_at", "2022-02-18 15:22:58.509560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2858], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2858], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.511388"], ["updated_at", "2022-02-18 15:22:58.511388"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2858], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2858], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.513085"], ["updated_at", "2022-02-18 15:22:58.513085"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5396" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5396"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.525010"], ["updated_at", "2022-02-18 15:22:58.525010"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2859], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2859], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.526885"], ["updated_at", "2022-02-18 15:22:58.526885"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2859], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2859], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.528685"], ["updated_at", "2022-02-18 15:22:58.528685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2859], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2859], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.530305"], ["updated_at", "2022-02-18 15:22:58.530305"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f144df176e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.536437"], ["updated_at", "2022-02-18 15:22:58.536437"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2860], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2860], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.538323"], ["updated_at", "2022-02-18 15:22:58.538323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2860], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2860], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.539984"], ["updated_at", "2022-02-18 15:22:58.539984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2860], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2860], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.541684"], ["updated_at", "2022-02-18 15:22:58.541684"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.551262"], ["updated_at", "2022-02-18 15:22:58.551262"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2861], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2861], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.553420"], ["updated_at", "2022-02-18 15:22:58.553420"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2861], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2861], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.555453"], ["updated_at", "2022-02-18 15:22:58.555453"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2861], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2861], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.557198"], ["updated_at", "2022-02-18 15:22:58.557198"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5405" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5405"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5405], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 944)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.569190"], ["updated_at", "2022-02-18 15:22:58.569190"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2862], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2862], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.571102"], ["updated_at", "2022-02-18 15:22:58.571102"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2862], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2862], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.572757"], ["updated_at", "2022-02-18 15:22:58.572757"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2862], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2862], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.574360"], ["updated_at", "2022-02-18 15:22:58.574360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f144df176e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.582732"], ["updated_at", "2022-02-18 15:22:58.582732"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2863], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2863], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.584970"], ["updated_at", "2022-02-18 15:22:58.584970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2863], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2863], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.586990"], ["updated_at", "2022-02-18 15:22:58.586990"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2863], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2863], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.588656"], ["updated_at", "2022-02-18 15:22:58.588656"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 388)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.598282"], ["updated_at", "2022-02-18 15:22:58.598282"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2864], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2864], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.600362"], ["updated_at", "2022-02-18 15:22:58.600362"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2864], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2864], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.602363"], ["updated_at", "2022-02-18 15:22:58.602363"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2864], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2864], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.604091"], ["updated_at", "2022-02-18 15:22:58.604091"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2864], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1373)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.615508"], ["updated_at", "2022-02-18 15:22:58.615508"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2865], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2865], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.618347"], ["updated_at", "2022-02-18 15:22:58.618347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2865], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2865], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.620357"], ["updated_at", "2022-02-18 15:22:58.620357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2865], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2865], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.622016"], ["updated_at", "2022-02-18 15:22:58.622016"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2865], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2865], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:22:58.629567"], ["updated_at", "2022-02-18 15:22:58.629567"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.5ms | Allocations: 4005)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.637052"], ["updated_at", "2022-02-18 15:22:58.637052"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2866], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2866], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.638945"], ["updated_at", "2022-02-18 15:22:58.638945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2866], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2866], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.640622"], ["updated_at", "2022-02-18 15:22:58.640622"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2866], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2866], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.642236"], ["updated_at", "2022-02-18 15:22:58.642236"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f144df176e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.648468"], ["updated_at", "2022-02-18 15:22:58.648468"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2867], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2867], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.650901"], ["updated_at", "2022-02-18 15:22:58.650901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2867], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2867], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.653053"], ["updated_at", "2022-02-18 15:22:58.653053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2867], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2867], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.654820"], ["updated_at", "2022-02-18 15:22:58.654820"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 371)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.664435"], ["updated_at", "2022-02-18 15:22:58.664435"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2868], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2868], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.666487"], ["updated_at", "2022-02-18 15:22:58.666487"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2868], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2868], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.668452"], ["updated_at", "2022-02-18 15:22:58.668452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2868], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2868], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.670142"], ["updated_at", "2022-02-18 15:22:58.670142"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5427", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5427], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2868], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1621)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.683109"], ["updated_at", "2022-02-18 15:22:58.683109"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2869], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2869], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.685531"], ["updated_at", "2022-02-18 15:22:58.685531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2869], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2869], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.687237"], ["updated_at", "2022-02-18 15:22:58.687237"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2869], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2869], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.688799"], ["updated_at", "2022-02-18 15:22:58.688799"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5430", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5430], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2869], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:22:58.696572"], ["id", 5430]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.7ms | Allocations: 1912)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.701404"], ["updated_at", "2022-02-18 15:22:58.701404"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2870], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2870], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.703194"], ["updated_at", "2022-02-18 15:22:58.703194"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2870], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2870], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.704781"], ["updated_at", "2022-02-18 15:22:58.704781"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2870], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2870], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.706336"], ["updated_at", "2022-02-18 15:22:58.706336"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f144df176e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.712497"], ["updated_at", "2022-02-18 15:22:58.712497"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2871], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2871], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.714329"], ["updated_at", "2022-02-18 15:22:58.714329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2871], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2871], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.715957"], ["updated_at", "2022-02-18 15:22:58.715957"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2871], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2871], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.717791"], ["updated_at", "2022-02-18 15:22:58.717791"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.726828"], ["updated_at", "2022-02-18 15:22:58.726828"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2872], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2872], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.728661"], ["updated_at", "2022-02-18 15:22:58.728661"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2872], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2872], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.730318"], ["updated_at", "2022-02-18 15:22:58.730318"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2872], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2872], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.731932"], ["updated_at", "2022-02-18 15:22:58.731932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 510)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:22:58.742416"], ["updated_at", "2022-02-18 15:22:58.742416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2873], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2873], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.744293"], ["updated_at", "2022-02-18 15:22:58.744293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2873], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2873], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.745937"], ["updated_at", "2022-02-18 15:22:58.745937"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2873], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2873], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:22:58.747550"], ["updated_at", "2022-02-18 15:22:58.747550"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:22:58 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5442"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5442], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5442]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 747)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.216605"], ["updated_at", "2022-02-18 15:24:15.216605"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2874], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2874], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.229363"], ["updated_at", "2022-02-18 15:24:15.229363"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2874], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2874], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.231339"], ["updated_at", "2022-02-18 15:24:15.231339"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2874], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2874], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.232861"], ["updated_at", "2022-02-18 15:24:15.232861"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f96b9ce1920 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.0ms | Allocations: 3237)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.267814"], ["updated_at", "2022-02-18 15:24:15.267814"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2875], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2875], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.269789"], ["updated_at", "2022-02-18 15:24:15.269789"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2875], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2875], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.271525"], ["updated_at", "2022-02-18 15:24:15.271525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2875], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2875], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.273053"], ["updated_at", "2022-02-18 15:24:15.273053"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms | Allocations: 7993)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 1219)
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.303451"], ["updated_at", "2022-02-18 15:24:15.303451"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2876], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2876], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.305364"], ["updated_at", "2022-02-18 15:24:15.305364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2876], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2876], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.307072"], ["updated_at", "2022-02-18 15:24:15.307072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2876], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2876], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.308700"], ["updated_at", "2022-02-18 15:24:15.308700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.335802"], ["updated_at", "2022-02-18 15:24:15.335802"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2877], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2877], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.337995"], ["updated_at", "2022-02-18 15:24:15.337995"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2877], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2877], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.340067"], ["updated_at", "2022-02-18 15:24:15.340067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2877], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2877], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.341976"], ["updated_at", "2022-02-18 15:24:15.341976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.353454"], ["updated_at", "2022-02-18 15:24:15.353454"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2878], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2878], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.355887"], ["updated_at", "2022-02-18 15:24:15.355887"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2878], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2878], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.357851"], ["updated_at", "2022-02-18 15:24:15.357851"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2878], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2878], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.359922"], ["updated_at", "2022-02-18 15:24:15.359922"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=5457" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5457"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.371081"], ["updated_at", "2022-02-18 15:24:15.371081"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2879], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2879], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.373090"], ["updated_at", "2022-02-18 15:24:15.373090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2879], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2879], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.374884"], ["updated_at", "2022-02-18 15:24:15.374884"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2879], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2879], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.376460"], ["updated_at", "2022-02-18 15:24:15.376460"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f96b9ce1920 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.382767"], ["updated_at", "2022-02-18 15:24:15.382767"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2880], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2880], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.384987"], ["updated_at", "2022-02-18 15:24:15.384987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2880], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2880], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.387700"], ["updated_at", "2022-02-18 15:24:15.387700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2880], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2880], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.389778"], ["updated_at", "2022-02-18 15:24:15.389778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.400470"], ["updated_at", "2022-02-18 15:24:15.400470"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2881], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2881], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.402346"], ["updated_at", "2022-02-18 15:24:15.402346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2881], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2881], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.404148"], ["updated_at", "2022-02-18 15:24:15.404148"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2881], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2881], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.405779"], ["updated_at", "2022-02-18 15:24:15.405779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5466" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5466"}
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5466], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.1ms | Allocations: 948)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.416483"], ["updated_at", "2022-02-18 15:24:15.416483"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2882], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2882], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.418814"], ["updated_at", "2022-02-18 15:24:15.418814"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2882], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2882], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.420676"], ["updated_at", "2022-02-18 15:24:15.420676"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2882], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2882], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.422269"], ["updated_at", "2022-02-18 15:24:15.422269"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f96b9ce1920 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.430457"], ["updated_at", "2022-02-18 15:24:15.430457"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2883], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2883], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.432280"], ["updated_at", "2022-02-18 15:24:15.432280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2883], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2883], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.434005"], ["updated_at", "2022-02-18 15:24:15.434005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2883], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2883], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.435651"], ["updated_at", "2022-02-18 15:24:15.435651"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 388)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.445237"], ["updated_at", "2022-02-18 15:24:15.445237"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2884], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2884], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.447384"], ["updated_at", "2022-02-18 15:24:15.447384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2884], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2884], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.449387"], ["updated_at", "2022-02-18 15:24:15.449387"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2884], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2884], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.451077"], ["updated_at", "2022-02-18 15:24:15.451077"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2884], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1373)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.462259"], ["updated_at", "2022-02-18 15:24:15.462259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2885], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2885], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.464180"], ["updated_at", "2022-02-18 15:24:15.464180"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2885], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2885], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.465858"], ["updated_at", "2022-02-18 15:24:15.465858"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2885], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2885], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.467375"], ["updated_at", "2022-02-18 15:24:15.467375"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2885], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2885], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:24:15.474720"], ["updated_at", "2022-02-18 15:24:15.474720"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.5ms | Allocations: 4010)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.482169"], ["updated_at", "2022-02-18 15:24:15.482169"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2886], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2886], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.483932"], ["updated_at", "2022-02-18 15:24:15.483932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2886], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2886], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.485734"], ["updated_at", "2022-02-18 15:24:15.485734"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2886], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2886], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.487537"], ["updated_at", "2022-02-18 15:24:15.487537"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f96b9ce1920 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.492883"], ["updated_at", "2022-02-18 15:24:15.492883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2887], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2887], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.494597"], ["updated_at", "2022-02-18 15:24:15.494597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2887], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2887], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.496228"], ["updated_at", "2022-02-18 15:24:15.496228"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2887], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2887], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.497790"], ["updated_at", "2022-02-18 15:24:15.497790"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 374)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.506984"], ["updated_at", "2022-02-18 15:24:15.506984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2888], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2888], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.509010"], ["updated_at", "2022-02-18 15:24:15.509010"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2888], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2888], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.511482"], ["updated_at", "2022-02-18 15:24:15.511482"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2888], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2888], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.513364"], ["updated_at", "2022-02-18 15:24:15.513364"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5488", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5488], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2888], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1624)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.525704"], ["updated_at", "2022-02-18 15:24:15.525704"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2889], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2889], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.527520"], ["updated_at", "2022-02-18 15:24:15.527520"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2889], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2889], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.529079"], ["updated_at", "2022-02-18 15:24:15.529079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2889], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2889], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.530536"], ["updated_at", "2022-02-18 15:24:15.530536"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5491", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5491], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2889], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:24:15.538639"], ["id", 5491]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1924)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.544207"], ["updated_at", "2022-02-18 15:24:15.544207"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2890], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2890], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.546462"], ["updated_at", "2022-02-18 15:24:15.546462"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2890], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2890], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.548536"], ["updated_at", "2022-02-18 15:24:15.548536"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2890], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2890], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.550261"], ["updated_at", "2022-02-18 15:24:15.550261"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f96b9ce1920 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.556726"], ["updated_at", "2022-02-18 15:24:15.556726"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2891], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2891], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.558722"], ["updated_at", "2022-02-18 15:24:15.558722"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2891], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2891], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.560462"], ["updated_at", "2022-02-18 15:24:15.560462"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2891], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2891], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.562090"], ["updated_at", "2022-02-18 15:24:15.562090"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 342)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.571978"], ["updated_at", "2022-02-18 15:24:15.571978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2892], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2892], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.574102"], ["updated_at", "2022-02-18 15:24:15.574102"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2892], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2892], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.575800"], ["updated_at", "2022-02-18 15:24:15.575800"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2892], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2892], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.577316"], ["updated_at", "2022-02-18 15:24:15.577316"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:24:15.587416"], ["updated_at", "2022-02-18 15:24:15.587416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2893], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2893], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.589270"], ["updated_at", "2022-02-18 15:24:15.589270"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2893], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2893], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.590843"], ["updated_at", "2022-02-18 15:24:15.590843"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2893], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2893], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:24:15.592433"], ["updated_at", "2022-02-18 15:24:15.592433"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:24:15 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5503"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5503], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5503]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 756)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.135996"], ["updated_at", "2022-02-18 15:25:28.135996"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2894], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2894], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.149607"], ["updated_at", "2022-02-18 15:25:28.149607"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2894], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2894], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.151537"], ["updated_at", "2022-02-18 15:25:28.151537"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2894], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2894], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.157554"], ["updated_at", "2022-02-18 15:25:28.157554"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4627ac6790 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.289851"], ["updated_at", "2022-02-18 15:25:28.289851"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2895], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2895], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.291980"], ["updated_at", "2022-02-18 15:25:28.291980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2895], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2895], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.293860"], ["updated_at", "2022-02-18 15:25:28.293860"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2895], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2895], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.295511"], ["updated_at", "2022-02-18 15:25:28.295511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 7.8ms | ActiveRecord: 0.0ms | Allocations: 8016)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (1.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 1.2ms | Allocations: 1219)
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.323859"], ["updated_at", "2022-02-18 15:25:28.323859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2896], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2896], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.325857"], ["updated_at", "2022-02-18 15:25:28.325857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2896], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2896], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.327688"], ["updated_at", "2022-02-18 15:25:28.327688"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2896], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2896], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.329323"], ["updated_at", "2022-02-18 15:25:28.329323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.340440"], ["updated_at", "2022-02-18 15:25:28.340440"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2897], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2897], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.342584"], ["updated_at", "2022-02-18 15:25:28.342584"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2897], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2897], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.344821"], ["updated_at", "2022-02-18 15:25:28.344821"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2897], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2897], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.346844"], ["updated_at", "2022-02-18 15:25:28.346844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 696)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.358057"], ["updated_at", "2022-02-18 15:25:28.358057"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2898], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2898], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.360445"], ["updated_at", "2022-02-18 15:25:28.360445"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2898], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2898], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.362374"], ["updated_at", "2022-02-18 15:25:28.362374"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2898], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2898], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.364143"], ["updated_at", "2022-02-18 15:25:28.364143"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5518" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5518"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 675)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.374812"], ["updated_at", "2022-02-18 15:25:28.374812"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2899], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2899], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.377296"], ["updated_at", "2022-02-18 15:25:28.377296"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2899], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2899], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.379217"], ["updated_at", "2022-02-18 15:25:28.379217"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2899], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2899], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.380923"], ["updated_at", "2022-02-18 15:25:28.380923"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4627ac6790 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.387255"], ["updated_at", "2022-02-18 15:25:28.387255"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2900], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2900], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.389378"], ["updated_at", "2022-02-18 15:25:28.389378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2900], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2900], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.391387"], ["updated_at", "2022-02-18 15:25:28.391387"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2900], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2900], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.393530"], ["updated_at", "2022-02-18 15:25:28.393530"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 334)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.403541"], ["updated_at", "2022-02-18 15:25:28.403541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2901], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2901], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.405588"], ["updated_at", "2022-02-18 15:25:28.405588"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2901], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2901], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.407995"], ["updated_at", "2022-02-18 15:25:28.407995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2901], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2901], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.409791"], ["updated_at", "2022-02-18 15:25:28.409791"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5527" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5527"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5527], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 968)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.421147"], ["updated_at", "2022-02-18 15:25:28.421147"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2902], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2902], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.423041"], ["updated_at", "2022-02-18 15:25:28.423041"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2902], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2902], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.424864"], ["updated_at", "2022-02-18 15:25:28.424864"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2902], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2902], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.426985"], ["updated_at", "2022-02-18 15:25:28.426985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4627ac6790 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.435167"], ["updated_at", "2022-02-18 15:25:28.435167"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2903], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2903], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.437664"], ["updated_at", "2022-02-18 15:25:28.437664"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2903], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2903], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.439716"], ["updated_at", "2022-02-18 15:25:28.439716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2903], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2903], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.441643"], ["updated_at", "2022-02-18 15:25:28.441643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.451814"], ["updated_at", "2022-02-18 15:25:28.451814"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2904], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2904], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.453899"], ["updated_at", "2022-02-18 15:25:28.453899"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2904], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2904], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.455651"], ["updated_at", "2022-02-18 15:25:28.455651"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2904], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2904], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.457323"], ["updated_at", "2022-02-18 15:25:28.457323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2904], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1349)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.469472"], ["updated_at", "2022-02-18 15:25:28.469472"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2905], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2905], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.471422"], ["updated_at", "2022-02-18 15:25:28.471422"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2905], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2905], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.473242"], ["updated_at", "2022-02-18 15:25:28.473242"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2905], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2905], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.475332"], ["updated_at", "2022-02-18 15:25:28.475332"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2905], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2905], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:25:28.482833"], ["updated_at", "2022-02-18 15:25:28.482833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 3994)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.489834"], ["updated_at", "2022-02-18 15:25:28.489834"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2906], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2906], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.491700"], ["updated_at", "2022-02-18 15:25:28.491700"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2906], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2906], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.493541"], ["updated_at", "2022-02-18 15:25:28.493541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2906], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2906], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.495022"], ["updated_at", "2022-02-18 15:25:28.495022"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4627ac6790 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.500778"], ["updated_at", "2022-02-18 15:25:28.500778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2907], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2907], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.502685"], ["updated_at", "2022-02-18 15:25:28.502685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2907], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2907], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.504356"], ["updated_at", "2022-02-18 15:25:28.504356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2907], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2907], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.505952"], ["updated_at", "2022-02-18 15:25:28.505952"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 383)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.515402"], ["updated_at", "2022-02-18 15:25:28.515402"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2908], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2908], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.517356"], ["updated_at", "2022-02-18 15:25:28.517356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2908], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2908], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.518951"], ["updated_at", "2022-02-18 15:25:28.518951"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2908], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2908], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.520525"], ["updated_at", "2022-02-18 15:25:28.520525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5549", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5549], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2908], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1627)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.532347"], ["updated_at", "2022-02-18 15:25:28.532347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2909], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2909], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.534085"], ["updated_at", "2022-02-18 15:25:28.534085"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2909], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2909], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.535608"], ["updated_at", "2022-02-18 15:25:28.535608"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2909], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2909], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.537084"], ["updated_at", "2022-02-18 15:25:28.537084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5552", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5552], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2909], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:25:28.544986"], ["id", 5552]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.7ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.549304"], ["updated_at", "2022-02-18 15:25:28.549304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2910], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2910], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.550949"], ["updated_at", "2022-02-18 15:25:28.550949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2910], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2910], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.552432"], ["updated_at", "2022-02-18 15:25:28.552432"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2910], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2910], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.553988"], ["updated_at", "2022-02-18 15:25:28.553988"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4627ac6790 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.559921"], ["updated_at", "2022-02-18 15:25:28.559921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2911], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2911], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.562304"], ["updated_at", "2022-02-18 15:25:28.562304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2911], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2911], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.564140"], ["updated_at", "2022-02-18 15:25:28.564140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2911], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2911], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.565733"], ["updated_at", "2022-02-18 15:25:28.565733"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.575501"], ["updated_at", "2022-02-18 15:25:28.575501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2912], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2912], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.577912"], ["updated_at", "2022-02-18 15:25:28.577912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2912], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2912], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.579699"], ["updated_at", "2022-02-18 15:25:28.579699"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2912], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2912], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.581394"], ["updated_at", "2022-02-18 15:25:28.581394"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 501)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:25:28.592277"], ["updated_at", "2022-02-18 15:25:28.592277"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2913], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2913], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.594410"], ["updated_at", "2022-02-18 15:25:28.594410"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2913], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2913], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.596357"], ["updated_at", "2022-02-18 15:25:28.596357"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2913], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2913], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:25:28.598239"], ["updated_at", "2022-02-18 15:25:28.598239"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:25:28 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5564"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5564], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5564]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 771)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.627412"], ["updated_at", "2022-02-18 15:27:34.627412"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2914], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2914], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.645050"], ["updated_at", "2022-02-18 15:27:34.645050"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2914], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2914], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.654367"], ["updated_at", "2022-02-18 15:27:34.654367"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2914], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2914], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.660238"], ["updated_at", "2022-02-18 15:27:34.660238"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa2b6c5a9d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.0ms | Allocations: 3239)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.768966"], ["updated_at", "2022-02-18 15:27:34.768966"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2915], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2915], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.771120"], ["updated_at", "2022-02-18 15:27:34.771120"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2915], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2915], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.772957"], ["updated_at", "2022-02-18 15:27:34.772957"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2915], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2915], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.774982"], ["updated_at", "2022-02-18 15:27:34.774982"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 7990)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.9ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.9ms | Allocations: 1219)
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.808393"], ["updated_at", "2022-02-18 15:27:34.808393"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2916], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2916], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.810571"], ["updated_at", "2022-02-18 15:27:34.810571"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2916], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2916], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.812533"], ["updated_at", "2022-02-18 15:27:34.812533"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2916], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2916], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.814241"], ["updated_at", "2022-02-18 15:27:34.814241"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.826005"], ["updated_at", "2022-02-18 15:27:34.826005"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2917], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2917], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.828332"], ["updated_at", "2022-02-18 15:27:34.828332"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2917], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2917], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.830206"], ["updated_at", "2022-02-18 15:27:34.830206"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2917], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2917], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.832108"], ["updated_at", "2022-02-18 15:27:34.832108"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.4ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 681)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.843341"], ["updated_at", "2022-02-18 15:27:34.843341"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2918], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2918], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.845443"], ["updated_at", "2022-02-18 15:27:34.845443"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2918], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2918], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.847401"], ["updated_at", "2022-02-18 15:27:34.847401"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2918], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2918], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.849227"], ["updated_at", "2022-02-18 15:27:34.849227"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?id=5579" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5579"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 678)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.861162"], ["updated_at", "2022-02-18 15:27:34.861162"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2919], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2919], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.863435"], ["updated_at", "2022-02-18 15:27:34.863435"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2919], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2919], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.865441"], ["updated_at", "2022-02-18 15:27:34.865441"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2919], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2919], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.867109"], ["updated_at", "2022-02-18 15:27:34.867109"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa2b6c5a9d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.873537"], ["updated_at", "2022-02-18 15:27:34.873537"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2920], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2920], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.875517"], ["updated_at", "2022-02-18 15:27:34.875517"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2920], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2920], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.877278"], ["updated_at", "2022-02-18 15:27:34.877278"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2920], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2920], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.878904"], ["updated_at", "2022-02-18 15:27:34.878904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 346)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.889124"], ["updated_at", "2022-02-18 15:27:34.889124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2921], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2921], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.890922"], ["updated_at", "2022-02-18 15:27:34.890922"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2921], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2921], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.892537"], ["updated_at", "2022-02-18 15:27:34.892537"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2921], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2921], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.894067"], ["updated_at", "2022-02-18 15:27:34.894067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5588" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5588"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5588], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 939)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.905325"], ["updated_at", "2022-02-18 15:27:34.905325"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2922], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2922], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.907200"], ["updated_at", "2022-02-18 15:27:34.907200"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2922], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2922], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.908794"], ["updated_at", "2022-02-18 15:27:34.908794"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2922], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2922], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.910324"], ["updated_at", "2022-02-18 15:27:34.910324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa2b6c5a9d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.918572"], ["updated_at", "2022-02-18 15:27:34.918572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2923], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2923], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.920565"], ["updated_at", "2022-02-18 15:27:34.920565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2923], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2923], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.922456"], ["updated_at", "2022-02-18 15:27:34.922456"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2923], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2923], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.924095"], ["updated_at", "2022-02-18 15:27:34.924095"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 400)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.933869"], ["updated_at", "2022-02-18 15:27:34.933869"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2924], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2924], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.935882"], ["updated_at", "2022-02-18 15:27:34.935882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2924], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2924], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.937554"], ["updated_at", "2022-02-18 15:27:34.937554"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2924], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2924], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.939187"], ["updated_at", "2022-02-18 15:27:34.939187"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2924], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1385)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.950860"], ["updated_at", "2022-02-18 15:27:34.950860"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2925], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2925], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.952845"], ["updated_at", "2022-02-18 15:27:34.952845"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2925], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2925], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.954925"], ["updated_at", "2022-02-18 15:27:34.954925"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2925], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2925], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.956623"], ["updated_at", "2022-02-18 15:27:34.956623"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2925], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2925], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:27:34.963613"], ["updated_at", "2022-02-18 15:27:34.963613"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 4001)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.970312"], ["updated_at", "2022-02-18 15:27:34.970312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2926], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2926], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.972274"], ["updated_at", "2022-02-18 15:27:34.972274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2926], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2926], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.974019"], ["updated_at", "2022-02-18 15:27:34.974019"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2926], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2926], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.975480"], ["updated_at", "2022-02-18 15:27:34.975480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa2b6c5a9d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.981691"], ["updated_at", "2022-02-18 15:27:34.981691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2927], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2927], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.983489"], ["updated_at", "2022-02-18 15:27:34.983489"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2927], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2927], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.985224"], ["updated_at", "2022-02-18 15:27:34.985224"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2927], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2927], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.987152"], ["updated_at", "2022-02-18 15:27:34.987152"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:27:34 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 377)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:34.996504"], ["updated_at", "2022-02-18 15:27:34.996504"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2928], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2928], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:34.998534"], ["updated_at", "2022-02-18 15:27:34.998534"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2928], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2928], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.000496"], ["updated_at", "2022-02-18 15:27:35.000496"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2928], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2928], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.002161"], ["updated_at", "2022-02-18 15:27:35.002161"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5610", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5610], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2928], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1621)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:35.015078"], ["updated_at", "2022-02-18 15:27:35.015078"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2929], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2929], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.017163"], ["updated_at", "2022-02-18 15:27:35.017163"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2929], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2929], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.019271"], ["updated_at", "2022-02-18 15:27:35.019271"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2929], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2929], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.021421"], ["updated_at", "2022-02-18 15:27:35.021421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5613", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5613], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2929], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:27:35.029679"], ["id", 5613]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1939)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:35.034618"], ["updated_at", "2022-02-18 15:27:35.034618"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2930], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2930], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.036599"], ["updated_at", "2022-02-18 15:27:35.036599"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2930], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2930], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.038386"], ["updated_at", "2022-02-18 15:27:35.038386"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2930], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2930], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.040460"], ["updated_at", "2022-02-18 15:27:35.040460"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa2b6c5a9d0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:35.046482"], ["updated_at", "2022-02-18 15:27:35.046482"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2931], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2931], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.048399"], ["updated_at", "2022-02-18 15:27:35.048399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2931], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2931], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.050083"], ["updated_at", "2022-02-18 15:27:35.050083"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2931], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2931], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.051707"], ["updated_at", "2022-02-18 15:27:35.051707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 329)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:35.061896"], ["updated_at", "2022-02-18 15:27:35.061896"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2932], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2932], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.063642"], ["updated_at", "2022-02-18 15:27:35.063642"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2932], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2932], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.065262"], ["updated_at", "2022-02-18 15:27:35.065262"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2932], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2932], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.066904"], ["updated_at", "2022-02-18 15:27:35.066904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 513)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:27:35.077739"], ["updated_at", "2022-02-18 15:27:35.077739"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2933], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2933], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.079689"], ["updated_at", "2022-02-18 15:27:35.079689"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2933], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2933], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.081560"], ["updated_at", "2022-02-18 15:27:35.081560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2933], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2933], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:27:35.083217"], ["updated_at", "2022-02-18 15:27:35.083217"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:27:35 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5625"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5625], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5625]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 768)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.591510"], ["updated_at", "2022-02-18 15:29:14.591510"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2934], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2934], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.605302"], ["updated_at", "2022-02-18 15:29:14.605302"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2934], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2934], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.607445"], ["updated_at", "2022-02-18 15:29:14.607445"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2934], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2934], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.609149"], ["updated_at", "2022-02-18 15:29:14.609149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4920061808 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.0ms | Allocations: 3237)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.644430"], ["updated_at", "2022-02-18 15:29:14.644430"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2935], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2935], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.646321"], ["updated_at", "2022-02-18 15:29:14.646321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2935], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2935], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.647818"], ["updated_at", "2022-02-18 15:29:14.647818"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2935], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2935], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.649320"], ["updated_at", "2022-02-18 15:29:14.649320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.0ms | Allocations: 8023)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.5ms | Allocations: 1225)
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.674276"], ["updated_at", "2022-02-18 15:29:14.674276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2936], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2936], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.676186"], ["updated_at", "2022-02-18 15:29:14.676186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2936], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2936], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.677893"], ["updated_at", "2022-02-18 15:29:14.677893"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2936], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2936], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.679473"], ["updated_at", "2022-02-18 15:29:14.679473"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 723)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.689475"], ["updated_at", "2022-02-18 15:29:14.689475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2937], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2937], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.691388"], ["updated_at", "2022-02-18 15:29:14.691388"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2937], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2937], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.693137"], ["updated_at", "2022-02-18 15:29:14.693137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2937], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2937], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.694840"], ["updated_at", "2022-02-18 15:29:14.694840"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 495)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 683)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.722126"], ["updated_at", "2022-02-18 15:29:14.722126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2938], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2938], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.724399"], ["updated_at", "2022-02-18 15:29:14.724399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2938], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2938], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.726232"], ["updated_at", "2022-02-18 15:29:14.726232"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2938], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2938], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.728015"], ["updated_at", "2022-02-18 15:29:14.728015"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5640" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5640"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.740664"], ["updated_at", "2022-02-18 15:29:14.740664"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2939], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2939], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.743066"], ["updated_at", "2022-02-18 15:29:14.743066"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2939], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2939], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.745048"], ["updated_at", "2022-02-18 15:29:14.745048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2939], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2939], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.746936"], ["updated_at", "2022-02-18 15:29:14.746936"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4920061808 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.753065"], ["updated_at", "2022-02-18 15:29:14.753065"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2940], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2940], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.755178"], ["updated_at", "2022-02-18 15:29:14.755178"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2940], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2940], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.757055"], ["updated_at", "2022-02-18 15:29:14.757055"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2940], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2940], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.758753"], ["updated_at", "2022-02-18 15:29:14.758753"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 355)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.770472"], ["updated_at", "2022-02-18 15:29:14.770472"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2941], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2941], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.772615"], ["updated_at", "2022-02-18 15:29:14.772615"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2941], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2941], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.774498"], ["updated_at", "2022-02-18 15:29:14.774498"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2941], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2941], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.776159"], ["updated_at", "2022-02-18 15:29:14.776159"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5649" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5649"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5649], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 958)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.787899"], ["updated_at", "2022-02-18 15:29:14.787899"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2942], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2942], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.790088"], ["updated_at", "2022-02-18 15:29:14.790088"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2942], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2942], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.792010"], ["updated_at", "2022-02-18 15:29:14.792010"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2942], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2942], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.794521"], ["updated_at", "2022-02-18 15:29:14.794521"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4920061808 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.803030"], ["updated_at", "2022-02-18 15:29:14.803030"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2943], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2943], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.805307"], ["updated_at", "2022-02-18 15:29:14.805307"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2943], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2943], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.807172"], ["updated_at", "2022-02-18 15:29:14.807172"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2943], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2943], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.808882"], ["updated_at", "2022-02-18 15:29:14.808882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 391)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.818448"], ["updated_at", "2022-02-18 15:29:14.818448"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2944], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2944], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.820293"], ["updated_at", "2022-02-18 15:29:14.820293"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2944], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2944], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.822336"], ["updated_at", "2022-02-18 15:29:14.822336"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2944], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2944], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.824467"], ["updated_at", "2022-02-18 15:29:14.824467"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2944], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1364)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.835711"], ["updated_at", "2022-02-18 15:29:14.835711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2945], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2945], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.838030"], ["updated_at", "2022-02-18 15:29:14.838030"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2945], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2945], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.839653"], ["updated_at", "2022-02-18 15:29:14.839653"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2945], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2945], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.841135"], ["updated_at", "2022-02-18 15:29:14.841135"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2945], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2945], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:29:14.848101"], ["updated_at", "2022-02-18 15:29:14.848101"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4009)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.856012"], ["updated_at", "2022-02-18 15:29:14.856012"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2946], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2946], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.858576"], ["updated_at", "2022-02-18 15:29:14.858576"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2946], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2946], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.860646"], ["updated_at", "2022-02-18 15:29:14.860646"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2946], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2946], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.862433"], ["updated_at", "2022-02-18 15:29:14.862433"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4920061808 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.867880"], ["updated_at", "2022-02-18 15:29:14.867880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2947], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2947], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.870377"], ["updated_at", "2022-02-18 15:29:14.870377"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2947], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2947], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.872490"], ["updated_at", "2022-02-18 15:29:14.872490"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2947], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2947], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.874196"], ["updated_at", "2022-02-18 15:29:14.874196"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 380)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.884345"], ["updated_at", "2022-02-18 15:29:14.884345"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2948], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2948], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.886710"], ["updated_at", "2022-02-18 15:29:14.886710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2948], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2948], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.888673"], ["updated_at", "2022-02-18 15:29:14.888673"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2948], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2948], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.890378"], ["updated_at", "2022-02-18 15:29:14.890378"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5671", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5671], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2948], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1630)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.902688"], ["updated_at", "2022-02-18 15:29:14.902688"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2949], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2949], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.905119"], ["updated_at", "2022-02-18 15:29:14.905119"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2949], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2949], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.907014"], ["updated_at", "2022-02-18 15:29:14.907014"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2949], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2949], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.908643"], ["updated_at", "2022-02-18 15:29:14.908643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5674", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5674], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2949], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:29:14.917640"], ["id", 5674]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 1.1ms | Allocations: 1915)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.923380"], ["updated_at", "2022-02-18 15:29:14.923380"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2950], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2950], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.925149"], ["updated_at", "2022-02-18 15:29:14.925149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2950], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2950], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.926998"], ["updated_at", "2022-02-18 15:29:14.926998"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2950], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2950], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.928637"], ["updated_at", "2022-02-18 15:29:14.928637"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4920061808 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.934314"], ["updated_at", "2022-02-18 15:29:14.934314"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2951], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2951], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.936458"], ["updated_at", "2022-02-18 15:29:14.936458"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2951], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2951], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.938433"], ["updated_at", "2022-02-18 15:29:14.938433"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2951], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2951], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.940033"], ["updated_at", "2022-02-18 15:29:14.940033"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 332)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.950160"], ["updated_at", "2022-02-18 15:29:14.950160"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2952], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2952], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.952529"], ["updated_at", "2022-02-18 15:29:14.952529"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2952], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2952], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.954819"], ["updated_at", "2022-02-18 15:29:14.954819"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2952], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2952], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.956606"], ["updated_at", "2022-02-18 15:29:14.956606"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 502)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:14.967254"], ["updated_at", "2022-02-18 15:29:14.967254"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2953], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2953], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.969317"], ["updated_at", "2022-02-18 15:29:14.969317"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2953], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2953], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.971116"], ["updated_at", "2022-02-18 15:29:14.971116"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2953], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2953], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:14.972713"], ["updated_at", "2022-02-18 15:29:14.972713"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:14 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5686"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5686], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5686]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.8ms | Allocations: 756)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.337671"], ["updated_at", "2022-02-18 15:29:56.337671"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2954], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2954], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.352275"], ["updated_at", "2022-02-18 15:29:56.352275"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2954], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2954], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.354416"], ["updated_at", "2022-02-18 15:29:56.354416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2954], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2954], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.355925"], ["updated_at", "2022-02-18 15:29:56.355925"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f452b5993a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 0.0ms | Allocations: 3253)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.472830"], ["updated_at", "2022-02-18 15:29:56.472830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2955], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2955], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.474969"], ["updated_at", "2022-02-18 15:29:56.474969"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2955], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2955], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.476794"], ["updated_at", "2022-02-18 15:29:56.476794"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2955], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2955], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.478776"], ["updated_at", "2022-02-18 15:29:56.478776"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.1ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 8023)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1237)
  [1m[36mInvoice Count (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.519842"], ["updated_at", "2022-02-18 15:29:56.519842"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2956], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2956], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.525463"], ["updated_at", "2022-02-18 15:29:56.525463"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2956], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2956], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.531732"], ["updated_at", "2022-02-18 15:29:56.531732"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2956], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2956], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.537417"], ["updated_at", "2022-02-18 15:29:56.537417"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.556617"], ["updated_at", "2022-02-18 15:29:56.556617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2957], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2957], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.559068"], ["updated_at", "2022-02-18 15:29:56.559068"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2957], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2957], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.562002"], ["updated_at", "2022-02-18 15:29:56.562002"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2957], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2957], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.564104"], ["updated_at", "2022-02-18 15:29:56.564104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 708)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.575844"], ["updated_at", "2022-02-18 15:29:56.575844"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2958], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2958], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.577875"], ["updated_at", "2022-02-18 15:29:56.577875"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2958], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2958], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.579792"], ["updated_at", "2022-02-18 15:29:56.579792"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2958], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2958], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.581580"], ["updated_at", "2022-02-18 15:29:56.581580"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=5701" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5701"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.593650"], ["updated_at", "2022-02-18 15:29:56.593650"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2959], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2959], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.595740"], ["updated_at", "2022-02-18 15:29:56.595740"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2959], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2959], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.597788"], ["updated_at", "2022-02-18 15:29:56.597788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2959], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2959], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.599309"], ["updated_at", "2022-02-18 15:29:56.599309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f452b5993a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.605932"], ["updated_at", "2022-02-18 15:29:56.605932"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2960], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2960], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.607822"], ["updated_at", "2022-02-18 15:29:56.607822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2960], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2960], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.609546"], ["updated_at", "2022-02-18 15:29:56.609546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2960], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2960], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.611205"], ["updated_at", "2022-02-18 15:29:56.611205"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.621247"], ["updated_at", "2022-02-18 15:29:56.621247"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2961], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2961], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.623475"], ["updated_at", "2022-02-18 15:29:56.623475"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2961], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2961], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.625359"], ["updated_at", "2022-02-18 15:29:56.625359"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2961], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2961], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.627072"], ["updated_at", "2022-02-18 15:29:56.627072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5710" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5710"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5710], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 940)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.639410"], ["updated_at", "2022-02-18 15:29:56.639410"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2962], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2962], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.641471"], ["updated_at", "2022-02-18 15:29:56.641471"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2962], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2962], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.643112"], ["updated_at", "2022-02-18 15:29:56.643112"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2962], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2962], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.644602"], ["updated_at", "2022-02-18 15:29:56.644602"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f452b5993a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.653696"], ["updated_at", "2022-02-18 15:29:56.653696"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2963], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2963], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.655955"], ["updated_at", "2022-02-18 15:29:56.655955"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2963], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2963], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.657788"], ["updated_at", "2022-02-18 15:29:56.657788"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2963], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2963], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.659595"], ["updated_at", "2022-02-18 15:29:56.659595"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 397)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.670565"], ["updated_at", "2022-02-18 15:29:56.670565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2964], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2964], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.672654"], ["updated_at", "2022-02-18 15:29:56.672654"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2964], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2964], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.674521"], ["updated_at", "2022-02-18 15:29:56.674521"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2964], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2964], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.676257"], ["updated_at", "2022-02-18 15:29:56.676257"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1361)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.689875"], ["updated_at", "2022-02-18 15:29:56.689875"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2965], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2965], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.691648"], ["updated_at", "2022-02-18 15:29:56.691648"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2965], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2965], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.693501"], ["updated_at", "2022-02-18 15:29:56.693501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2965], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2965], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.695136"], ["updated_at", "2022-02-18 15:29:56.695136"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2965], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2965], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 15:29:56.706726"], ["updated_at", "2022-02-18 15:29:56.706726"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 7ms (ActiveRecord: 0.8ms | Allocations: 3999)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.717230"], ["updated_at", "2022-02-18 15:29:56.717230"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2966], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2966], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.719996"], ["updated_at", "2022-02-18 15:29:56.719996"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2966], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2966], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.722410"], ["updated_at", "2022-02-18 15:29:56.722410"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2966], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2966], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.724495"], ["updated_at", "2022-02-18 15:29:56.724495"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f452b5993a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.731727"], ["updated_at", "2022-02-18 15:29:56.731727"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2967], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2967], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.734025"], ["updated_at", "2022-02-18 15:29:56.734025"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2967], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2967], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.737239"], ["updated_at", "2022-02-18 15:29:56.737239"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2967], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2967], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.740208"], ["updated_at", "2022-02-18 15:29:56.740208"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 374)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.757331"], ["updated_at", "2022-02-18 15:29:56.757331"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2968], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2968], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.760416"], ["updated_at", "2022-02-18 15:29:56.760416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2968], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2968], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.763805"], ["updated_at", "2022-02-18 15:29:56.763805"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2968], ["LIMIT", 1]]
  [1m[36mInvoice Create (8.0ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2968], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.767678"], ["updated_at", "2022-02-18 15:29:56.767678"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5732", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5732], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2968], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 5ms (ActiveRecord: 1.0ms | Allocations: 1633)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.793142"], ["updated_at", "2022-02-18 15:29:56.793142"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2969], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2969], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.795616"], ["updated_at", "2022-02-18 15:29:56.795616"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2969], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2969], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.797875"], ["updated_at", "2022-02-18 15:29:56.797875"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2969], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2969], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.799972"], ["updated_at", "2022-02-18 15:29:56.799972"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5735", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5735], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2969], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 15:29:56.810457"], ["id", 5735]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.0ms | Allocations: 1924)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.817758"], ["updated_at", "2022-02-18 15:29:56.817758"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2970], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2970], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.819850"], ["updated_at", "2022-02-18 15:29:56.819850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2970], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2970], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.821426"], ["updated_at", "2022-02-18 15:29:56.821426"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2970], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2970], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.822830"], ["updated_at", "2022-02-18 15:29:56.822830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f452b5993a0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.828162"], ["updated_at", "2022-02-18 15:29:56.828162"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2971], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2971], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.829989"], ["updated_at", "2022-02-18 15:29:56.829989"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2971], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2971], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.831659"], ["updated_at", "2022-02-18 15:29:56.831659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2971], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2971], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.833293"], ["updated_at", "2022-02-18 15:29:56.833293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 329)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.843603"], ["updated_at", "2022-02-18 15:29:56.843603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2972], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2972], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.845560"], ["updated_at", "2022-02-18 15:29:56.845560"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2972], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2972], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.847280"], ["updated_at", "2022-02-18 15:29:56.847280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2972], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2972], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.848862"], ["updated_at", "2022-02-18 15:29:56.848862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 534)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 15:29:56.859133"], ["updated_at", "2022-02-18 15:29:56.859133"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2973], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2973], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.861060"], ["updated_at", "2022-02-18 15:29:56.861060"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2973], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2973], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.862837"], ["updated_at", "2022-02-18 15:29:56.862837"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2973], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2973], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 15:29:56.864556"], ["updated_at", "2022-02-18 15:29:56.864556"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 12:29:56 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5747"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5747], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5747]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 753)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.597280"], ["updated_at", "2022-02-18 16:11:36.597280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2974], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2974], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.611765"], ["updated_at", "2022-02-18 16:11:36.611765"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2974], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2974], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.614037"], ["updated_at", "2022-02-18 16:11:36.614037"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2974], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2974], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.615723"], ["updated_at", "2022-02-18 16:11:36.615723"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f912f4e7420 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.730745"], ["updated_at", "2022-02-18 16:11:36.730745"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2975], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2975], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.732950"], ["updated_at", "2022-02-18 16:11:36.732950"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2975], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2975], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.734891"], ["updated_at", "2022-02-18 16:11:36.734891"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2975], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2975], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.736714"], ["updated_at", "2022-02-18 16:11:36.736714"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 8008)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.7ms | Allocations: 1247)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.765922"], ["updated_at", "2022-02-18 16:11:36.765922"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2976], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2976], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.768000"], ["updated_at", "2022-02-18 16:11:36.768000"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2976], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2976], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.769978"], ["updated_at", "2022-02-18 16:11:36.769978"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2976], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2976], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.771804"], ["updated_at", "2022-02-18 16:11:36.771804"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 699)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 917)
  [1m[36mInvoice Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.794091"], ["updated_at", "2022-02-18 16:11:36.794091"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2977], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2977], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.796221"], ["updated_at", "2022-02-18 16:11:36.796221"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2977], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2977], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.797994"], ["updated_at", "2022-02-18 16:11:36.797994"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2977], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2977], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.799672"], ["updated_at", "2022-02-18 16:11:36.799672"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 705)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.810686"], ["updated_at", "2022-02-18 16:11:36.810686"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2978], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2978], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.812734"], ["updated_at", "2022-02-18 16:11:36.812734"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2978], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2978], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.814508"], ["updated_at", "2022-02-18 16:11:36.814508"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2978], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2978], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.816313"], ["updated_at", "2022-02-18 16:11:36.816313"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5762" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5762"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 678)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.828898"], ["updated_at", "2022-02-18 16:11:36.828898"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2979], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2979], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.830960"], ["updated_at", "2022-02-18 16:11:36.830960"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2979], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2979], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.832910"], ["updated_at", "2022-02-18 16:11:36.832910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2979], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2979], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.834524"], ["updated_at", "2022-02-18 16:11:36.834524"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f912f4e7420 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.840406"], ["updated_at", "2022-02-18 16:11:36.840406"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2980], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2980], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.842445"], ["updated_at", "2022-02-18 16:11:36.842445"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2980], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2980], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.844258"], ["updated_at", "2022-02-18 16:11:36.844258"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2980], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2980], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.846092"], ["updated_at", "2022-02-18 16:11:36.846092"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.855946"], ["updated_at", "2022-02-18 16:11:36.855946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2981], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2981], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.858280"], ["updated_at", "2022-02-18 16:11:36.858280"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2981], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2981], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.860307"], ["updated_at", "2022-02-18 16:11:36.860307"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2981], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2981], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.861871"], ["updated_at", "2022-02-18 16:11:36.861871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5771" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5771"}
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5771], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.1ms | Allocations: 934)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.871754"], ["updated_at", "2022-02-18 16:11:36.871754"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2982], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2982], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.873670"], ["updated_at", "2022-02-18 16:11:36.873670"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2982], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2982], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.875318"], ["updated_at", "2022-02-18 16:11:36.875318"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2982], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2982], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.876747"], ["updated_at", "2022-02-18 16:11:36.876747"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f912f4e7420 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.885589"], ["updated_at", "2022-02-18 16:11:36.885589"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2983], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2983], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.887696"], ["updated_at", "2022-02-18 16:11:36.887696"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2983], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2983], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.889407"], ["updated_at", "2022-02-18 16:11:36.889407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2983], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2983], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.891195"], ["updated_at", "2022-02-18 16:11:36.891195"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 403)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.901486"], ["updated_at", "2022-02-18 16:11:36.901486"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2984], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2984], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.903623"], ["updated_at", "2022-02-18 16:11:36.903623"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2984], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2984], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.905421"], ["updated_at", "2022-02-18 16:11:36.905421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2984], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2984], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.907116"], ["updated_at", "2022-02-18 16:11:36.907116"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2984], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1349)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.919188"], ["updated_at", "2022-02-18 16:11:36.919188"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2985], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2985], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.921306"], ["updated_at", "2022-02-18 16:11:36.921306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2985], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2985], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.923018"], ["updated_at", "2022-02-18 16:11:36.923018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2985], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2985], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.925283"], ["updated_at", "2022-02-18 16:11:36.925283"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2985], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2985], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:11:36.933200"], ["updated_at", "2022-02-18 16:11:36.933200"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 3994)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.939867"], ["updated_at", "2022-02-18 16:11:36.939867"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2986], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2986], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.942200"], ["updated_at", "2022-02-18 16:11:36.942200"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2986], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2986], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.944078"], ["updated_at", "2022-02-18 16:11:36.944078"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2986], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2986], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.945719"], ["updated_at", "2022-02-18 16:11:36.945719"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f912f4e7420 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.952196"], ["updated_at", "2022-02-18 16:11:36.952196"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2987], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2987], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.954082"], ["updated_at", "2022-02-18 16:11:36.954082"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2987], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2987], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.955720"], ["updated_at", "2022-02-18 16:11:36.955720"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2987], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2987], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.957465"], ["updated_at", "2022-02-18 16:11:36.957465"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 392)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.967940"], ["updated_at", "2022-02-18 16:11:36.967940"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2988], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2988], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.969849"], ["updated_at", "2022-02-18 16:11:36.969849"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2988], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2988], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.972129"], ["updated_at", "2022-02-18 16:11:36.972129"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2988], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2988], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.974056"], ["updated_at", "2022-02-18 16:11:36.974056"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5793", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5793], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2988], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:36.985997"], ["updated_at", "2022-02-18 16:11:36.985997"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2989], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2989], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.987848"], ["updated_at", "2022-02-18 16:11:36.987848"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2989], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2989], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.989488"], ["updated_at", "2022-02-18 16:11:36.989488"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2989], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2989], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:36.991072"], ["updated_at", "2022-02-18 16:11:36.991072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:11:36 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5796", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5796], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2989], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:11:36.998901"], ["id", 5796]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1903)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:37.004323"], ["updated_at", "2022-02-18 16:11:37.004323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2990], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2990], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.006100"], ["updated_at", "2022-02-18 16:11:37.006100"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2990], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2990], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.007934"], ["updated_at", "2022-02-18 16:11:37.007934"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2990], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2990], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.009603"], ["updated_at", "2022-02-18 16:11:37.009603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f912f4e7420 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:37.014850"], ["updated_at", "2022-02-18 16:11:37.014850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2991], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2991], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.016632"], ["updated_at", "2022-02-18 16:11:37.016632"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2991], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2991], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.018276"], ["updated_at", "2022-02-18 16:11:37.018276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2991], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2991], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.019944"], ["updated_at", "2022-02-18 16:11:37.019944"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 326)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:37.030306"], ["updated_at", "2022-02-18 16:11:37.030306"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2992], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2992], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.032645"], ["updated_at", "2022-02-18 16:11:37.032645"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2992], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2992], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.035149"], ["updated_at", "2022-02-18 16:11:37.035149"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2992], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2992], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.037155"], ["updated_at", "2022-02-18 16:11:37.037155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 513)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:11:37.048079"], ["updated_at", "2022-02-18 16:11:37.048079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2993], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2993], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.049961"], ["updated_at", "2022-02-18 16:11:37.049961"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2993], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2993], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.051617"], ["updated_at", "2022-02-18 16:11:37.051617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2993], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2993], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:11:37.053296"], ["updated_at", "2022-02-18 16:11:37.053296"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:11:37 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5808"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5808], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5808]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 756)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.500993"], ["updated_at", "2022-02-18 16:14:10.500993"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2994], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2994], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.517154"], ["updated_at", "2022-02-18 16:14:10.517154"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2994], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2994], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.519601"], ["updated_at", "2022-02-18 16:14:10.519601"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2994], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2994], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.521440"], ["updated_at", "2022-02-18 16:14:10.521440"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f6d28387c90 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 4ms (ActiveRecord: 0.0ms | Allocations: 3239)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.559499"], ["updated_at", "2022-02-18 16:14:10.559499"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2995], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2995], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.561212"], ["updated_at", "2022-02-18 16:14:10.561212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2995], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2995], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.562739"], ["updated_at", "2022-02-18 16:14:10.562739"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2995], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2995], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.564199"], ["updated_at", "2022-02-18 16:14:10.564199"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.1ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.5ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 7.2ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.8ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.5ms | ActiveRecord: 0.8ms | Allocations: 1238)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.589321"], ["updated_at", "2022-02-18 16:14:10.589321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2996], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2996], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.591213"], ["updated_at", "2022-02-18 16:14:10.591213"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2996], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2996], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.592855"], ["updated_at", "2022-02-18 16:14:10.592855"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2996], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2996], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.594394"], ["updated_at", "2022-02-18 16:14:10.594394"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 684)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 899)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.610170"], ["updated_at", "2022-02-18 16:14:10.610170"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2997], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2997], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.612551"], ["updated_at", "2022-02-18 16:14:10.612551"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2997], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2997], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.615543"], ["updated_at", "2022-02-18 16:14:10.615543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2997], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2997], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.617586"], ["updated_at", "2022-02-18 16:14:10.617586"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 687)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.627995"], ["updated_at", "2022-02-18 16:14:10.627995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2998], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2998], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.630162"], ["updated_at", "2022-02-18 16:14:10.630162"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2998], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2998], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.633422"], ["updated_at", "2022-02-18 16:14:10.633422"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2998], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2998], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.636456"], ["updated_at", "2022-02-18 16:14:10.636456"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5823" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5823"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 702)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.650231"], ["updated_at", "2022-02-18 16:14:10.650231"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2999], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2999], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.652987"], ["updated_at", "2022-02-18 16:14:10.652987"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2999], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2999], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.655286"], ["updated_at", "2022-02-18 16:14:10.655286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2999], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 2999], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.657173"], ["updated_at", "2022-02-18 16:14:10.657173"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f6d28387c90 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.663662"], ["updated_at", "2022-02-18 16:14:10.663662"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3000], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3000], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.666010"], ["updated_at", "2022-02-18 16:14:10.666010"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3000], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3000], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.668261"], ["updated_at", "2022-02-18 16:14:10.668261"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3000], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3000], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.670178"], ["updated_at", "2022-02-18 16:14:10.670178"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.4ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 361)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.683937"], ["updated_at", "2022-02-18 16:14:10.683937"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3001], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3001], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.686741"], ["updated_at", "2022-02-18 16:14:10.686741"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3001], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3001], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.688879"], ["updated_at", "2022-02-18 16:14:10.688879"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3001], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3001], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.690715"], ["updated_at", "2022-02-18 16:14:10.690715"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5832" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5832"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5832], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 924)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.702996"], ["updated_at", "2022-02-18 16:14:10.702996"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3002], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3002], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.705205"], ["updated_at", "2022-02-18 16:14:10.705205"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3002], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3002], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.708017"], ["updated_at", "2022-02-18 16:14:10.708017"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3002], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3002], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.709905"], ["updated_at", "2022-02-18 16:14:10.709905"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f6d28387c90 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.720402"], ["updated_at", "2022-02-18 16:14:10.720402"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3003], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3003], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.722766"], ["updated_at", "2022-02-18 16:14:10.722766"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3003], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3003], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.724750"], ["updated_at", "2022-02-18 16:14:10.724750"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3003], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3003], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.726561"], ["updated_at", "2022-02-18 16:14:10.726561"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 385)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.736922"], ["updated_at", "2022-02-18 16:14:10.736922"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3004], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3004], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.739681"], ["updated_at", "2022-02-18 16:14:10.739681"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3004], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3004], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.741756"], ["updated_at", "2022-02-18 16:14:10.741756"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3004], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3004], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.743740"], ["updated_at", "2022-02-18 16:14:10.743740"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3004], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.5ms | Allocations: 1343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.758298"], ["updated_at", "2022-02-18 16:14:10.758298"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3005], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3005], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.760666"], ["updated_at", "2022-02-18 16:14:10.760666"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3005], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3005], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.762735"], ["updated_at", "2022-02-18 16:14:10.762735"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3005], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3005], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.764542"], ["updated_at", "2022-02-18 16:14:10.764542"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3005], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3005], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:14:10.773293"], ["updated_at", "2022-02-18 16:14:10.773293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 3986)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.780376"], ["updated_at", "2022-02-18 16:14:10.780376"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3006], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3006], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.783778"], ["updated_at", "2022-02-18 16:14:10.783778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3006], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3006], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.786328"], ["updated_at", "2022-02-18 16:14:10.786328"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3006], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3006], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.788251"], ["updated_at", "2022-02-18 16:14:10.788251"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f6d28387c90 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.794236"], ["updated_at", "2022-02-18 16:14:10.794236"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3007], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3007], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.796313"], ["updated_at", "2022-02-18 16:14:10.796313"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3007], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3007], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.798136"], ["updated_at", "2022-02-18 16:14:10.798136"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3007], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3007], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.800477"], ["updated_at", "2022-02-18 16:14:10.800477"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 383)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.811079"], ["updated_at", "2022-02-18 16:14:10.811079"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3008], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3008], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.813200"], ["updated_at", "2022-02-18 16:14:10.813200"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3008], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3008], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.816024"], ["updated_at", "2022-02-18 16:14:10.816024"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3008], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3008], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.818981"], ["updated_at", "2022-02-18 16:14:10.818981"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5854", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5854], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3008], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1630)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.832262"], ["updated_at", "2022-02-18 16:14:10.832262"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3009], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3009], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.834260"], ["updated_at", "2022-02-18 16:14:10.834260"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3009], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3009], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.836049"], ["updated_at", "2022-02-18 16:14:10.836049"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3009], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3009], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.837910"], ["updated_at", "2022-02-18 16:14:10.837910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5857", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5857], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3009], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:14:10.846348"], ["id", 5857]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1912)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.853205"], ["updated_at", "2022-02-18 16:14:10.853205"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3010], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3010], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.855307"], ["updated_at", "2022-02-18 16:14:10.855307"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3010], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3010], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.857192"], ["updated_at", "2022-02-18 16:14:10.857192"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3010], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3010], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.858907"], ["updated_at", "2022-02-18 16:14:10.858907"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f6d28387c90 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.865357"], ["updated_at", "2022-02-18 16:14:10.865357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3011], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3011], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.867492"], ["updated_at", "2022-02-18 16:14:10.867492"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3011], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3011], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.869492"], ["updated_at", "2022-02-18 16:14:10.869492"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3011], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3011], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.871238"], ["updated_at", "2022-02-18 16:14:10.871238"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.881543"], ["updated_at", "2022-02-18 16:14:10.881543"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3012], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3012], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.883612"], ["updated_at", "2022-02-18 16:14:10.883612"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3012], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3012], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.885418"], ["updated_at", "2022-02-18 16:14:10.885418"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3012], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3012], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.887201"], ["updated_at", "2022-02-18 16:14:10.887201"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 534)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:10.898817"], ["updated_at", "2022-02-18 16:14:10.898817"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3013], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3013], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.901951"], ["updated_at", "2022-02-18 16:14:10.901951"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3013], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3013], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.904139"], ["updated_at", "2022-02-18 16:14:10.904139"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3013], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3013], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:10.905794"], ["updated_at", "2022-02-18 16:14:10.905794"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5869"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5869], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5869]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 774)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.142540"], ["updated_at", "2022-02-18 16:14:26.142540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3014], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3014], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.155057"], ["updated_at", "2022-02-18 16:14:26.155057"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3014], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3014], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.156904"], ["updated_at", "2022-02-18 16:14:26.156904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3014], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3014], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.158648"], ["updated_at", "2022-02-18 16:14:26.158648"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f728845f978 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.273238"], ["updated_at", "2022-02-18 16:14:26.273238"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3015], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3015], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.275691"], ["updated_at", "2022-02-18 16:14:26.275691"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3015], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3015], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.277772"], ["updated_at", "2022-02-18 16:14:26.277772"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3015], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3015], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.279654"], ["updated_at", "2022-02-18 16:14:26.279654"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.0ms | Allocations: 8020)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1225)
  [1m[36mInvoice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.309305"], ["updated_at", "2022-02-18 16:14:26.309305"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3016], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3016], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.311289"], ["updated_at", "2022-02-18 16:14:26.311289"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3016], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3016], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.313249"], ["updated_at", "2022-02-18 16:14:26.313249"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3016], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3016], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.315072"], ["updated_at", "2022-02-18 16:14:26.315072"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 699)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 926)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.330858"], ["updated_at", "2022-02-18 16:14:26.330858"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3017], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3017], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.332803"], ["updated_at", "2022-02-18 16:14:26.332803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3017], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3017], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.334626"], ["updated_at", "2022-02-18 16:14:26.334626"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3017], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3017], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.336421"], ["updated_at", "2022-02-18 16:14:26.336421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 690)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.346737"], ["updated_at", "2022-02-18 16:14:26.346737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3018], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3018], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.348807"], ["updated_at", "2022-02-18 16:14:26.348807"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3018], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3018], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.350541"], ["updated_at", "2022-02-18 16:14:26.350541"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3018], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3018], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.352104"], ["updated_at", "2022-02-18 16:14:26.352104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?id=5884" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5884"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.4ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.363199"], ["updated_at", "2022-02-18 16:14:26.363199"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3019], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.365169"], ["updated_at", "2022-02-18 16:14:26.365169"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3019], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.366760"], ["updated_at", "2022-02-18 16:14:26.366760"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3019], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3019], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.368522"], ["updated_at", "2022-02-18 16:14:26.368522"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f728845f978 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.374255"], ["updated_at", "2022-02-18 16:14:26.374255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3020], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3020], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.376126"], ["updated_at", "2022-02-18 16:14:26.376126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3020], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3020], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.377815"], ["updated_at", "2022-02-18 16:14:26.377815"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3020], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3020], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.379343"], ["updated_at", "2022-02-18 16:14:26.379343"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 373)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.388694"], ["updated_at", "2022-02-18 16:14:26.388694"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3021], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3021], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.391043"], ["updated_at", "2022-02-18 16:14:26.391043"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3021], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3021], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.392749"], ["updated_at", "2022-02-18 16:14:26.392749"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3021], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3021], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.394267"], ["updated_at", "2022-02-18 16:14:26.394267"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=5893" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5893"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5893], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 920)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.405014"], ["updated_at", "2022-02-18 16:14:26.405014"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3022], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3022], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.406792"], ["updated_at", "2022-02-18 16:14:26.406792"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3022], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3022], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.408333"], ["updated_at", "2022-02-18 16:14:26.408333"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3022], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3022], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.409801"], ["updated_at", "2022-02-18 16:14:26.409801"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f728845f978 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.417902"], ["updated_at", "2022-02-18 16:14:26.417902"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3023], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3023], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.419751"], ["updated_at", "2022-02-18 16:14:26.419751"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3023], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3023], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.421854"], ["updated_at", "2022-02-18 16:14:26.421854"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3023], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3023], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.423591"], ["updated_at", "2022-02-18 16:14:26.423591"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 397)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.432815"], ["updated_at", "2022-02-18 16:14:26.432815"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3024], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3024], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.434954"], ["updated_at", "2022-02-18 16:14:26.434954"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3024], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3024], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.436817"], ["updated_at", "2022-02-18 16:14:26.436817"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3024], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3024], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.438292"], ["updated_at", "2022-02-18 16:14:26.438292"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3024], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1346)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.449011"], ["updated_at", "2022-02-18 16:14:26.449011"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3025], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3025], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.450833"], ["updated_at", "2022-02-18 16:14:26.450833"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3025], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3025], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.452878"], ["updated_at", "2022-02-18 16:14:26.452878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3025], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3025], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.454744"], ["updated_at", "2022-02-18 16:14:26.454744"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3025], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3025], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:14:26.462384"], ["updated_at", "2022-02-18 16:14:26.462384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 3985)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.469777"], ["updated_at", "2022-02-18 16:14:26.469777"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3026], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3026], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.471710"], ["updated_at", "2022-02-18 16:14:26.471710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3026], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3026], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.473293"], ["updated_at", "2022-02-18 16:14:26.473293"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3026], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3026], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.474755"], ["updated_at", "2022-02-18 16:14:26.474755"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f728845f978 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.480236"], ["updated_at", "2022-02-18 16:14:26.480236"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3027], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3027], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.482126"], ["updated_at", "2022-02-18 16:14:26.482126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3027], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3027], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.484318"], ["updated_at", "2022-02-18 16:14:26.484318"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3027], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3027], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.485921"], ["updated_at", "2022-02-18 16:14:26.485921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 419)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.494660"], ["updated_at", "2022-02-18 16:14:26.494660"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3028], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3028], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.496427"], ["updated_at", "2022-02-18 16:14:26.496427"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3028], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3028], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.497969"], ["updated_at", "2022-02-18 16:14:26.497969"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3028], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3028], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.499495"], ["updated_at", "2022-02-18 16:14:26.499495"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5915", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5915], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3028], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1630)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.510531"], ["updated_at", "2022-02-18 16:14:26.510531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3029], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3029], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.512235"], ["updated_at", "2022-02-18 16:14:26.512235"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3029], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3029], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.513981"], ["updated_at", "2022-02-18 16:14:26.513981"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3029], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3029], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.515865"], ["updated_at", "2022-02-18 16:14:26.515865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5918", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5918], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3029], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:14:26.523828"], ["id", 5918]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1927)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.528253"], ["updated_at", "2022-02-18 16:14:26.528253"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3030], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3030], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.530087"], ["updated_at", "2022-02-18 16:14:26.530087"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3030], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3030], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.531779"], ["updated_at", "2022-02-18 16:14:26.531779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3030], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3030], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.533386"], ["updated_at", "2022-02-18 16:14:26.533386"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f728845f978 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.539036"], ["updated_at", "2022-02-18 16:14:26.539036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3031], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3031], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.540995"], ["updated_at", "2022-02-18 16:14:26.540995"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3031], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3031], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.542878"], ["updated_at", "2022-02-18 16:14:26.542878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3031], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3031], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.544478"], ["updated_at", "2022-02-18 16:14:26.544478"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.554789"], ["updated_at", "2022-02-18 16:14:26.554789"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3032], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3032], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.556736"], ["updated_at", "2022-02-18 16:14:26.556736"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3032], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3032], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.558312"], ["updated_at", "2022-02-18 16:14:26.558312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3032], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3032], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.560074"], ["updated_at", "2022-02-18 16:14:26.560074"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:14:26.570434"], ["updated_at", "2022-02-18 16:14:26.570434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3033], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3033], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.572327"], ["updated_at", "2022-02-18 16:14:26.572327"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3033], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3033], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.573919"], ["updated_at", "2022-02-18 16:14:26.573919"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3033], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3033], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:14:26.575523"], ["updated_at", "2022-02-18 16:14:26.575523"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:14:26 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5930"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5930], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5930]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 780)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:23:34.312586"], ["updated_at", "2022-02-18 16:23:34.312586"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3034], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3034], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.327303"], ["updated_at", "2022-02-18 16:23:34.327303"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3034], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3034], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.329767"], ["updated_at", "2022-02-18 16:23:34.329767"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3034], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3034], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.332234"], ["updated_at", "2022-02-18 16:23:34.332234"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe941dcd908 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 8ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:23:34.476784"], ["updated_at", "2022-02-18 16:23:34.476784"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3035], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3035], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.479360"], ["updated_at", "2022-02-18 16:23:34.479360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3035], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3035], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.481565"], ["updated_at", "2022-02-18 16:23:34.481565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3035], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3035], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.483611"], ["updated_at", "2022-02-18 16:23:34.483611"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 8029)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1219)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:23:34.516478"], ["updated_at", "2022-02-18 16:23:34.516478"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3036], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3036], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.519350"], ["updated_at", "2022-02-18 16:23:34.519350"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3036], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3036], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.521255"], ["updated_at", "2022-02-18 16:23:34.521255"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3036], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3036], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:23:34.523006"], ["updated_at", "2022-02-18 16:23:34.523006"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 699)
Started GET "/invoice/list?date=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:23:34 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"date"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.3ms | Allocations: 917)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.292722"], ["updated_at", "2022-02-18 16:26:26.292722"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3037], ["LIMIT", 1]]
  [1m[36mInvoice Create (1.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3037], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.301219"], ["updated_at", "2022-02-18 16:26:26.301219"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3037], ["LIMIT", 1]]
  [1m[36mInvoice Create (1.0ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3037], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.311545"], ["updated_at", "2022-02-18 16:26:26.311545"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3037], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3037], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.319609"], ["updated_at", "2022-02-18 16:26:26.319609"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 3ms (ActiveRecord: 0.5ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 699)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.348846"], ["updated_at", "2022-02-18 16:26:26.348846"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3038], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3038], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.351829"], ["updated_at", "2022-02-18 16:26:26.351829"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3038], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3038], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.354439"], ["updated_at", "2022-02-18 16:26:26.354439"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3038], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3038], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.356898"], ["updated_at", "2022-02-18 16:26:26.356898"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=5945" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"5945"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.369361"], ["updated_at", "2022-02-18 16:26:26.369361"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3039], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3039], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.371994"], ["updated_at", "2022-02-18 16:26:26.371994"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3039], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3039], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.374485"], ["updated_at", "2022-02-18 16:26:26.374485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3039], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3039], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.376340"], ["updated_at", "2022-02-18 16:26:26.376340"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe941dcd908 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.382945"], ["updated_at", "2022-02-18 16:26:26.382945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3040], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3040], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.384961"], ["updated_at", "2022-02-18 16:26:26.384961"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3040], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3040], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.386861"], ["updated_at", "2022-02-18 16:26:26.386861"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3040], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.9ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3040], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.388909"], ["updated_at", "2022-02-18 16:26:26.388909"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.403369"], ["updated_at", "2022-02-18 16:26:26.403369"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3041], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3041], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.407112"], ["updated_at", "2022-02-18 16:26:26.407112"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3041], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3041], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.410233"], ["updated_at", "2022-02-18 16:26:26.410233"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3041], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3041], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.412422"], ["updated_at", "2022-02-18 16:26:26.412422"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=5954" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"5954"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5954], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 928)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.425611"], ["updated_at", "2022-02-18 16:26:26.425611"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3042], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3042], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.428515"], ["updated_at", "2022-02-18 16:26:26.428515"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3042], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3042], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.431546"], ["updated_at", "2022-02-18 16:26:26.431546"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3042], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3042], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.433792"], ["updated_at", "2022-02-18 16:26:26.433792"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe941dcd908 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.443150"], ["updated_at", "2022-02-18 16:26:26.443150"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3043], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3043], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.445405"], ["updated_at", "2022-02-18 16:26:26.445405"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3043], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3043], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.447439"], ["updated_at", "2022-02-18 16:26:26.447439"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3043], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3043], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.449388"], ["updated_at", "2022-02-18 16:26:26.449388"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 400)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.460974"], ["updated_at", "2022-02-18 16:26:26.460974"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3044], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3044], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.463519"], ["updated_at", "2022-02-18 16:26:26.463519"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3044], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3044], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.466115"], ["updated_at", "2022-02-18 16:26:26.466115"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3044], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3044], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.468329"], ["updated_at", "2022-02-18 16:26:26.468329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3044], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1358)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.481103"], ["updated_at", "2022-02-18 16:26:26.481103"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3045], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3045], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.483305"], ["updated_at", "2022-02-18 16:26:26.483305"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3045], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3045], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.485398"], ["updated_at", "2022-02-18 16:26:26.485398"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3045], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3045], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.487131"], ["updated_at", "2022-02-18 16:26:26.487131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3045], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3045], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:26:26.495153"], ["updated_at", "2022-02-18 16:26:26.495153"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.8ms | Allocations: 4046)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.502769"], ["updated_at", "2022-02-18 16:26:26.502769"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3046], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3046], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.505041"], ["updated_at", "2022-02-18 16:26:26.505041"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3046], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3046], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.507026"], ["updated_at", "2022-02-18 16:26:26.507026"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3046], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3046], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.508761"], ["updated_at", "2022-02-18 16:26:26.508761"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe941dcd908 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.514469"], ["updated_at", "2022-02-18 16:26:26.514469"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3047], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3047], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.516330"], ["updated_at", "2022-02-18 16:26:26.516330"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3047], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3047], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.518050"], ["updated_at", "2022-02-18 16:26:26.518050"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3047], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3047], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.519748"], ["updated_at", "2022-02-18 16:26:26.519748"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 380)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.530073"], ["updated_at", "2022-02-18 16:26:26.530073"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3048], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3048], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.532142"], ["updated_at", "2022-02-18 16:26:26.532142"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3048], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3048], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.533859"], ["updated_at", "2022-02-18 16:26:26.533859"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3048], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3048], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.535526"], ["updated_at", "2022-02-18 16:26:26.535526"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5976", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5976], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3048], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.4ms | Allocations: 1624)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.547666"], ["updated_at", "2022-02-18 16:26:26.547666"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3049], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3049], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.549468"], ["updated_at", "2022-02-18 16:26:26.549468"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3049], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3049], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.551227"], ["updated_at", "2022-02-18 16:26:26.551227"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3049], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3049], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.552894"], ["updated_at", "2022-02-18 16:26:26.552894"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"5979", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5979], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3049], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:26:26.561797"], ["id", 5979]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.7ms | Allocations: 1936)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.566416"], ["updated_at", "2022-02-18 16:26:26.566416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3050], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3050], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.568226"], ["updated_at", "2022-02-18 16:26:26.568226"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3050], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3050], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.570344"], ["updated_at", "2022-02-18 16:26:26.570344"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3050], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3050], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.572370"], ["updated_at", "2022-02-18 16:26:26.572370"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe941dcd908 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.578189"], ["updated_at", "2022-02-18 16:26:26.578189"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3051], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3051], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.580048"], ["updated_at", "2022-02-18 16:26:26.580048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3051], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3051], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.581717"], ["updated_at", "2022-02-18 16:26:26.581717"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3051], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3051], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.583341"], ["updated_at", "2022-02-18 16:26:26.583341"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 347)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.593711"], ["updated_at", "2022-02-18 16:26:26.593711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3052], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3052], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.595654"], ["updated_at", "2022-02-18 16:26:26.595654"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3052], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3052], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.597352"], ["updated_at", "2022-02-18 16:26:26.597352"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3052], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3052], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.598956"], ["updated_at", "2022-02-18 16:26:26.598956"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 513)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:26.609878"], ["updated_at", "2022-02-18 16:26:26.609878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3053], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3053], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.611814"], ["updated_at", "2022-02-18 16:26:26.611814"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3053], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3053], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.613496"], ["updated_at", "2022-02-18 16:26:26.613496"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3053], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3053], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:26.615113"], ["updated_at", "2022-02-18 16:26:26.615113"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:26 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"5991"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 5991], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 5991]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 756)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.208018"], ["updated_at", "2022-02-18 16:26:32.208018"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3054], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3054], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.221591"], ["updated_at", "2022-02-18 16:26:32.221591"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3054], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3054], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.223866"], ["updated_at", "2022-02-18 16:26:32.223866"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3054], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3054], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.225413"], ["updated_at", "2022-02-18 16:26:32.225413"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f06b03137e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.348604"], ["updated_at", "2022-02-18 16:26:32.348604"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3055], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3055], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.350939"], ["updated_at", "2022-02-18 16:26:32.350939"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3055], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3055], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.353087"], ["updated_at", "2022-02-18 16:26:32.353087"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3055], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3055], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.354968"], ["updated_at", "2022-02-18 16:26:32.354968"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1252)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.386888"], ["updated_at", "2022-02-18 16:26:32.386888"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3056], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3056], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.389005"], ["updated_at", "2022-02-18 16:26:32.389005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3056], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3056], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.391116"], ["updated_at", "2022-02-18 16:26:32.391116"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3056], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3056], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.393031"], ["updated_at", "2022-02-18 16:26:32.393031"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 632)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering invoice/index.json.jbuilder
  Rendered collection of invoice/_invoice.json.jbuilder [0 times] (Duration: 0.1ms | Allocations: 47)
  Rendered invoice/index.json.jbuilder (Duration: 0.8ms | Allocations: 525)
Completed 200 OK in 2ms (Views: 1.4ms | ActiveRecord: 0.0ms | Allocations: 1108)
  [1m[36mInvoice Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.415627"], ["updated_at", "2022-02-18 16:26:32.415627"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3057], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3057], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.417841"], ["updated_at", "2022-02-18 16:26:32.417841"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3057], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3057], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.419692"], ["updated_at", "2022-02-18 16:26:32.419692"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3057], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3057], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.421470"], ["updated_at", "2022-02-18 16:26:32.421470"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=0" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"0"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 684)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.432279"], ["updated_at", "2022-02-18 16:26:32.432279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3058], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3058], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.434639"], ["updated_at", "2022-02-18 16:26:32.434639"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3058], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3058], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.436639"], ["updated_at", "2022-02-18 16:26:32.436639"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3058], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3058], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.438620"], ["updated_at", "2022-02-18 16:26:32.438620"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=6006" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"6006"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 714)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.450254"], ["updated_at", "2022-02-18 16:26:32.450254"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3059], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3059], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.452823"], ["updated_at", "2022-02-18 16:26:32.452823"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3059], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3059], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.454882"], ["updated_at", "2022-02-18 16:26:32.454882"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3059], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3059], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.456717"], ["updated_at", "2022-02-18 16:26:32.456717"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f06b03137e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.462923"], ["updated_at", "2022-02-18 16:26:32.462923"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3060], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3060], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.465100"], ["updated_at", "2022-02-18 16:26:32.465100"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3060], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3060], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.467395"], ["updated_at", "2022-02-18 16:26:32.467395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3060], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3060], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.469203"], ["updated_at", "2022-02-18 16:26:32.469203"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 352)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.479164"], ["updated_at", "2022-02-18 16:26:32.479164"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3061], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3061], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.481100"], ["updated_at", "2022-02-18 16:26:32.481100"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3061], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3061], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.483251"], ["updated_at", "2022-02-18 16:26:32.483251"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3061], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3061], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.485600"], ["updated_at", "2022-02-18 16:26:32.485600"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=6015" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6015"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6015], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.498016"], ["updated_at", "2022-02-18 16:26:32.498016"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3062], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3062], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.500622"], ["updated_at", "2022-02-18 16:26:32.500622"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3062], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3062], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.502829"], ["updated_at", "2022-02-18 16:26:32.502829"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3062], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3062], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.504564"], ["updated_at", "2022-02-18 16:26:32.504564"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f06b03137e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.512695"], ["updated_at", "2022-02-18 16:26:32.512695"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3063], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3063], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.514793"], ["updated_at", "2022-02-18 16:26:32.514793"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3063], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3063], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.516608"], ["updated_at", "2022-02-18 16:26:32.516608"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3063], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3063], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.518191"], ["updated_at", "2022-02-18 16:26:32.518191"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 403)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.527891"], ["updated_at", "2022-02-18 16:26:32.527891"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3064], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3064], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.530008"], ["updated_at", "2022-02-18 16:26:32.530008"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3064], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3064], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.532495"], ["updated_at", "2022-02-18 16:26:32.532495"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3064], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3064], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.535945"], ["updated_at", "2022-02-18 16:26:32.535945"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3064], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1337)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.548658"], ["updated_at", "2022-02-18 16:26:32.548658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3065], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3065], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.550561"], ["updated_at", "2022-02-18 16:26:32.550561"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3065], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3065], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.552204"], ["updated_at", "2022-02-18 16:26:32.552204"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3065], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3065], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.553778"], ["updated_at", "2022-02-18 16:26:32.553778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3065], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3065], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:26:32.562089"], ["updated_at", "2022-02-18 16:26:32.562089"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4006)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.568904"], ["updated_at", "2022-02-18 16:26:32.568904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3066], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3066], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.570806"], ["updated_at", "2022-02-18 16:26:32.570806"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3066], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3066], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.572437"], ["updated_at", "2022-02-18 16:26:32.572437"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3066], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3066], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.573961"], ["updated_at", "2022-02-18 16:26:32.573961"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f06b03137e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.579485"], ["updated_at", "2022-02-18 16:26:32.579485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3067], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3067], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.581233"], ["updated_at", "2022-02-18 16:26:32.581233"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3067], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3067], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.582887"], ["updated_at", "2022-02-18 16:26:32.582887"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3067], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3067], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.584329"], ["updated_at", "2022-02-18 16:26:32.584329"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.594586"], ["updated_at", "2022-02-18 16:26:32.594586"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3068], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3068], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.596627"], ["updated_at", "2022-02-18 16:26:32.596627"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3068], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3068], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.598386"], ["updated_at", "2022-02-18 16:26:32.598386"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3068], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3068], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.600162"], ["updated_at", "2022-02-18 16:26:32.600162"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6037", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6037], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3068], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.611673"], ["updated_at", "2022-02-18 16:26:32.611673"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3069], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3069], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.613505"], ["updated_at", "2022-02-18 16:26:32.613505"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3069], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3069], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.615036"], ["updated_at", "2022-02-18 16:26:32.615036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3069], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3069], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.616517"], ["updated_at", "2022-02-18 16:26:32.616517"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6040", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6040], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3069], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:26:32.625061"], ["id", 6040]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.629416"], ["updated_at", "2022-02-18 16:26:32.629416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3070], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3070], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.631124"], ["updated_at", "2022-02-18 16:26:32.631124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3070], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3070], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.632821"], ["updated_at", "2022-02-18 16:26:32.632821"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3070], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3070], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.634751"], ["updated_at", "2022-02-18 16:26:32.634751"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f06b03137e8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.640239"], ["updated_at", "2022-02-18 16:26:32.640239"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3071], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3071], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.641940"], ["updated_at", "2022-02-18 16:26:32.641940"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3071], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3071], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.643489"], ["updated_at", "2022-02-18 16:26:32.643489"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3071], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3071], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.644984"], ["updated_at", "2022-02-18 16:26:32.644984"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 323)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.654884"], ["updated_at", "2022-02-18 16:26:32.654884"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3072], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3072], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.656786"], ["updated_at", "2022-02-18 16:26:32.656786"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3072], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3072], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.658397"], ["updated_at", "2022-02-18 16:26:32.658397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3072], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3072], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.659888"], ["updated_at", "2022-02-18 16:26:32.659888"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 498)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:26:32.669938"], ["updated_at", "2022-02-18 16:26:32.669938"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3073], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3073], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.671950"], ["updated_at", "2022-02-18 16:26:32.671950"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3073], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3073], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.673570"], ["updated_at", "2022-02-18 16:26:32.673570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3073], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3073], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:26:32.675120"], ["updated_at", "2022-02-18 16:26:32.675120"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:26:32 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6052"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6052], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6052]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 777)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.048764"], ["updated_at", "2022-02-18 16:38:54.048764"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3074], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3074], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.063300"], ["updated_at", "2022-02-18 16:38:54.063300"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3074], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3074], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.065480"], ["updated_at", "2022-02-18 16:38:54.065480"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3074], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3074], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.067343"], ["updated_at", "2022-02-18 16:38:54.067343"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa4861d3760 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.197554"], ["updated_at", "2022-02-18 16:38:54.197554"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3075], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3075], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.200030"], ["updated_at", "2022-02-18 16:38:54.200030"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3075], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3075], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.202142"], ["updated_at", "2022-02-18 16:38:54.202142"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3075], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3075], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.204306"], ["updated_at", "2022-02-18 16:38:54.204306"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 8017)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.7ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.6ms | ActiveRecord: 0.7ms | Allocations: 1225)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.234705"], ["updated_at", "2022-02-18 16:38:54.234705"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3076], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3076], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.236624"], ["updated_at", "2022-02-18 16:38:54.236624"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3076], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3076], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.238658"], ["updated_at", "2022-02-18 16:38:54.238658"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3076], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3076], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.240511"], ["updated_at", "2022-02-18 16:38:54.240511"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 653)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering invoice/index.json.jbuilder
  Rendered collection of invoice/_invoice.json.jbuilder [0 times] (Duration: 0.0ms | Allocations: 47)
  Rendered invoice/index.json.jbuilder (Duration: 0.8ms | Allocations: 525)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 1087)
  [1m[36mInvoice Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.263571"], ["updated_at", "2022-02-18 16:38:54.263571"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3077], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3077], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.265671"], ["updated_at", "2022-02-18 16:38:54.265671"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3077], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3077], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.267529"], ["updated_at", "2022-02-18 16:38:54.267529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3077], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3077], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.269320"], ["updated_at", "2022-02-18 16:38:54.269320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=id&filter_value=0" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"id", "filter_value"=>"0"}
Redirected to http://www.example.com/invoice/show/0
Completed 200 OK in 1ms (ActiveRecord: 0.0ms | Allocations: 345)
Started GET "/invoice/list?filter_type=id&filter_value=0" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"id", "filter_value"=>"0"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 349)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.282184"], ["updated_at", "2022-02-18 16:38:54.282184"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3078], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3078], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.284279"], ["updated_at", "2022-02-18 16:38:54.284279"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3078], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3078], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.285822"], ["updated_at", "2022-02-18 16:38:54.285822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3078], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3078], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.287566"], ["updated_at", "2022-02-18 16:38:54.287566"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?id=6067" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"id"=>"6067"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 693)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.299434"], ["updated_at", "2022-02-18 16:38:54.299434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3079], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3079], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.301585"], ["updated_at", "2022-02-18 16:38:54.301585"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3079], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3079], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.303333"], ["updated_at", "2022-02-18 16:38:54.303333"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3079], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3079], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.304820"], ["updated_at", "2022-02-18 16:38:54.304820"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa4861d3760 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.310953"], ["updated_at", "2022-02-18 16:38:54.310953"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3080], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3080], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.313011"], ["updated_at", "2022-02-18 16:38:54.313011"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3080], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3080], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.314752"], ["updated_at", "2022-02-18 16:38:54.314752"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3080], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3080], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.316384"], ["updated_at", "2022-02-18 16:38:54.316384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 338)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.325711"], ["updated_at", "2022-02-18 16:38:54.325711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3081], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3081], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.327721"], ["updated_at", "2022-02-18 16:38:54.327721"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3081], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3081], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.329384"], ["updated_at", "2022-02-18 16:38:54.329384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3081], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3081], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.331162"], ["updated_at", "2022-02-18 16:38:54.331162"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=6076" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6076"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6076], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms | Allocations: 924)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.343997"], ["updated_at", "2022-02-18 16:38:54.343997"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3082], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3082], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.346234"], ["updated_at", "2022-02-18 16:38:54.346234"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3082], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3082], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.348023"], ["updated_at", "2022-02-18 16:38:54.348023"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3082], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3082], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.350115"], ["updated_at", "2022-02-18 16:38:54.350115"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa4861d3760 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.360781"], ["updated_at", "2022-02-18 16:38:54.360781"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3083], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3083], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.363051"], ["updated_at", "2022-02-18 16:38:54.363051"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3083], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3083], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.365360"], ["updated_at", "2022-02-18 16:38:54.365360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3083], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3083], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.367616"], ["updated_at", "2022-02-18 16:38:54.367616"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 391)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.382318"], ["updated_at", "2022-02-18 16:38:54.382318"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3084], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3084], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.384641"], ["updated_at", "2022-02-18 16:38:54.384641"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3084], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3084], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.386470"], ["updated_at", "2022-02-18 16:38:54.386470"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3084], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3084], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.388356"], ["updated_at", "2022-02-18 16:38:54.388356"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3084], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1358)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.400755"], ["updated_at", "2022-02-18 16:38:54.400755"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3085], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3085], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.402796"], ["updated_at", "2022-02-18 16:38:54.402796"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3085], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3085], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.404752"], ["updated_at", "2022-02-18 16:38:54.404752"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3085], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3085], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.406344"], ["updated_at", "2022-02-18 16:38:54.406344"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3085], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3085], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:38:54.416148"], ["updated_at", "2022-02-18 16:38:54.416148"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 4000)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.422971"], ["updated_at", "2022-02-18 16:38:54.422971"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3086], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3086], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.425005"], ["updated_at", "2022-02-18 16:38:54.425005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3086], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3086], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.426778"], ["updated_at", "2022-02-18 16:38:54.426778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3086], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3086], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.428753"], ["updated_at", "2022-02-18 16:38:54.428753"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa4861d3760 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.435333"], ["updated_at", "2022-02-18 16:38:54.435333"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3087], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3087], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.437256"], ["updated_at", "2022-02-18 16:38:54.437256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3087], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3087], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.438983"], ["updated_at", "2022-02-18 16:38:54.438983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3087], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3087], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.440638"], ["updated_at", "2022-02-18 16:38:54.440638"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 404)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.451304"], ["updated_at", "2022-02-18 16:38:54.451304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3088], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3088], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.453184"], ["updated_at", "2022-02-18 16:38:54.453184"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3088], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3088], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.454822"], ["updated_at", "2022-02-18 16:38:54.454822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3088], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3088], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.456465"], ["updated_at", "2022-02-18 16:38:54.456465"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6098", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6098], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3088], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1618)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.469007"], ["updated_at", "2022-02-18 16:38:54.469007"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3089], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3089], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.470782"], ["updated_at", "2022-02-18 16:38:54.470782"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3089], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3089], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.472357"], ["updated_at", "2022-02-18 16:38:54.472357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3089], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3089], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.473962"], ["updated_at", "2022-02-18 16:38:54.473962"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6101", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6101], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3089], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:38:54.482897"], ["id", 6101]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.8ms | Allocations: 1924)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.487384"], ["updated_at", "2022-02-18 16:38:54.487384"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3090], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3090], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.489058"], ["updated_at", "2022-02-18 16:38:54.489058"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3090], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3090], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.490775"], ["updated_at", "2022-02-18 16:38:54.490775"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3090], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3090], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.492460"], ["updated_at", "2022-02-18 16:38:54.492460"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fa4861d3760 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.498707"], ["updated_at", "2022-02-18 16:38:54.498707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3091], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3091], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.500565"], ["updated_at", "2022-02-18 16:38:54.500565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3091], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3091], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.502165"], ["updated_at", "2022-02-18 16:38:54.502165"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3091], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3091], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.503863"], ["updated_at", "2022-02-18 16:38:54.503863"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 353)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.514256"], ["updated_at", "2022-02-18 16:38:54.514256"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3092], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3092], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.516136"], ["updated_at", "2022-02-18 16:38:54.516136"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3092], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3092], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.517668"], ["updated_at", "2022-02-18 16:38:54.517668"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3092], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3092], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.519259"], ["updated_at", "2022-02-18 16:38:54.519259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 498)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:38:54.530303"], ["updated_at", "2022-02-18 16:38:54.530303"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3093], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3093], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.532195"], ["updated_at", "2022-02-18 16:38:54.532195"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3093], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3093], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.533878"], ["updated_at", "2022-02-18 16:38:54.533878"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3093], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3093], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:38:54.535534"], ["updated_at", "2022-02-18 16:38:54.535534"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:38:54 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6113"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6113], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6113]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 759)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.530059"], ["updated_at", "2022-02-18 16:43:08.530059"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3094], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3094], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.543657"], ["updated_at", "2022-02-18 16:43:08.543657"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3094], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3094], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.545846"], ["updated_at", "2022-02-18 16:43:08.545846"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3094], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3094], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.547710"], ["updated_at", "2022-02-18 16:43:08.547710"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 545)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.672417"], ["updated_at", "2022-02-18 16:43:08.672417"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3095], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3095], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.674555"], ["updated_at", "2022-02-18 16:43:08.674555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3095], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3095], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.676501"], ["updated_at", "2022-02-18 16:43:08.676501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3095], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3095], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.678628"], ["updated_at", "2022-02-18 16:43:08.678628"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | Allocations: 4362)
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms | Allocations: 7909)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1219)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.708819"], ["updated_at", "2022-02-18 16:43:08.708819"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3096], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3096], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.710931"], ["updated_at", "2022-02-18 16:43:08.710931"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3096], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3096], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.712730"], ["updated_at", "2022-02-18 16:43:08.712730"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3096], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3096], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.714465"], ["updated_at", "2022-02-18 16:43:08.714465"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 635)
Started GET "/invoice/list?filter_type=data&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"data", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering invoice/index.json.jbuilder
  Rendered collection of invoice/_invoice.json.jbuilder [0 times] (Duration: 0.0ms | Allocations: 47)
  Rendered invoice/index.json.jbuilder (Duration: 0.7ms | Allocations: 525)
Completed 200 OK in 1ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 1078)
  [1m[36mInvoice Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.735908"], ["updated_at", "2022-02-18 16:43:08.735908"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3097], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3097], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.737852"], ["updated_at", "2022-02-18 16:43:08.737852"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3097], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3097], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.739512"], ["updated_at", "2022-02-18 16:43:08.739512"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3097], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3097], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.741369"], ["updated_at", "2022-02-18 16:43:08.741369"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.747925"], ["updated_at", "2022-02-18 16:43:08.747925"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3098], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3098], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.750222"], ["updated_at", "2022-02-18 16:43:08.750222"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3098], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3098], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.752142"], ["updated_at", "2022-02-18 16:43:08.752142"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3098], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3098], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.753829"], ["updated_at", "2022-02-18 16:43:08.753829"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 367)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.765073"], ["updated_at", "2022-02-18 16:43:08.765073"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3099], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3099], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.767310"], ["updated_at", "2022-02-18 16:43:08.767310"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3099], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3099], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.769172"], ["updated_at", "2022-02-18 16:43:08.769172"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3099], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3099], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.770824"], ["updated_at", "2022-02-18 16:43:08.770824"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show?id=6131" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6131"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6131], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 924)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.783374"], ["updated_at", "2022-02-18 16:43:08.783374"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3100], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3100], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.785424"], ["updated_at", "2022-02-18 16:43:08.785424"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3100], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3100], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.787205"], ["updated_at", "2022-02-18 16:43:08.787205"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3100], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3100], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.789045"], ["updated_at", "2022-02-18 16:43:08.789045"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.797532"], ["updated_at", "2022-02-18 16:43:08.797532"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3101], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3101], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.799641"], ["updated_at", "2022-02-18 16:43:08.799641"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3101], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3101], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.801349"], ["updated_at", "2022-02-18 16:43:08.801349"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3101], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3101], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.803015"], ["updated_at", "2022-02-18 16:43:08.803015"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 391)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.813377"], ["updated_at", "2022-02-18 16:43:08.813377"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3102], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3102], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.815828"], ["updated_at", "2022-02-18 16:43:08.815828"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3102], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3102], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.817641"], ["updated_at", "2022-02-18 16:43:08.817641"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3102], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3102], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.819338"], ["updated_at", "2022-02-18 16:43:08.819338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3102], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1364)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.831586"], ["updated_at", "2022-02-18 16:43:08.831586"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3103], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3103], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.833544"], ["updated_at", "2022-02-18 16:43:08.833544"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3103], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3103], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.835340"], ["updated_at", "2022-02-18 16:43:08.835340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3103], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3103], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.837114"], ["updated_at", "2022-02-18 16:43:08.837114"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3103], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3103], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:43:08.844880"], ["updated_at", "2022-02-18 16:43:08.844880"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 4009)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.851784"], ["updated_at", "2022-02-18 16:43:08.851784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3104], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3104], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.853835"], ["updated_at", "2022-02-18 16:43:08.853835"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3104], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3104], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.855619"], ["updated_at", "2022-02-18 16:43:08.855619"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3104], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3104], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.857175"], ["updated_at", "2022-02-18 16:43:08.857175"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.862556"], ["updated_at", "2022-02-18 16:43:08.862556"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3105], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3105], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.864430"], ["updated_at", "2022-02-18 16:43:08.864430"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3105], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3105], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.866075"], ["updated_at", "2022-02-18 16:43:08.866075"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3105], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3105], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.867685"], ["updated_at", "2022-02-18 16:43:08.867685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 371)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.877368"], ["updated_at", "2022-02-18 16:43:08.877368"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3106], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3106], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.879449"], ["updated_at", "2022-02-18 16:43:08.879449"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3106], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3106], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.881312"], ["updated_at", "2022-02-18 16:43:08.881312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3106], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3106], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.883384"], ["updated_at", "2022-02-18 16:43:08.883384"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6153", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6153], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3106], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1627)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.896106"], ["updated_at", "2022-02-18 16:43:08.896106"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3107], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3107], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.898084"], ["updated_at", "2022-02-18 16:43:08.898084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3107], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3107], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.899765"], ["updated_at", "2022-02-18 16:43:08.899765"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3107], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3107], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.901555"], ["updated_at", "2022-02-18 16:43:08.901555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6156", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6156], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3107], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:43:08.910018"], ["id", 6156]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 1.0ms | Allocations: 1909)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.915353"], ["updated_at", "2022-02-18 16:43:08.915353"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3108], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3108], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.917339"], ["updated_at", "2022-02-18 16:43:08.917339"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3108], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3108], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.919199"], ["updated_at", "2022-02-18 16:43:08.919199"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3108], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3108], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.920841"], ["updated_at", "2022-02-18 16:43:08.920841"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe6d3471d70 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.926827"], ["updated_at", "2022-02-18 16:43:08.926827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3109], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3109], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.928763"], ["updated_at", "2022-02-18 16:43:08.928763"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3109], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3109], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.930560"], ["updated_at", "2022-02-18 16:43:08.930560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3109], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3109], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.932360"], ["updated_at", "2022-02-18 16:43:08.932360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 344)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.941783"], ["updated_at", "2022-02-18 16:43:08.941783"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3110], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3110], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.943803"], ["updated_at", "2022-02-18 16:43:08.943803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3110], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3110], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.945923"], ["updated_at", "2022-02-18 16:43:08.945923"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3110], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3110], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.947865"], ["updated_at", "2022-02-18 16:43:08.947865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 507)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:43:08.958736"], ["updated_at", "2022-02-18 16:43:08.958736"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3111], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3111], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.960988"], ["updated_at", "2022-02-18 16:43:08.960988"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3111], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3111], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.962741"], ["updated_at", "2022-02-18 16:43:08.962741"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3111], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3111], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:43:08.964361"], ["updated_at", "2022-02-18 16:43:08.964361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:43:08 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6168"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6168], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6168]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.6ms | Allocations: 753)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.023712"], ["updated_at", "2022-02-18 16:44:17.023712"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3112], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3112], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.037394"], ["updated_at", "2022-02-18 16:44:17.037394"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3112], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3112], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.039674"], ["updated_at", "2022-02-18 16:44:17.039674"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3112], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3112], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.041324"], ["updated_at", "2022-02-18 16:44:17.041324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3246)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 515)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.179438"], ["updated_at", "2022-02-18 16:44:17.179438"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3113], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3113], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.181485"], ["updated_at", "2022-02-18 16:44:17.181485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3113], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3113], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.182963"], ["updated_at", "2022-02-18 16:44:17.182963"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3113], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3113], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.184316"], ["updated_at", "2022-02-18 16:44:17.184316"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | Allocations: 4362)
Completed 200 OK in 8ms (Views: 7.3ms | ActiveRecord: 0.0ms | Allocations: 7941)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (8.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 10ms (Views: 1.5ms | ActiveRecord: 8.2ms | Allocations: 1233)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.218776"], ["updated_at", "2022-02-18 16:44:17.218776"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3114], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3114], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.221508"], ["updated_at", "2022-02-18 16:44:17.221508"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3114], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3114], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.223976"], ["updated_at", "2022-02-18 16:44:17.223976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3114], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3114], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.225985"], ["updated_at", "2022-02-18 16:44:17.225985"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 731)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.4ms | Allocations: 756)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.245345"], ["updated_at", "2022-02-18 16:44:17.245345"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3115], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3115], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.247635"], ["updated_at", "2022-02-18 16:44:17.247635"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3115], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3115], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.249705"], ["updated_at", "2022-02-18 16:44:17.249705"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3115], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3115], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.251852"], ["updated_at", "2022-02-18 16:44:17.251852"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.257898"], ["updated_at", "2022-02-18 16:44:17.257898"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3116], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3116], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.259785"], ["updated_at", "2022-02-18 16:44:17.259785"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3116], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3116], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.261555"], ["updated_at", "2022-02-18 16:44:17.261555"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3116], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3116], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.263455"], ["updated_at", "2022-02-18 16:44:17.263455"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 364)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.274000"], ["updated_at", "2022-02-18 16:44:17.274000"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3117], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3117], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.276299"], ["updated_at", "2022-02-18 16:44:17.276299"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3117], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3117], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.278313"], ["updated_at", "2022-02-18 16:44:17.278313"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3117], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3117], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.280166"], ["updated_at", "2022-02-18 16:44:17.280166"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show?id=6186" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6186"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6186], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.2ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 927)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.292323"], ["updated_at", "2022-02-18 16:44:17.292323"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3118], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3118], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.294207"], ["updated_at", "2022-02-18 16:44:17.294207"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3118], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3118], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.296544"], ["updated_at", "2022-02-18 16:44:17.296544"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3118], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3118], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.299158"], ["updated_at", "2022-02-18 16:44:17.299158"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.307839"], ["updated_at", "2022-02-18 16:44:17.307839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3119], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3119], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.309654"], ["updated_at", "2022-02-18 16:44:17.309654"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3119], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3119], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.311360"], ["updated_at", "2022-02-18 16:44:17.311360"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3119], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3119], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.312904"], ["updated_at", "2022-02-18 16:44:17.312904"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 415)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.322342"], ["updated_at", "2022-02-18 16:44:17.322342"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3120], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3120], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.324206"], ["updated_at", "2022-02-18 16:44:17.324206"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3120], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3120], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.325847"], ["updated_at", "2022-02-18 16:44:17.325847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3120], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3120], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.327847"], ["updated_at", "2022-02-18 16:44:17.327847"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3120], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1345)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.339572"], ["updated_at", "2022-02-18 16:44:17.339572"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3121], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3121], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.341324"], ["updated_at", "2022-02-18 16:44:17.341324"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3121], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3121], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.342890"], ["updated_at", "2022-02-18 16:44:17.342890"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3121], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3121], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.344452"], ["updated_at", "2022-02-18 16:44:17.344452"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3121], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3121], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:44:17.351716"], ["updated_at", "2022-02-18 16:44:17.351716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.5ms | Allocations: 4005)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.358857"], ["updated_at", "2022-02-18 16:44:17.358857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3122], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3122], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.360718"], ["updated_at", "2022-02-18 16:44:17.360718"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3122], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3122], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.362276"], ["updated_at", "2022-02-18 16:44:17.362276"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3122], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3122], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.363788"], ["updated_at", "2022-02-18 16:44:17.363788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.369346"], ["updated_at", "2022-02-18 16:44:17.369346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3123], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3123], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.371137"], ["updated_at", "2022-02-18 16:44:17.371137"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3123], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3123], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.372716"], ["updated_at", "2022-02-18 16:44:17.372716"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3123], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3123], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.374187"], ["updated_at", "2022-02-18 16:44:17.374187"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 371)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.383118"], ["updated_at", "2022-02-18 16:44:17.383118"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3124], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3124], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.384840"], ["updated_at", "2022-02-18 16:44:17.384840"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3124], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3124], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.386363"], ["updated_at", "2022-02-18 16:44:17.386363"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3124], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3124], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.387858"], ["updated_at", "2022-02-18 16:44:17.387858"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6208", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6208], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3124], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1633)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.398615"], ["updated_at", "2022-02-18 16:44:17.398615"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3125], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3125], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.400711"], ["updated_at", "2022-02-18 16:44:17.400711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3125], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3125], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.402557"], ["updated_at", "2022-02-18 16:44:17.402557"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3125], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3125], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.404077"], ["updated_at", "2022-02-18 16:44:17.404077"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6211", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6211], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3125], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.2ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:44:17.411708"], ["id", 6211]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.6ms | Allocations: 1918)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.416196"], ["updated_at", "2022-02-18 16:44:17.416196"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3126], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3126], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.417981"], ["updated_at", "2022-02-18 16:44:17.417981"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3126], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3126], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.419894"], ["updated_at", "2022-02-18 16:44:17.419894"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3126], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3126], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.421604"], ["updated_at", "2022-02-18 16:44:17.421604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fee04a29438 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.426957"], ["updated_at", "2022-02-18 16:44:17.426957"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3127], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3127], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.428692"], ["updated_at", "2022-02-18 16:44:17.428692"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3127], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3127], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.430599"], ["updated_at", "2022-02-18 16:44:17.430599"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3127], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3127], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.432330"], ["updated_at", "2022-02-18 16:44:17.432330"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 326)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.441980"], ["updated_at", "2022-02-18 16:44:17.441980"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3128], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3128], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.443862"], ["updated_at", "2022-02-18 16:44:17.443862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3128], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3128], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.445560"], ["updated_at", "2022-02-18 16:44:17.445560"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3128], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3128], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.447362"], ["updated_at", "2022-02-18 16:44:17.447362"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 507)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:44:17.458001"], ["updated_at", "2022-02-18 16:44:17.458001"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3129], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3129], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.459857"], ["updated_at", "2022-02-18 16:44:17.459857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3129], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3129], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.461474"], ["updated_at", "2022-02-18 16:44:17.461474"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3129], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3129], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:44:17.462981"], ["updated_at", "2022-02-18 16:44:17.462981"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:44:17 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6223"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6223], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6223]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 765)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.588832"], ["updated_at", "2022-02-18 16:45:19.588832"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3130], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3130], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.603306"], ["updated_at", "2022-02-18 16:45:19.603306"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3130], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3130], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.606783"], ["updated_at", "2022-02-18 16:45:19.606783"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3130], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3130], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.608540"], ["updated_at", "2022-02-18 16:45:19.608540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 527)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.732395"], ["updated_at", "2022-02-18 16:45:19.732395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3131], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3131], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.734613"], ["updated_at", "2022-02-18 16:45:19.734613"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3131], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3131], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.736628"], ["updated_at", "2022-02-18 16:45:19.736628"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3131], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3131], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.738603"], ["updated_at", "2022-02-18 16:45:19.738603"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 11.2ms | ActiveRecord: 0.0ms | Allocations: 7933)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.6ms | Allocations: 1224)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.770385"], ["updated_at", "2022-02-18 16:45:19.770385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3132], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3132], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.772375"], ["updated_at", "2022-02-18 16:45:19.772375"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3132], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3132], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.774322"], ["updated_at", "2022-02-18 16:45:19.774322"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3132], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3132], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.776068"], ["updated_at", "2022-02-18 16:45:19.776068"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 725)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.5ms | Allocations: 732)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.793124"], ["updated_at", "2022-02-18 16:45:19.793124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3133], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3133], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.795266"], ["updated_at", "2022-02-18 16:45:19.795266"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3133], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3133], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.797131"], ["updated_at", "2022-02-18 16:45:19.797131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3133], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3133], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.799007"], ["updated_at", "2022-02-18 16:45:19.799007"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#show as JSON
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 349)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.809621"], ["updated_at", "2022-02-18 16:45:19.809621"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3134], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3134], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.813276"], ["updated_at", "2022-02-18 16:45:19.813276"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3134], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3134], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.815660"], ["updated_at", "2022-02-18 16:45:19.815660"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3134], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3134], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.818286"], ["updated_at", "2022-02-18 16:45:19.818286"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.3ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 355)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.833916"], ["updated_at", "2022-02-18 16:45:19.833916"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3135], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3135], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.836387"], ["updated_at", "2022-02-18 16:45:19.836387"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3135], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3135], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.838316"], ["updated_at", "2022-02-18 16:45:19.838316"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3135], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3135], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.840104"], ["updated_at", "2022-02-18 16:45:19.840104"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=6241" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6241"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6241], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.2ms | Allocations: 939)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.852212"], ["updated_at", "2022-02-18 16:45:19.852212"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3136], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3136], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.854393"], ["updated_at", "2022-02-18 16:45:19.854393"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3136], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3136], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.856163"], ["updated_at", "2022-02-18 16:45:19.856163"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3136], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3136], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.857828"], ["updated_at", "2022-02-18 16:45:19.857828"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.866297"], ["updated_at", "2022-02-18 16:45:19.866297"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3137], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3137], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.868661"], ["updated_at", "2022-02-18 16:45:19.868661"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3137], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3137], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.870573"], ["updated_at", "2022-02-18 16:45:19.870573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3137], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3137], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.872144"], ["updated_at", "2022-02-18 16:45:19.872144"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 394)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.881715"], ["updated_at", "2022-02-18 16:45:19.881715"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3138], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3138], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.884167"], ["updated_at", "2022-02-18 16:45:19.884167"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3138], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3138], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.886397"], ["updated_at", "2022-02-18 16:45:19.886397"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3138], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3138], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.887977"], ["updated_at", "2022-02-18 16:45:19.887977"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3138], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.3ms | Allocations: 1357)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.898722"], ["updated_at", "2022-02-18 16:45:19.898722"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3139], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3139], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.900585"], ["updated_at", "2022-02-18 16:45:19.900585"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3139], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3139], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.902116"], ["updated_at", "2022-02-18 16:45:19.902116"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3139], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3139], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.903659"], ["updated_at", "2022-02-18 16:45:19.903659"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3139], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3139], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:45:19.910902"], ["updated_at", "2022-02-18 16:45:19.910902"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4006)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.918387"], ["updated_at", "2022-02-18 16:45:19.918387"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3140], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3140], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.920330"], ["updated_at", "2022-02-18 16:45:19.920330"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3140], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3140], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.921890"], ["updated_at", "2022-02-18 16:45:19.921890"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3140], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3140], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.923396"], ["updated_at", "2022-02-18 16:45:19.923396"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.928769"], ["updated_at", "2022-02-18 16:45:19.928769"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3141], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3141], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.930751"], ["updated_at", "2022-02-18 16:45:19.930751"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3141], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3141], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.932724"], ["updated_at", "2022-02-18 16:45:19.932724"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3141], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3141], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.934421"], ["updated_at", "2022-02-18 16:45:19.934421"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 386)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.944746"], ["updated_at", "2022-02-18 16:45:19.944746"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3142], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3142], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.946576"], ["updated_at", "2022-02-18 16:45:19.946576"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3142], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3142], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.948149"], ["updated_at", "2022-02-18 16:45:19.948149"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3142], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3142], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.949778"], ["updated_at", "2022-02-18 16:45:19.949778"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6263", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6263], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3142], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.4ms | Allocations: 1645)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.961525"], ["updated_at", "2022-02-18 16:45:19.961525"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3143], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3143], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.963479"], ["updated_at", "2022-02-18 16:45:19.963479"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3143], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3143], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.965237"], ["updated_at", "2022-02-18 16:45:19.965237"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3143], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3143], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.966891"], ["updated_at", "2022-02-18 16:45:19.966891"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6266", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6266], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3143], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:45:19.976867"], ["id", 6266]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.9ms | Allocations: 1915)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.981540"], ["updated_at", "2022-02-18 16:45:19.981540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3144], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3144], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.983603"], ["updated_at", "2022-02-18 16:45:19.983603"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3144], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3144], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.985781"], ["updated_at", "2022-02-18 16:45:19.985781"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3144], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3144], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.987528"], ["updated_at", "2022-02-18 16:45:19.987528"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:45:19 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fe1b86788c8 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:19.992888"], ["updated_at", "2022-02-18 16:45:19.992888"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3145], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3145], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.994709"], ["updated_at", "2022-02-18 16:45:19.994709"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3145], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3145], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.996519"], ["updated_at", "2022-02-18 16:45:19.996519"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3145], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3145], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:19.998096"], ["updated_at", "2022-02-18 16:45:19.998096"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 344)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:20.008808"], ["updated_at", "2022-02-18 16:45:20.008808"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3146], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3146], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.010732"], ["updated_at", "2022-02-18 16:45:20.010732"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3146], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3146], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.012501"], ["updated_at", "2022-02-18 16:45:20.012501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3146], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3146], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.014040"], ["updated_at", "2022-02-18 16:45:20.014040"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 501)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:45:20.024575"], ["updated_at", "2022-02-18 16:45:20.024575"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3147], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3147], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.026377"], ["updated_at", "2022-02-18 16:45:20.026377"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3147], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3147], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.027993"], ["updated_at", "2022-02-18 16:45:20.027993"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3147], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3147], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:45:20.029581"], ["updated_at", "2022-02-18 16:45:20.029581"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:45:20 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6278"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6278], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6278]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 762)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:10.867542"], ["updated_at", "2022-02-18 16:51:10.867542"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3148], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3148], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:10.881237"], ["updated_at", "2022-02-18 16:51:10.881237"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3148], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3148], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:10.883547"], ["updated_at", "2022-02-18 16:51:10.883547"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3148], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3148], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:10.885105"], ["updated_at", "2022-02-18 16:51:10.885105"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:51:10 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 509)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.010434"], ["updated_at", "2022-02-18 16:51:11.010434"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3149], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3149], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.012757"], ["updated_at", "2022-02-18 16:51:11.012757"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3149], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3149], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.014914"], ["updated_at", "2022-02-18 16:51:11.014914"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3149], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3149], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.016883"], ["updated_at", "2022-02-18 16:51:11.016883"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 4.7ms | Allocations: 4362)
Completed 200 OK in 10ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 7925)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1209)
  [1m[36mInvoice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.045354"], ["updated_at", "2022-02-18 16:51:11.045354"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3150], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3150], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.047361"], ["updated_at", "2022-02-18 16:51:11.047361"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3150], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3150], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.049204"], ["updated_at", "2022-02-18 16:51:11.049204"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3150], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3150], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.050944"], ["updated_at", "2022-02-18 16:51:11.050944"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 734)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.3ms | Allocations: 744)
  [1m[36mInvoice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.065772"], ["updated_at", "2022-02-18 16:51:11.065772"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3151], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3151], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.067787"], ["updated_at", "2022-02-18 16:51:11.067787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3151], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3151], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.069633"], ["updated_at", "2022-02-18 16:51:11.069633"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3151], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3151], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.071289"], ["updated_at", "2022-02-18 16:51:11.071289"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as JSON
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.079202"], ["updated_at", "2022-02-18 16:51:11.079202"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3152], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3152], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.081234"], ["updated_at", "2022-02-18 16:51:11.081234"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3152], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3152], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.083029"], ["updated_at", "2022-02-18 16:51:11.083029"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3152], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3152], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.084933"], ["updated_at", "2022-02-18 16:51:11.084933"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 364)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as JSON
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 335)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.096959"], ["updated_at", "2022-02-18 16:51:11.096959"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3153], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3153], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.099110"], ["updated_at", "2022-02-18 16:51:11.099110"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3153], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3153], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.101141"], ["updated_at", "2022-02-18 16:51:11.101141"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3153], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3153], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.102698"], ["updated_at", "2022-02-18 16:51:11.102698"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=6296" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6296"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6296], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 951)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#show as JSON
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 328)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.122054"], ["updated_at", "2022-02-18 16:51:11.122054"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3154], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3154], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.124057"], ["updated_at", "2022-02-18 16:51:11.124057"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3154], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3154], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.126033"], ["updated_at", "2022-02-18 16:51:11.126033"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3154], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3154], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.127811"], ["updated_at", "2022-02-18 16:51:11.127811"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.136466"], ["updated_at", "2022-02-18 16:51:11.136466"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3155], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3155], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.138704"], ["updated_at", "2022-02-18 16:51:11.138704"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3155], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3155], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.140803"], ["updated_at", "2022-02-18 16:51:11.140803"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3155], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3155], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.142485"], ["updated_at", "2022-02-18 16:51:11.142485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 397)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.151737"], ["updated_at", "2022-02-18 16:51:11.151737"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3156], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3156], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.153806"], ["updated_at", "2022-02-18 16:51:11.153806"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3156], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3156], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.155685"], ["updated_at", "2022-02-18 16:51:11.155685"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3156], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3156], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.157837"], ["updated_at", "2022-02-18 16:51:11.157837"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3156], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1330)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.169906"], ["updated_at", "2022-02-18 16:51:11.169906"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3157], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3157], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.172471"], ["updated_at", "2022-02-18 16:51:11.172471"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3157], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3157], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.174552"], ["updated_at", "2022-02-18 16:51:11.174552"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3157], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3157], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.176200"], ["updated_at", "2022-02-18 16:51:11.176200"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3157], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3157], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:51:11.183614"], ["updated_at", "2022-02-18 16:51:11.183614"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.7ms | Allocations: 3994)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.191040"], ["updated_at", "2022-02-18 16:51:11.191040"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3158], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3158], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.192943"], ["updated_at", "2022-02-18 16:51:11.192943"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3158], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3158], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.194434"], ["updated_at", "2022-02-18 16:51:11.194434"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3158], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3158], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.195946"], ["updated_at", "2022-02-18 16:51:11.195946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.201423"], ["updated_at", "2022-02-18 16:51:11.201423"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3159], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3159], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.203345"], ["updated_at", "2022-02-18 16:51:11.203345"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3159], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3159], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.205299"], ["updated_at", "2022-02-18 16:51:11.205299"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3159], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3159], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.207025"], ["updated_at", "2022-02-18 16:51:11.207025"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 380)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.215977"], ["updated_at", "2022-02-18 16:51:11.215977"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3160], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3160], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.217910"], ["updated_at", "2022-02-18 16:51:11.217910"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3160], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3160], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.219908"], ["updated_at", "2022-02-18 16:51:11.219908"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3160], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3160], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.221772"], ["updated_at", "2022-02-18 16:51:11.221772"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6318", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6318], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3160], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.7ms | Allocations: 1615)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.233304"], ["updated_at", "2022-02-18 16:51:11.233304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3161], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3161], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.235198"], ["updated_at", "2022-02-18 16:51:11.235198"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3161], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3161], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.236921"], ["updated_at", "2022-02-18 16:51:11.236921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3161], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3161], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.238781"], ["updated_at", "2022-02-18 16:51:11.238781"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6321", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6321], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3161], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:51:11.246741"], ["id", 6321]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1921)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.252058"], ["updated_at", "2022-02-18 16:51:11.252058"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3162], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3162], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.254498"], ["updated_at", "2022-02-18 16:51:11.254498"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3162], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3162], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.256482"], ["updated_at", "2022-02-18 16:51:11.256482"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3162], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3162], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.258155"], ["updated_at", "2022-02-18 16:51:11.258155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f4e19b6c1f0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.263822"], ["updated_at", "2022-02-18 16:51:11.263822"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3163], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3163], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.265740"], ["updated_at", "2022-02-18 16:51:11.265740"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3163], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3163], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.267693"], ["updated_at", "2022-02-18 16:51:11.267693"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3163], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3163], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.269388"], ["updated_at", "2022-02-18 16:51:11.269388"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 341)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.279327"], ["updated_at", "2022-02-18 16:51:11.279327"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3164], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3164], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.281570"], ["updated_at", "2022-02-18 16:51:11.281570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3164], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3164], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.283481"], ["updated_at", "2022-02-18 16:51:11.283481"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3164], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3164], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.285071"], ["updated_at", "2022-02-18 16:51:11.285071"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 522)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:51:11.294927"], ["updated_at", "2022-02-18 16:51:11.294927"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3165], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3165], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.296691"], ["updated_at", "2022-02-18 16:51:11.296691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3165], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3165], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.298244"], ["updated_at", "2022-02-18 16:51:11.298244"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3165], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3165], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:51:11.299857"], ["updated_at", "2022-02-18 16:51:11.299857"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:51:11 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6333"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6333], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.1ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6333]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.5ms | Allocations: 744)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.219172"], ["updated_at", "2022-02-18 16:52:10.219172"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3166], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3166], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.232534"], ["updated_at", "2022-02-18 16:52:10.232534"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3166], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3166], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.234693"], ["updated_at", "2022-02-18 16:52:10.234693"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3166], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3166], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.236340"], ["updated_at", "2022-02-18 16:52:10.236340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3253)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 548)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.362186"], ["updated_at", "2022-02-18 16:52:10.362186"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3167], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3167], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.364309"], ["updated_at", "2022-02-18 16:52:10.364309"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3167], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3167], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.366036"], ["updated_at", "2022-02-18 16:52:10.366036"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3167], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3167], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.367905"], ["updated_at", "2022-02-18 16:52:10.367905"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 3.9ms | Allocations: 4362)
Completed 200 OK in 9ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 7924)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.8ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 3ms (Views: 1.2ms | ActiveRecord: 0.8ms | Allocations: 1224)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.397445"], ["updated_at", "2022-02-18 16:52:10.397445"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3168], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3168], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.399436"], ["updated_at", "2022-02-18 16:52:10.399436"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3168], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3168], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.401467"], ["updated_at", "2022-02-18 16:52:10.401467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3168], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3168], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.403357"], ["updated_at", "2022-02-18 16:52:10.403357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 743)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.4ms | Allocations: 744)
  [1m[36mInvoice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.419821"], ["updated_at", "2022-02-18 16:52:10.419821"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3169], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3169], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.422338"], ["updated_at", "2022-02-18 16:52:10.422338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3169], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3169], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.424439"], ["updated_at", "2022-02-18 16:52:10.424439"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3169], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3169], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.426126"], ["updated_at", "2022-02-18 16:52:10.426126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as JSON
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 337)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.433784"], ["updated_at", "2022-02-18 16:52:10.433784"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3170], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3170], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.436108"], ["updated_at", "2022-02-18 16:52:10.436108"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3170], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3170], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.438104"], ["updated_at", "2022-02-18 16:52:10.438104"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3170], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3170], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.440009"], ["updated_at", "2022-02-18 16:52:10.440009"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 343)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as JSON
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 347)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.452791"], ["updated_at", "2022-02-18 16:52:10.452791"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3171], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3171], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.455046"], ["updated_at", "2022-02-18 16:52:10.455046"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3171], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3171], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.457313"], ["updated_at", "2022-02-18 16:52:10.457313"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3171], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3171], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.459067"], ["updated_at", "2022-02-18 16:52:10.459067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show?id=6351" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6351"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6351], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.2ms | Allocations: 933)
Started GET "/invoice/show?id=6351" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#show as JSON
  Parameters: {"id"=>"6351"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6351], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 435)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.478518"], ["updated_at", "2022-02-18 16:52:10.478518"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3172], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3172], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.480964"], ["updated_at", "2022-02-18 16:52:10.480964"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3172], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3172], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.482909"], ["updated_at", "2022-02-18 16:52:10.482909"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3172], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3172], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.484678"], ["updated_at", "2022-02-18 16:52:10.484678"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.493081"], ["updated_at", "2022-02-18 16:52:10.493081"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3173], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3173], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.494987"], ["updated_at", "2022-02-18 16:52:10.494987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3173], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3173], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.496707"], ["updated_at", "2022-02-18 16:52:10.496707"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3173], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3173], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.498302"], ["updated_at", "2022-02-18 16:52:10.498302"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 400)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.507729"], ["updated_at", "2022-02-18 16:52:10.507729"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3174], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3174], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.509909"], ["updated_at", "2022-02-18 16:52:10.509909"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3174], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3174], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.511865"], ["updated_at", "2022-02-18 16:52:10.511865"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3174], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3174], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.513467"], ["updated_at", "2022-02-18 16:52:10.513467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3174], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.4ms | Allocations: 1339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.526015"], ["updated_at", "2022-02-18 16:52:10.526015"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3175], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3175], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.528155"], ["updated_at", "2022-02-18 16:52:10.528155"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3175], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3175], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.529900"], ["updated_at", "2022-02-18 16:52:10.529900"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3175], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3175], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.531554"], ["updated_at", "2022-02-18 16:52:10.531554"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3175], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3175], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:52:10.539175"], ["updated_at", "2022-02-18 16:52:10.539175"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 0.6ms | Allocations: 4008)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.546692"], ["updated_at", "2022-02-18 16:52:10.546692"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3176], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3176], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.548580"], ["updated_at", "2022-02-18 16:52:10.548580"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3176], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3176], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.550273"], ["updated_at", "2022-02-18 16:52:10.550273"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3176], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3176], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.551889"], ["updated_at", "2022-02-18 16:52:10.551889"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.558135"], ["updated_at", "2022-02-18 16:52:10.558135"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3177], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3177], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.560124"], ["updated_at", "2022-02-18 16:52:10.560124"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3177], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3177], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.561720"], ["updated_at", "2022-02-18 16:52:10.561720"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3177], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3177], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.563291"], ["updated_at", "2022-02-18 16:52:10.563291"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 386)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.572936"], ["updated_at", "2022-02-18 16:52:10.572936"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3178], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3178], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.574957"], ["updated_at", "2022-02-18 16:52:10.574957"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3178], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3178], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.576600"], ["updated_at", "2022-02-18 16:52:10.576600"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3178], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3178], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.578140"], ["updated_at", "2022-02-18 16:52:10.578140"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6373", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6373], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3178], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1624)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.590298"], ["updated_at", "2022-02-18 16:52:10.590298"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3179], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3179], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.592347"], ["updated_at", "2022-02-18 16:52:10.592347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3179], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3179], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.594055"], ["updated_at", "2022-02-18 16:52:10.594055"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3179], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3179], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.595682"], ["updated_at", "2022-02-18 16:52:10.595682"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6376", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6376], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3179], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:52:10.604721"], ["id", 6376]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 5ms (ActiveRecord: 1.1ms | Allocations: 1933)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.612067"], ["updated_at", "2022-02-18 16:52:10.612067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3180], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3180], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.614907"], ["updated_at", "2022-02-18 16:52:10.614907"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3180], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3180], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.616950"], ["updated_at", "2022-02-18 16:52:10.616950"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3180], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3180], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.618746"], ["updated_at", "2022-02-18 16:52:10.618746"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007f9197595f30 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.626041"], ["updated_at", "2022-02-18 16:52:10.626041"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3181], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3181], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.629701"], ["updated_at", "2022-02-18 16:52:10.629701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3181], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3181], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.632168"], ["updated_at", "2022-02-18 16:52:10.632168"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3181], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3181], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.633979"], ["updated_at", "2022-02-18 16:52:10.633979"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms | Allocations: 329)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.647238"], ["updated_at", "2022-02-18 16:52:10.647238"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3182], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3182], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.649420"], ["updated_at", "2022-02-18 16:52:10.649420"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3182], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3182], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.651375"], ["updated_at", "2022-02-18 16:52:10.651375"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3182], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3182], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.653107"], ["updated_at", "2022-02-18 16:52:10.653107"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.3ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.3ms | Allocations: 519)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:52:10.666676"], ["updated_at", "2022-02-18 16:52:10.666676"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3183], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3183], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.669067"], ["updated_at", "2022-02-18 16:52:10.669067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3183], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3183], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.670983"], ["updated_at", "2022-02-18 16:52:10.670983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3183], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3183], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:52:10.673171"], ["updated_at", "2022-02-18 16:52:10.673171"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:52:10 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6388"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6388], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6388]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 762)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.193501"], ["updated_at", "2022-02-18 16:54:23.193501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3184], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3184], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.207392"], ["updated_at", "2022-02-18 16:54:23.207392"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3184], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3184], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.209493"], ["updated_at", "2022-02-18 16:54:23.209493"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3184], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3184], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.211257"], ["updated_at", "2022-02-18 16:54:23.211257"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 6ms (ActiveRecord: 0.0ms | Allocations: 3247)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as JSON
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 539)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.337991"], ["updated_at", "2022-02-18 16:54:23.337991"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3185], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3185], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.340570"], ["updated_at", "2022-02-18 16:54:23.340570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3185], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3185], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.342673"], ["updated_at", "2022-02-18 16:54:23.342673"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3185], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3185], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.344603"], ["updated_at", "2022-02-18 16:54:23.344603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 2ms (ActiveRecord: 0.2ms | Allocations: 977)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.8ms | Allocations: 388)
  Rendered layout layouts/application.html.erb (Duration: 5.9ms | Allocations: 4362)
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.0ms | Allocations: 7933)
Started GET "/invoice/list" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as JSON
  [1m[36mInvoice Load (0.6ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms | Allocations: 1236)
  [1m[36mInvoice Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices"[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" ORDER BY created_at DESC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.375343"], ["updated_at", "2022-02-18 16:54:23.375343"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3186], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3186], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.377285"], ["updated_at", "2022-02-18 16:54:23.377285"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3186], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3186], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.379087"], ["updated_at", "2022-02-18 16:54:23.379087"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3186], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3186], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.380869"], ["updated_at", "2022-02-18 16:54:23.380869"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as HTML
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  Rendering layout layouts/application.html.erb
  Rendering invoice/index.html.erb within layouts/application
  Rendered invoice/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 6)
  Rendered layout layouts/application.html.erb (Duration: 0.3ms | Allocations: 189)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 725)
Started GET "/invoice/list?filter_type=date&filter_value=2021-06-01+00%3A00%3A00+UTC" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#index as JSON
  Parameters: {"filter_type"=>"date", "filter_value"=>"2021-06-01 00:00:00 UTC"}
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 719)
  [1m[36mInvoice Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."date" = $1[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."date" = $1 ORDER BY created_at DESC[0m  [["date", "2021-06-01 00:00:00"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.397075"], ["updated_at", "2022-02-18 16:54:23.397075"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3187], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3187], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.399038"], ["updated_at", "2022-02-18 16:54:23.399038"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3187], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3187], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.400913"], ["updated_at", "2022-02-18 16:54:23.400913"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3187], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3187], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.402535"], ["updated_at", "2022-02-18 16:54:23.402535"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as JSON
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 343)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.410346"], ["updated_at", "2022-02-18 16:54:23.410346"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3188], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3188], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.412320"], ["updated_at", "2022-02-18 16:54:23.412320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3188], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3188], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.413839"], ["updated_at", "2022-02-18 16:54:23.413839"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3188], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3188], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.415357"], ["updated_at", "2022-02-18 16:54:23.415357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 349)
Started GET "/invoice/show" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as JSON
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 347)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.427357"], ["updated_at", "2022-02-18 16:54:23.427357"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3189], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3189], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.429220"], ["updated_at", "2022-02-18 16:54:23.429220"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3189], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3189], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.430842"], ["updated_at", "2022-02-18 16:54:23.430842"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3189], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3189], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.432479"], ["updated_at", "2022-02-18 16:54:23.432479"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started GET "/invoice/show?id=6406" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as HTML
  Parameters: {"id"=>"6406"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6406], ["LIMIT", 1]]
  Rendering layout layouts/application.html.erb
  Rendering invoice/show.html.erb within layouts/application
  Rendered invoice/show.html.erb within layouts/application (Duration: 0.3ms | Allocations: 161)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | Allocations: 345)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 1187)
Started GET "/invoice/show?id=6406" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#show as JSON
  Parameters: {"id"=>"6406"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6406], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 588)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.446239"], ["updated_at", "2022-02-18 16:54:23.446239"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3190], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3190], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.448121"], ["updated_at", "2022-02-18 16:54:23.448121"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3190], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3190], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.449611"], ["updated_at", "2022-02-18 16:54:23.449611"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3190], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.1ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3190], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.451052"], ["updated_at", "2022-02-18 16:54:23.451052"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 314)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.459811"], ["updated_at", "2022-02-18 16:54:23.459811"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3191], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3191], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.461720"], ["updated_at", "2022-02-18 16:54:23.461720"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3191], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3191], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.463406"], ["updated_at", "2022-02-18 16:54:23.463406"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3191], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3191], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.464901"], ["updated_at", "2022-02-18 16:54:23.464901"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#create as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 379)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.473983"], ["updated_at", "2022-02-18 16:54:23.473983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3192], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3192], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.475976"], ["updated_at", "2022-02-18 16:54:23.475976"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3192], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3192], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.477730"], ["updated_at", "2022-02-18 16:54:23.477730"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3192], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3192], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.479356"], ["updated_at", "2022-02-18 16:54:23.479356"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3192], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.5ms | Allocations: 1327)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.491131"], ["updated_at", "2022-02-18 16:54:23.491131"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3193], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3193], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.493086"], ["updated_at", "2022-02-18 16:54:23.493086"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3193], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3193], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.494908"], ["updated_at", "2022-02-18 16:54:23.494908"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3193], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3193], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.496467"], ["updated_at", "2022-02-18 16:54:23.496467"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/create" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#create as HTML
  Parameters: {"number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3193], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3193], ["number", "123"], ["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["created_at", "2022-02-18 16:54:23.503407"], ["updated_at", "2022-02-18 16:54:23.503407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 4ms (ActiveRecord: 0.6ms | Allocations: 4012)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.510079"], ["updated_at", "2022-02-18 16:54:23.510079"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3194], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3194], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.512048"], ["updated_at", "2022-02-18 16:54:23.512048"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3194], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3194], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.513604"], ["updated_at", "2022-02-18 16:54:23.513604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3194], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3194], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.515045"], ["updated_at", "2022-02-18 16:54:23.515045"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.521292"], ["updated_at", "2022-02-18 16:54:23.521292"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3195], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3195], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.523030"], ["updated_at", "2022-02-18 16:54:23.523030"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3195], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3195], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.524808"], ["updated_at", "2022-02-18 16:54:23.524808"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3195], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3195], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.526741"], ["updated_at", "2022-02-18 16:54:23.526741"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 495)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#update as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 365)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.536516"], ["updated_at", "2022-02-18 16:54:23.536516"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3196], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3196], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.538441"], ["updated_at", "2022-02-18 16:54:23.538441"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3196], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3196], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.540191"], ["updated_at", "2022-02-18 16:54:23.540191"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3196], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3196], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.541797"], ["updated_at", "2022-02-18 16:54:23.541797"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6428", "number"=>"123", "date"=>"aaa", "company"=>"cp", "payer"=>"p", "value"=>"qq", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6428], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3196], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 3ms (ActiveRecord: 0.6ms | Allocations: 1609)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.554080"], ["updated_at", "2022-02-18 16:54:23.554080"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3197], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3197], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.555902"], ["updated_at", "2022-02-18 16:54:23.555902"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3197], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3197], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.557549"], ["updated_at", "2022-02-18 16:54:23.557549"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3197], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3197], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.559342"], ["updated_at", "2022-02-18 16:54:23.559342"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started POST "/invoice/update" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#update as HTML
  Parameters: {"id"=>"6431", "number"=>"123", "date"=>"2022-05-10", "company"=>"cp", "payer"=>"p", "value"=>"15", "emails"=>"xx"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6431], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3197], ["LIMIT", 1]]
  [1m[36mInvoice Update (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "date" = $1, "company" = $2, "payer" = $3, "value" = $4, "emails" = $5, "updated_at" = $6 WHERE "invoices"."id" = $7[0m  [["date", "2022-05-10 00:00:00"], ["company", "cp"], ["payer", "p"], ["value", 15.0], ["emails", "xx"], ["updated_at", "2022-02-18 16:54:23.567751"], ["id", 6431]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 3ms (ActiveRecord: 0.8ms | Allocations: 1927)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.572570"], ["updated_at", "2022-02-18 16:54:23.572570"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3198], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3198], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.574405"], ["updated_at", "2022-02-18 16:54:23.574405"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3198], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3198], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.576067"], ["updated_at", "2022-02-18 16:54:23.576067"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3198], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3198], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.577968"], ["updated_at", "2022-02-18 16:54:23.577968"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/
Filter chain halted as #<Proc:0x00007fd4eacfbef0 /home/rodrigo.castro/rodrigo/husky/app/controllers/invoice_controller.rb:3> rendered or redirected
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 297)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.583597"], ["updated_at", "2022-02-18 16:54:23.583597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3199], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3199], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.585411"], ["updated_at", "2022-02-18 16:54:23.585411"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3199], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3199], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.587015"], ["updated_at", "2022-02-18 16:54:23.587015"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3199], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3199], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.588630"], ["updated_at", "2022-02-18 16:54:23.588630"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#delete as HTML
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 335)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.598422"], ["updated_at", "2022-02-18 16:54:23.598422"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3200], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3200], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.600922"], ["updated_at", "2022-02-18 16:54:23.600922"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3200], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3200], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.603621"], ["updated_at", "2022-02-18 16:54:23.603621"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3200], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3200], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.606481"], ["updated_at", "2022-02-18 16:54:23.606481"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.1ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"0"}
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 0], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list/
Completed 422 Unprocessable Entity in 1ms (ActiveRecord: 0.2ms | Allocations: 519)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "token_main", "token_temp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "email@email.com"], ["token_main", "[FILTERED]"], ["token_temp", "[FILTERED]"], ["created_at", "2022-02-18 16:54:23.617559"], ["updated_at", "2022-02-18 16:54:23.617559"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3201], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3201], ["number", "123"], ["date", "2021-06-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.619523"], ["updated_at", "2022-02-18 16:54:23.619523"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3201], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3201], ["number", "123456"], ["date", "2021-07-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.621290"], ["updated_at", "2022-02-18 16:54:23.621290"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3201], ["LIMIT", 1]]
  [1m[36mInvoice Create (0.2ms)[0m  [1m[32mINSERT INTO "invoices" ("user_id", "number", "date", "company", "payer", "value", "emails", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["user_id", 3201], ["number", "123789"], ["date", "2021-08-01 00:00:00"], ["company", "companhia"], ["payer", "fulano"], ["value", 12.8], ["emails", "email1@email.com;email2@email.com"], ["created_at", "2022-02-18 16:54:23.622845"], ["updated_at", "2022-02-18 16:54:23.622845"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) LIMIT $2[0m  [["email", "email1@email.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."token_temp" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Started GET "/user/login?email=email1%40email.com&token=[FILTERED]" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by UserController#login as HTML
  Parameters: {"email"=>"email1@email.com", "token"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."token_main" = $1 LIMIT $2[0m  [["token_main", "[FILTERED]"], ["LIMIT", 1]]
Redirected to http://www.example.com/invoice/list
Completed 200 OK in 1ms (ActiveRecord: 0.2ms | Allocations: 494)
Started DELETE "/invoice/delete" for 127.0.0.1 at 2022-02-18 13:54:23 -0300
Processing by InvoiceController#delete as HTML
  Parameters: {"id"=>"6443"}
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."id" = $1 LIMIT $2[0m  [["id", 6443], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvoice Destroy (0.2ms)[0m  [1m[31mDELETE FROM "invoices" WHERE "invoices"."id" = $1[0m  [["id", 6443]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/invoice/list/
Completed 200 OK in 2ms (ActiveRecord: 0.7ms | Allocations: 756)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
